(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();function td(t,e){const s=Object.create(null),n=t.split(",");for(let i=0;i<n.length;i++)s[n[i]]=!0;return e?i=>!!s[i.toLowerCase()]:i=>!!s[i]}function Ae(t){if(le(t)){const e={};for(let s=0;s<t.length;s++){const n=t[s],i=ut(n)?qw(n):Ae(n);if(i)for(const r in i)e[r]=i[r]}return e}else{if(ut(t))return t;if(Ge(t))return t}}const jw=/;(?![^(]*\))/g,Hw=/:([^]+)/,zw=/\/\*.*?\*\//gs;function qw(t){const e={};return t.replace(zw,"").split(jw).forEach(s=>{if(s){const n=s.split(Hw);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function We(t){let e="";if(ut(t))e=t;else if(le(t))for(let s=0;s<t.length;s++){const n=We(t[s]);n&&(e+=n+" ")}else if(Ge(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const Ww="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Kw=td(Ww);function oy(t){return!!t||t===""}function Gw(t,e){if(t.length!==e.length)return!1;let s=!0;for(let n=0;s&&n<t.length;n++)s=ec(t[n],e[n]);return s}function ec(t,e){if(t===e)return!0;let s=rp(t),n=rp(e);if(s||n)return s&&n?t.getTime()===e.getTime():!1;if(s=To(t),n=To(e),s||n)return t===e;if(s=le(t),n=le(e),s||n)return s&&n?Gw(t,e):!1;if(s=Ge(t),n=Ge(e),s||n){if(!s||!n)return!1;const i=Object.keys(t).length,r=Object.keys(e).length;if(i!==r)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!ec(t[o],e[o]))return!1}}return String(t)===String(e)}function ay(t,e){return t.findIndex(s=>ec(s,e))}const w=t=>ut(t)?t:t==null?"":le(t)||Ge(t)&&(t.toString===uy||!_e(t.toString))?JSON.stringify(t,ly,2):String(t),ly=(t,e)=>e&&e.__v_isRef?ly(t,e.value):Zi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[n,i])=>(s[`${n} =>`]=i,s),{})}:sc(e)?{[`Set(${e.size})`]:[...e.values()]}:Ge(e)&&!le(e)&&!hy(e)?String(e):e,Qe={},Ji=[],ms=()=>{},Qw=()=>!1,Yw=/^on[^a-z]/,tc=t=>Yw.test(t),sd=t=>t.startsWith("onUpdate:"),jt=Object.assign,nd=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},Xw=Object.prototype.hasOwnProperty,Ne=(t,e)=>Xw.call(t,e),le=Array.isArray,Zi=t=>Wo(t)==="[object Map]",sc=t=>Wo(t)==="[object Set]",rp=t=>Wo(t)==="[object Date]",_e=t=>typeof t=="function",ut=t=>typeof t=="string",To=t=>typeof t=="symbol",Ge=t=>t!==null&&typeof t=="object",cy=t=>Ge(t)&&_e(t.then)&&_e(t.catch),uy=Object.prototype.toString,Wo=t=>uy.call(t),Jw=t=>Wo(t).slice(8,-1),hy=t=>Wo(t)==="[object Object]",id=t=>ut(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Za=td(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),nc=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},Zw=/-(\w)/g,Ms=nc(t=>t.replace(Zw,(e,s)=>s?s.toUpperCase():"")),eE=/\B([A-Z])/g,Pr=nc(t=>t.replace(eE,"-$1").toLowerCase()),ic=nc(t=>t.charAt(0).toUpperCase()+t.slice(1)),uu=nc(t=>t?`on${ic(t)}`:""),ko=(t,e)=>!Object.is(t,e),el=(t,e)=>{for(let s=0;s<t.length;s++)t[s](e)},vl=(t,e,s)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:s})},dy=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let op;const tE=()=>op||(op=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let As;class sE{constructor(e=!1){this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=As,!e&&As&&(this.index=(As.scopes||(As.scopes=[])).push(this)-1)}run(e){if(this.active){const s=As;try{return As=this,e()}finally{As=s}}}on(){As=this}off(){As=this.parent}stop(e){if(this.active){let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.scopes)for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this.active=!1}}}function nE(t,e=As){e&&e.active&&e.effects.push(t)}const rd=t=>{const e=new Set(t);return e.w=0,e.n=0,e},fy=t=>(t.w&On)>0,py=t=>(t.n&On)>0,iE=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=On},rE=t=>{const{deps:e}=t;if(e.length){let s=0;for(let n=0;n<e.length;n++){const i=e[n];fy(i)&&!py(i)?i.delete(t):e[s++]=i,i.w&=~On,i.n&=~On}e.length=s}},Xu=new WeakMap;let to=0,On=1;const Ju=30;let fs;const li=Symbol(""),Zu=Symbol("");class od{constructor(e,s=null,n){this.fn=e,this.scheduler=s,this.active=!0,this.deps=[],this.parent=void 0,nE(this,n)}run(){if(!this.active)return this.fn();let e=fs,s=Sn;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=fs,fs=this,Sn=!0,On=1<<++to,to<=Ju?iE(this):ap(this),this.fn()}finally{to<=Ju&&rE(this),On=1<<--to,fs=this.parent,Sn=s,this.parent=void 0,this.deferStop&&this.stop()}}stop(){fs===this?this.deferStop=!0:this.active&&(ap(this),this.onStop&&this.onStop(),this.active=!1)}}function ap(t){const{deps:e}=t;if(e.length){for(let s=0;s<e.length;s++)e[s].delete(t);e.length=0}}let Sn=!0;const my=[];function Mr(){my.push(Sn),Sn=!1}function Rr(){const t=my.pop();Sn=t===void 0?!0:t}function Jt(t,e,s){if(Sn&&fs){let n=Xu.get(t);n||Xu.set(t,n=new Map);let i=n.get(s);i||n.set(s,i=rd()),gy(i)}}function gy(t,e){let s=!1;to<=Ju?py(t)||(t.n|=On,s=!fy(t)):s=!t.has(fs),s&&(t.add(fs),fs.deps.push(t))}function en(t,e,s,n,i,r){const o=Xu.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(s==="length"&&le(t)){const l=dy(n);o.forEach((u,c)=>{(c==="length"||c>=l)&&a.push(u)})}else switch(s!==void 0&&a.push(o.get(s)),e){case"add":le(t)?id(s)&&a.push(o.get("length")):(a.push(o.get(li)),Zi(t)&&a.push(o.get(Zu)));break;case"delete":le(t)||(a.push(o.get(li)),Zi(t)&&a.push(o.get(Zu)));break;case"set":Zi(t)&&a.push(o.get(li));break}if(a.length===1)a[0]&&eh(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);eh(rd(l))}}function eh(t,e){const s=le(t)?t:[...t];for(const n of s)n.computed&&lp(n);for(const n of s)n.computed||lp(n)}function lp(t,e){(t!==fs||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const oE=td("__proto__,__v_isRef,__isVue"),yy=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(To)),aE=ad(),lE=ad(!1,!0),cE=ad(!0),cp=uE();function uE(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...s){const n=Ue(this);for(let r=0,o=this.length;r<o;r++)Jt(n,"get",r+"");const i=n[e](...s);return i===-1||i===!1?n[e](...s.map(Ue)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...s){Mr();const n=Ue(this)[e].apply(this,s);return Rr(),n}}),t}function ad(t=!1,e=!1){return function(n,i,r){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&r===(t?e?SE:Ey:e?wy:by).get(n))return n;const o=le(n);if(!t&&o&&Ne(cp,i))return Reflect.get(cp,i,r);const a=Reflect.get(n,i,r);return(To(i)?yy.has(i):oE(i))||(t||Jt(n,"get",i),e)?a:Et(a)?o&&id(i)?a:a.value:Ge(a)?t?Ty(a):Ko(a):a}}const hE=vy(),dE=vy(!0);function vy(t=!1){return function(s,n,i,r){let o=s[n];if(lr(o)&&Et(o)&&!Et(i))return!1;if(!t&&(!_l(i)&&!lr(i)&&(o=Ue(o),i=Ue(i)),!le(s)&&Et(o)&&!Et(i)))return o.value=i,!0;const a=le(s)&&id(n)?Number(n)<s.length:Ne(s,n),l=Reflect.set(s,n,i,r);return s===Ue(r)&&(a?ko(i,o)&&en(s,"set",n,i):en(s,"add",n,i)),l}}function fE(t,e){const s=Ne(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&s&&en(t,"delete",e,void 0),n}function pE(t,e){const s=Reflect.has(t,e);return(!To(e)||!yy.has(e))&&Jt(t,"has",e),s}function mE(t){return Jt(t,"iterate",le(t)?"length":li),Reflect.ownKeys(t)}const _y={get:aE,set:hE,deleteProperty:fE,has:pE,ownKeys:mE},gE={get:cE,set(t,e){return!0},deleteProperty(t,e){return!0}},yE=jt({},_y,{get:lE,set:dE}),ld=t=>t,rc=t=>Reflect.getPrototypeOf(t);function Oa(t,e,s=!1,n=!1){t=t.__v_raw;const i=Ue(t),r=Ue(e);s||(e!==r&&Jt(i,"get",e),Jt(i,"get",r));const{has:o}=rc(i),a=n?ld:s?hd:Ao;if(o.call(i,e))return a(t.get(e));if(o.call(i,r))return a(t.get(r));t!==i&&t.get(e)}function Na(t,e=!1){const s=this.__v_raw,n=Ue(s),i=Ue(t);return e||(t!==i&&Jt(n,"has",t),Jt(n,"has",i)),t===i?s.has(t):s.has(t)||s.has(i)}function Pa(t,e=!1){return t=t.__v_raw,!e&&Jt(Ue(t),"iterate",li),Reflect.get(t,"size",t)}function up(t){t=Ue(t);const e=Ue(this);return rc(e).has.call(e,t)||(e.add(t),en(e,"add",t,t)),this}function hp(t,e){e=Ue(e);const s=Ue(this),{has:n,get:i}=rc(s);let r=n.call(s,t);r||(t=Ue(t),r=n.call(s,t));const o=i.call(s,t);return s.set(t,e),r?ko(e,o)&&en(s,"set",t,e):en(s,"add",t,e),this}function dp(t){const e=Ue(this),{has:s,get:n}=rc(e);let i=s.call(e,t);i||(t=Ue(t),i=s.call(e,t)),n&&n.call(e,t);const r=e.delete(t);return i&&en(e,"delete",t,void 0),r}function fp(){const t=Ue(this),e=t.size!==0,s=t.clear();return e&&en(t,"clear",void 0,void 0),s}function Ma(t,e){return function(n,i){const r=this,o=r.__v_raw,a=Ue(o),l=e?ld:t?hd:Ao;return!t&&Jt(a,"iterate",li),o.forEach((u,c)=>n.call(i,l(u),l(c),r))}}function Ra(t,e,s){return function(...n){const i=this.__v_raw,r=Ue(i),o=Zi(r),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=i[t](...n),c=s?ld:e?hd:Ao;return!e&&Jt(r,"iterate",l?Zu:li),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:a?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function mn(t){return function(...e){return t==="delete"?!1:this}}function vE(){const t={get(r){return Oa(this,r)},get size(){return Pa(this)},has:Na,add:up,set:hp,delete:dp,clear:fp,forEach:Ma(!1,!1)},e={get(r){return Oa(this,r,!1,!0)},get size(){return Pa(this)},has:Na,add:up,set:hp,delete:dp,clear:fp,forEach:Ma(!1,!0)},s={get(r){return Oa(this,r,!0)},get size(){return Pa(this,!0)},has(r){return Na.call(this,r,!0)},add:mn("add"),set:mn("set"),delete:mn("delete"),clear:mn("clear"),forEach:Ma(!0,!1)},n={get(r){return Oa(this,r,!0,!0)},get size(){return Pa(this,!0)},has(r){return Na.call(this,r,!0)},add:mn("add"),set:mn("set"),delete:mn("delete"),clear:mn("clear"),forEach:Ma(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=Ra(r,!1,!1),s[r]=Ra(r,!0,!1),e[r]=Ra(r,!1,!0),n[r]=Ra(r,!0,!0)}),[t,s,e,n]}const[_E,bE,wE,EE]=vE();function cd(t,e){const s=e?t?EE:wE:t?bE:_E;return(n,i,r)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?n:Reflect.get(Ne(s,i)&&i in n?s:n,i,r)}const TE={get:cd(!1,!1)},kE={get:cd(!1,!0)},AE={get:cd(!0,!1)},by=new WeakMap,wy=new WeakMap,Ey=new WeakMap,SE=new WeakMap;function IE(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function CE(t){return t.__v_skip||!Object.isExtensible(t)?0:IE(Jw(t))}function Ko(t){return lr(t)?t:ud(t,!1,_y,TE,by)}function DE(t){return ud(t,!1,yE,kE,wy)}function Ty(t){return ud(t,!0,gE,AE,Ey)}function ud(t,e,s,n,i){if(!Ge(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=i.get(t);if(r)return r;const o=CE(t);if(o===0)return t;const a=new Proxy(t,o===2?n:s);return i.set(t,a),a}function er(t){return lr(t)?er(t.__v_raw):!!(t&&t.__v_isReactive)}function lr(t){return!!(t&&t.__v_isReadonly)}function _l(t){return!!(t&&t.__v_isShallow)}function ky(t){return er(t)||lr(t)}function Ue(t){const e=t&&t.__v_raw;return e?Ue(e):t}function Ay(t){return vl(t,"__v_skip",!0),t}const Ao=t=>Ge(t)?Ko(t):t,hd=t=>Ge(t)?Ty(t):t;function Sy(t){Sn&&fs&&(t=Ue(t),gy(t.dep||(t.dep=rd())))}function Iy(t,e){t=Ue(t),t.dep&&eh(t.dep)}function Et(t){return!!(t&&t.__v_isRef===!0)}function qe(t){return Cy(t,!1)}function $E(t){return Cy(t,!0)}function Cy(t,e){return Et(t)?t:new OE(t,e)}class OE{constructor(e,s){this.__v_isShallow=s,this.dep=void 0,this.__v_isRef=!0,this._rawValue=s?e:Ue(e),this._value=s?e:Ao(e)}get value(){return Sy(this),this._value}set value(e){const s=this.__v_isShallow||_l(e)||lr(e);e=s?e:Ue(e),ko(e,this._rawValue)&&(this._rawValue=e,this._value=s?e:Ao(e),Iy(this))}}function E(t){return Et(t)?t.value:t}const NE={get:(t,e,s)=>E(Reflect.get(t,e,s)),set:(t,e,s,n)=>{const i=t[e];return Et(i)&&!Et(s)?(i.value=s,!0):Reflect.set(t,e,s,n)}};function Dy(t){return er(t)?t:new Proxy(t,NE)}function as(t){const e=le(t)?new Array(t.length):{};for(const s in t)e[s]=ME(t,s);return e}class PE{constructor(e,s,n){this._object=e,this._key=s,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}}function ME(t,e,s){const n=t[e];return Et(n)?n:new PE(t,e,s)}var $y;class RE{constructor(e,s,n,i){this._setter=s,this.dep=void 0,this.__v_isRef=!0,this[$y]=!1,this._dirty=!0,this.effect=new od(e,()=>{this._dirty||(this._dirty=!0,Iy(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const e=Ue(this);return Sy(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}$y="__v_isReadonly";function LE(t,e,s=!1){let n,i;const r=_e(t);return r?(n=t,i=ms):(n=t.get,i=t.set),new RE(n,i,r||!i,s)}function In(t,e,s,n){let i;try{i=n?t(...n):t()}catch(r){oc(r,e,s)}return i}function gs(t,e,s,n){if(_e(t)){const r=In(t,e,s,n);return r&&cy(r)&&r.catch(o=>{oc(o,e,s)}),r}const i=[];for(let r=0;r<t.length;r++)i.push(gs(t[r],e,s,n));return i}function oc(t,e,s,n=!0){const i=e?e.vnode:null;if(e){let r=e.parent;const o=e.proxy,a=s;for(;r;){const u=r.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](t,o,a)===!1)return}r=r.parent}const l=e.appContext.config.errorHandler;if(l){In(l,null,10,[t,o,a]);return}}xE(t,s,i,n)}function xE(t,e,s,n=!0){console.error(t)}let So=!1,th=!1;const Dt=[];let Is=0;const tr=[];let js=null,Jn=0;const Oy=Promise.resolve();let dd=null;function Ny(t){const e=dd||Oy;return t?e.then(this?t.bind(this):t):e}function VE(t){let e=Is+1,s=Dt.length;for(;e<s;){const n=e+s>>>1;Io(Dt[n])<t?e=n+1:s=n}return e}function fd(t){(!Dt.length||!Dt.includes(t,So&&t.allowRecurse?Is+1:Is))&&(t.id==null?Dt.push(t):Dt.splice(VE(t.id),0,t),Py())}function Py(){!So&&!th&&(th=!0,dd=Oy.then(Ry))}function FE(t){const e=Dt.indexOf(t);e>Is&&Dt.splice(e,1)}function UE(t){le(t)?tr.push(...t):(!js||!js.includes(t,t.allowRecurse?Jn+1:Jn))&&tr.push(t),Py()}function pp(t,e=So?Is+1:0){for(;e<Dt.length;e++){const s=Dt[e];s&&s.pre&&(Dt.splice(e,1),e--,s())}}function My(t){if(tr.length){const e=[...new Set(tr)];if(tr.length=0,js){js.push(...e);return}for(js=e,js.sort((s,n)=>Io(s)-Io(n)),Jn=0;Jn<js.length;Jn++)js[Jn]();js=null,Jn=0}}const Io=t=>t.id==null?1/0:t.id,BE=(t,e)=>{const s=Io(t)-Io(e);if(s===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return s};function Ry(t){th=!1,So=!0,Dt.sort(BE);const e=ms;try{for(Is=0;Is<Dt.length;Is++){const s=Dt[Is];s&&s.active!==!1&&In(s,null,14)}}finally{Is=0,Dt.length=0,My(),So=!1,dd=null,(Dt.length||tr.length)&&Ry()}}function jE(t,e,...s){if(t.isUnmounted)return;const n=t.vnode.props||Qe;let i=s;const r=e.startsWith("update:"),o=r&&e.slice(7);if(o&&o in n){const c=`${o==="modelValue"?"model":o}Modifiers`,{number:d,trim:f}=n[c]||Qe;f&&(i=s.map(p=>ut(p)?p.trim():p)),d&&(i=s.map(dy))}let a,l=n[a=uu(e)]||n[a=uu(Ms(e))];!l&&r&&(l=n[a=uu(Pr(e))]),l&&gs(l,t,6,i);const u=n[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,gs(u,t,6,i)}}function Ly(t,e,s=!1){const n=e.emitsCache,i=n.get(t);if(i!==void 0)return i;const r=t.emits;let o={},a=!1;if(!_e(t)){const l=u=>{const c=Ly(u,e,!0);c&&(a=!0,jt(o,c))};!s&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!r&&!a?(Ge(t)&&n.set(t,null),null):(le(r)?r.forEach(l=>o[l]=null):jt(o,r),Ge(t)&&n.set(t,o),o)}function ac(t,e){return!t||!tc(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ne(t,e[0].toLowerCase()+e.slice(1))||Ne(t,Pr(e))||Ne(t,e))}let Tt=null,lc=null;function bl(t){const e=Tt;return Tt=t,lc=t&&t.type.__scopeId||null,e}function cn(t){lc=t}function un(){lc=null}function Pe(t,e=Tt,s){if(!e||t._n)return t;const n=(...i)=>{n._d&&kp(-1);const r=bl(e);let o;try{o=t(...i)}finally{bl(r),n._d&&kp(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function hu(t){const{type:e,vnode:s,proxy:n,withProxy:i,props:r,propsOptions:[o],slots:a,attrs:l,emit:u,render:c,renderCache:d,data:f,setupState:p,ctx:b,inheritAttrs:_}=t;let A,C;const P=bl(t);try{if(s.shapeFlag&4){const R=i||n;A=Ss(c.call(R,R,d,r,p,f,b)),C=l}else{const R=e;A=Ss(R.length>1?R(r,{attrs:l,slots:a,emit:u}):R(r,null)),C=e.props?l:HE(l)}}catch(R){fo.length=0,oc(R,t,1),A=j(Nn)}let M=A;if(C&&_!==!1){const R=Object.keys(C),{shapeFlag:z}=M;R.length&&z&7&&(o&&R.some(sd)&&(C=zE(C,o)),M=cr(M,C))}return s.dirs&&(M=cr(M),M.dirs=M.dirs?M.dirs.concat(s.dirs):s.dirs),s.transition&&(M.transition=s.transition),A=M,bl(P),A}const HE=t=>{let e;for(const s in t)(s==="class"||s==="style"||tc(s))&&((e||(e={}))[s]=t[s]);return e},zE=(t,e)=>{const s={};for(const n in t)(!sd(n)||!(n.slice(9)in e))&&(s[n]=t[n]);return s};function qE(t,e,s){const{props:n,children:i,component:r}=t,{props:o,children:a,patchFlag:l}=e,u=r.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return n?mp(n,o,u):!!o;if(l&8){const c=e.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(o[f]!==n[f]&&!ac(u,f))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?mp(n,o,u):!0:!!o;return!1}function mp(t,e,s){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let i=0;i<n.length;i++){const r=n[i];if(e[r]!==t[r]&&!ac(s,r))return!0}return!1}function WE({vnode:t,parent:e},s){for(;e&&e.subTree===t;)(t=e.vnode).el=s,e=e.parent}const KE=t=>t.__isSuspense;function GE(t,e){e&&e.pendingBranch?le(t)?e.effects.push(...t):e.effects.push(t):UE(t)}function tl(t,e){if(gt){let s=gt.provides;const n=gt.parent&&gt.parent.provides;n===s&&(s=gt.provides=Object.create(n)),s[t]=e}}function Qs(t,e,s=!1){const n=gt||Tt;if(n){const i=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(i&&t in i)return i[t];if(arguments.length>1)return s&&_e(e)?e.call(n.proxy):e}}function QE(t,e){return pd(t,null,{flush:"post"})}const La={};function sl(t,e,s){return pd(t,e,s)}function pd(t,e,{immediate:s,deep:n,flush:i,onTrack:r,onTrigger:o}=Qe){const a=gt;let l,u=!1,c=!1;if(Et(t)?(l=()=>t.value,u=_l(t)):er(t)?(l=()=>t,n=!0):le(t)?(c=!0,u=t.some(M=>er(M)||_l(M)),l=()=>t.map(M=>{if(Et(M))return M.value;if(er(M))return ei(M);if(_e(M))return In(M,a,2)})):_e(t)?e?l=()=>In(t,a,2):l=()=>{if(!(a&&a.isUnmounted))return d&&d(),gs(t,a,3,[f])}:l=ms,e&&n){const M=l;l=()=>ei(M())}let d,f=M=>{d=C.onStop=()=>{In(M,a,4)}},p;if(Do)if(f=ms,e?s&&gs(e,a,3,[l(),c?[]:void 0,f]):l(),i==="sync"){const M=U1();p=M.__watcherHandles||(M.__watcherHandles=[])}else return ms;let b=c?new Array(t.length).fill(La):La;const _=()=>{if(C.active)if(e){const M=C.run();(n||u||(c?M.some((R,z)=>ko(R,b[z])):ko(M,b)))&&(d&&d(),gs(e,a,3,[M,b===La?void 0:c&&b[0]===La?[]:b,f]),b=M)}else C.run()};_.allowRecurse=!!e;let A;i==="sync"?A=_:i==="post"?A=()=>zt(_,a&&a.suspense):(_.pre=!0,a&&(_.id=a.uid),A=()=>fd(_));const C=new od(l,A);e?s?_():b=C.run():i==="post"?zt(C.run.bind(C),a&&a.suspense):C.run();const P=()=>{C.stop(),a&&a.scope&&nd(a.scope.effects,C)};return p&&p.push(P),P}function YE(t,e,s){const n=this.proxy,i=ut(t)?t.includes(".")?xy(n,t):()=>n[t]:t.bind(n,n);let r;_e(e)?r=e:(r=e.handler,s=e);const o=gt;ur(this);const a=pd(i,r.bind(n),s);return o?ur(o):ci(),a}function xy(t,e){const s=e.split(".");return()=>{let n=t;for(let i=0;i<s.length&&n;i++)n=n[s[i]];return n}}function ei(t,e){if(!Ge(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Et(t))ei(t.value,e);else if(le(t))for(let s=0;s<t.length;s++)ei(t[s],e);else if(sc(t)||Zi(t))t.forEach(s=>{ei(s,e)});else if(hy(t))for(const s in t)ei(t[s],e);return t}function Oe(t){return _e(t)?{setup:t,name:t.name}:t}const co=t=>!!t.type.__asyncLoader,Vy=t=>t.type.__isKeepAlive;function XE(t,e){Fy(t,"a",e)}function JE(t,e){Fy(t,"da",e)}function Fy(t,e,s=gt){const n=t.__wdc||(t.__wdc=()=>{let i=s;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(cc(e,n,s),s){let i=s.parent;for(;i&&i.parent;)Vy(i.parent.vnode)&&ZE(n,e,s,i),i=i.parent}}function ZE(t,e,s,n){const i=cc(e,t,n,!0);gd(()=>{nd(n[e],i)},s)}function cc(t,e,s=gt,n=!1){if(s){const i=s[t]||(s[t]=[]),r=e.__weh||(e.__weh=(...o)=>{if(s.isUnmounted)return;Mr(),ur(s);const a=gs(e,s,t,o);return ci(),Rr(),a});return n?i.unshift(r):i.push(r),r}}const hn=t=>(e,s=gt)=>(!Do||t==="sp")&&cc(t,(...n)=>e(...n),s),e1=hn("bm"),md=hn("m"),t1=hn("bu"),s1=hn("u"),n1=hn("bum"),gd=hn("um"),i1=hn("sp"),r1=hn("rtg"),o1=hn("rtc");function a1(t,e=gt){cc("ec",t,e)}function gp(t,e){const s=Tt;if(s===null)return t;const n=dc(s)||s.proxy,i=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[o,a,l,u=Qe]=e[r];o&&(_e(o)&&(o={mounted:o,updated:o}),o.deep&&ei(a),i.push({dir:o,instance:n,value:a,oldValue:void 0,arg:l,modifiers:u}))}return t}function Gn(t,e,s,n){const i=t.dirs,r=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[n];l&&(Mr(),gs(l,s,8,[t.el,a,t,e]),Rr())}}const Uy="components";function Fe(t,e){return c1(Uy,t,!0,e)||t}const l1=Symbol();function c1(t,e,s=!0,n=!1){const i=Tt||gt;if(i){const r=i.type;if(t===Uy){const a=L1(r,!1);if(a&&(a===e||a===Ms(e)||a===ic(Ms(e))))return r}const o=yp(i[t]||r[t],e)||yp(i.appContext[t],e);return!o&&n?r:o}}function yp(t,e){return t&&(t[e]||t[Ms(e)]||t[ic(Ms(e))])}function ve(t,e,s,n){let i;const r=s&&s[n];if(le(t)||ut(t)){i=new Array(t.length);for(let o=0,a=t.length;o<a;o++)i[o]=e(t[o],o,void 0,r&&r[o])}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,r&&r[o])}else if(Ge(t))if(t[Symbol.iterator])i=Array.from(t,(o,a)=>e(o,a,void 0,r&&r[a]));else{const o=Object.keys(t);i=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const u=o[a];i[a]=e(t[u],u,a,r&&r[a])}}else i=[];return s&&(s[n]=i),i}function Gt(t,e,s={},n,i){if(Tt.isCE||Tt.parent&&co(Tt.parent)&&Tt.parent.isCE)return e!=="default"&&(s.name=e),j("slot",s,n&&n());let r=t[e];r&&r._c&&(r._d=!1),g();const o=r&&By(r(s)),a=wn(te,{key:s.key||o&&o.key||`_${e}`},o||(n?n():[]),o&&t._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function By(t){return t.some(e=>El(e)?!(e.type===Nn||e.type===te&&!By(e.children)):!0)?t:null}const sh=t=>t?Zy(t)?dc(t)||t.proxy:sh(t.parent):null,uo=jt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>sh(t.parent),$root:t=>sh(t.root),$emit:t=>t.emit,$options:t=>yd(t),$forceUpdate:t=>t.f||(t.f=()=>fd(t.update)),$nextTick:t=>t.n||(t.n=Ny.bind(t.proxy)),$watch:t=>YE.bind(t)}),du=(t,e)=>t!==Qe&&!t.__isScriptSetup&&Ne(t,e),u1={get({_:t},e){const{ctx:s,setupState:n,data:i,props:r,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return n[e];case 2:return i[e];case 4:return s[e];case 3:return r[e]}else{if(du(n,e))return o[e]=1,n[e];if(i!==Qe&&Ne(i,e))return o[e]=2,i[e];if((u=t.propsOptions[0])&&Ne(u,e))return o[e]=3,r[e];if(s!==Qe&&Ne(s,e))return o[e]=4,s[e];nh&&(o[e]=0)}}const c=uo[e];let d,f;if(c)return e==="$attrs"&&Jt(t,"get",e),c(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(s!==Qe&&Ne(s,e))return o[e]=4,s[e];if(f=l.config.globalProperties,Ne(f,e))return f[e]},set({_:t},e,s){const{data:n,setupState:i,ctx:r}=t;return du(i,e)?(i[e]=s,!0):n!==Qe&&Ne(n,e)?(n[e]=s,!0):Ne(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:n,appContext:i,propsOptions:r}},o){let a;return!!s[o]||t!==Qe&&Ne(t,o)||du(e,o)||(a=r[0])&&Ne(a,o)||Ne(n,o)||Ne(uo,o)||Ne(i.config.globalProperties,o)},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:Ne(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};let nh=!0;function h1(t){const e=yd(t),s=t.proxy,n=t.ctx;nh=!1,e.beforeCreate&&vp(e.beforeCreate,t,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:d,mounted:f,beforeUpdate:p,updated:b,activated:_,deactivated:A,beforeDestroy:C,beforeUnmount:P,destroyed:M,unmounted:R,render:z,renderTracked:W,renderTriggered:ce,errorCaptured:q,serverPrefetch:Z,expose:de,inheritAttrs:Ie,components:Me,directives:ze,filters:dt}=e;if(u&&d1(u,n,null,t.appContext.config.unwrapInjectedRef),o)for(const ye in o){const be=o[ye];_e(be)&&(n[ye]=be.bind(s))}if(i){const ye=i.call(s,s);Ge(ye)&&(t.data=Ko(ye))}if(nh=!0,r)for(const ye in r){const be=r[ye],tt=_e(be)?be.bind(s,s):_e(be.get)?be.get.bind(s,s):ms,Ht=!_e(be)&&_e(be.set)?be.set.bind(s):ms,bt=ke({get:tt,set:Ht});Object.defineProperty(n,ye,{enumerable:!0,configurable:!0,get:()=>bt.value,set:Ze=>bt.value=Ze})}if(a)for(const ye in a)jy(a[ye],n,s,ye);if(l){const ye=_e(l)?l.call(s):l;Reflect.ownKeys(ye).forEach(be=>{tl(be,ye[be])})}c&&vp(c,t,"c");function Te(ye,be){le(be)?be.forEach(tt=>ye(tt.bind(s))):be&&ye(be.bind(s))}if(Te(e1,d),Te(md,f),Te(t1,p),Te(s1,b),Te(XE,_),Te(JE,A),Te(a1,q),Te(o1,W),Te(r1,ce),Te(n1,P),Te(gd,R),Te(i1,Z),le(de))if(de.length){const ye=t.exposed||(t.exposed={});de.forEach(be=>{Object.defineProperty(ye,be,{get:()=>s[be],set:tt=>s[be]=tt})})}else t.exposed||(t.exposed={});z&&t.render===ms&&(t.render=z),Ie!=null&&(t.inheritAttrs=Ie),Me&&(t.components=Me),ze&&(t.directives=ze)}function d1(t,e,s=ms,n=!1){le(t)&&(t=ih(t));for(const i in t){const r=t[i];let o;Ge(r)?"default"in r?o=Qs(r.from||i,r.default,!0):o=Qs(r.from||i):o=Qs(r),Et(o)&&n?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[i]=o}}function vp(t,e,s){gs(le(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,s)}function jy(t,e,s,n){const i=n.includes(".")?xy(s,n):()=>s[n];if(ut(t)){const r=e[t];_e(r)&&sl(i,r)}else if(_e(t))sl(i,t.bind(s));else if(Ge(t))if(le(t))t.forEach(r=>jy(r,e,s,n));else{const r=_e(t.handler)?t.handler.bind(s):e[t.handler];_e(r)&&sl(i,r,t)}}function yd(t){const e=t.type,{mixins:s,extends:n}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,a=r.get(e);let l;return a?l=a:!i.length&&!s&&!n?l=e:(l={},i.length&&i.forEach(u=>wl(l,u,o,!0)),wl(l,e,o)),Ge(e)&&r.set(e,l),l}function wl(t,e,s,n=!1){const{mixins:i,extends:r}=e;r&&wl(t,r,s,!0),i&&i.forEach(o=>wl(t,o,s,!0));for(const o in e)if(!(n&&o==="expose")){const a=f1[o]||s&&s[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const f1={data:_p,props:Yn,emits:Yn,methods:Yn,computed:Yn,beforeCreate:xt,created:xt,beforeMount:xt,mounted:xt,beforeUpdate:xt,updated:xt,beforeDestroy:xt,beforeUnmount:xt,destroyed:xt,unmounted:xt,activated:xt,deactivated:xt,errorCaptured:xt,serverPrefetch:xt,components:Yn,directives:Yn,watch:m1,provide:_p,inject:p1};function _p(t,e){return e?t?function(){return jt(_e(t)?t.call(this,this):t,_e(e)?e.call(this,this):e)}:e:t}function p1(t,e){return Yn(ih(t),ih(e))}function ih(t){if(le(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function xt(t,e){return t?[...new Set([].concat(t,e))]:e}function Yn(t,e){return t?jt(jt(Object.create(null),t),e):e}function m1(t,e){if(!t)return e;if(!e)return t;const s=jt(Object.create(null),t);for(const n in e)s[n]=xt(t[n],e[n]);return s}function g1(t,e,s,n=!1){const i={},r={};vl(r,hc,1),t.propsDefaults=Object.create(null),Hy(t,e,i,r);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);s?t.props=n?i:DE(i):t.type.props?t.props=i:t.props=r,t.attrs=r}function y1(t,e,s,n){const{props:i,attrs:r,vnode:{patchFlag:o}}=t,a=Ue(i),[l]=t.propsOptions;let u=!1;if((n||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];if(ac(t.emitsOptions,f))continue;const p=e[f];if(l)if(Ne(r,f))p!==r[f]&&(r[f]=p,u=!0);else{const b=Ms(f);i[b]=rh(l,a,b,p,t,!1)}else p!==r[f]&&(r[f]=p,u=!0)}}}else{Hy(t,e,i,r)&&(u=!0);let c;for(const d in a)(!e||!Ne(e,d)&&((c=Pr(d))===d||!Ne(e,c)))&&(l?s&&(s[d]!==void 0||s[c]!==void 0)&&(i[d]=rh(l,a,d,void 0,t,!0)):delete i[d]);if(r!==a)for(const d in r)(!e||!Ne(e,d))&&(delete r[d],u=!0)}u&&en(t,"set","$attrs")}function Hy(t,e,s,n){const[i,r]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Za(l))continue;const u=e[l];let c;i&&Ne(i,c=Ms(l))?!r||!r.includes(c)?s[c]=u:(a||(a={}))[c]=u:ac(t.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,o=!0)}if(r){const l=Ue(s),u=a||Qe;for(let c=0;c<r.length;c++){const d=r[c];s[d]=rh(i,l,d,u[d],t,!Ne(u,d))}}return o}function rh(t,e,s,n,i,r){const o=t[s];if(o!=null){const a=Ne(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&_e(l)){const{propsDefaults:u}=i;s in u?n=u[s]:(ur(i),n=u[s]=l.call(null,e),ci())}else n=l}o[0]&&(r&&!a?n=!1:o[1]&&(n===""||n===Pr(s))&&(n=!0))}return n}function zy(t,e,s=!1){const n=e.propsCache,i=n.get(t);if(i)return i;const r=t.props,o={},a=[];let l=!1;if(!_e(t)){const c=d=>{l=!0;const[f,p]=zy(d,e,!0);jt(o,f),p&&a.push(...p)};!s&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!r&&!l)return Ge(t)&&n.set(t,Ji),Ji;if(le(r))for(let c=0;c<r.length;c++){const d=Ms(r[c]);bp(d)&&(o[d]=Qe)}else if(r)for(const c in r){const d=Ms(c);if(bp(d)){const f=r[c],p=o[d]=le(f)||_e(f)?{type:f}:Object.assign({},f);if(p){const b=Tp(Boolean,p.type),_=Tp(String,p.type);p[0]=b>-1,p[1]=_<0||b<_,(b>-1||Ne(p,"default"))&&a.push(d)}}}const u=[o,a];return Ge(t)&&n.set(t,u),u}function bp(t){return t[0]!=="$"}function wp(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function Ep(t,e){return wp(t)===wp(e)}function Tp(t,e){return le(e)?e.findIndex(s=>Ep(s,t)):_e(e)&&Ep(e,t)?0:-1}const qy=t=>t[0]==="_"||t==="$stable",vd=t=>le(t)?t.map(Ss):[Ss(t)],v1=(t,e,s)=>{if(e._n)return e;const n=Pe((...i)=>vd(e(...i)),s);return n._c=!1,n},Wy=(t,e,s)=>{const n=t._ctx;for(const i in t){if(qy(i))continue;const r=t[i];if(_e(r))e[i]=v1(i,r,n);else if(r!=null){const o=vd(r);e[i]=()=>o}}},Ky=(t,e)=>{const s=vd(e);t.slots.default=()=>s},_1=(t,e)=>{if(t.vnode.shapeFlag&32){const s=e._;s?(t.slots=Ue(e),vl(e,"_",s)):Wy(e,t.slots={})}else t.slots={},e&&Ky(t,e);vl(t.slots,hc,1)},b1=(t,e,s)=>{const{vnode:n,slots:i}=t;let r=!0,o=Qe;if(n.shapeFlag&32){const a=e._;a?s&&a===1?r=!1:(jt(i,e),!s&&a===1&&delete i._):(r=!e.$stable,Wy(e,i)),o=e}else e&&(Ky(t,e),o={default:1});if(r)for(const a in i)!qy(a)&&!(a in o)&&delete i[a]};function Gy(){return{app:null,config:{isNativeTag:Qw,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let w1=0;function E1(t,e){return function(n,i=null){_e(n)||(n=Object.assign({},n)),i!=null&&!Ge(i)&&(i=null);const r=Gy(),o=new Set;let a=!1;const l=r.app={_uid:w1++,_component:n,_props:i,_container:null,_context:r,_instance:null,version:B1,get config(){return r.config},set config(u){},use(u,...c){return o.has(u)||(u&&_e(u.install)?(o.add(u),u.install(l,...c)):_e(u)&&(o.add(u),u(l,...c))),l},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),l},component(u,c){return c?(r.components[u]=c,l):r.components[u]},directive(u,c){return c?(r.directives[u]=c,l):r.directives[u]},mount(u,c,d){if(!a){const f=j(n,i);return f.appContext=r,c&&e?e(f,u):t(f,u,d),a=!0,l._container=u,u.__vue_app__=l,dc(f.component)||f.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(u,c){return r.provides[u]=c,l}};return l}}function oh(t,e,s,n,i=!1){if(le(t)){t.forEach((f,p)=>oh(f,e&&(le(e)?e[p]:e),s,n,i));return}if(co(n)&&!i)return;const r=n.shapeFlag&4?dc(n.component)||n.component.proxy:n.el,o=i?null:r,{i:a,r:l}=t,u=e&&e.r,c=a.refs===Qe?a.refs={}:a.refs,d=a.setupState;if(u!=null&&u!==l&&(ut(u)?(c[u]=null,Ne(d,u)&&(d[u]=null)):Et(u)&&(u.value=null)),_e(l))In(l,a,12,[o,c]);else{const f=ut(l),p=Et(l);if(f||p){const b=()=>{if(t.f){const _=f?Ne(d,l)?d[l]:c[l]:l.value;i?le(_)&&nd(_,r):le(_)?_.includes(r)||_.push(r):f?(c[l]=[r],Ne(d,l)&&(d[l]=c[l])):(l.value=[r],t.k&&(c[t.k]=l.value))}else f?(c[l]=o,Ne(d,l)&&(d[l]=o)):p&&(l.value=o,t.k&&(c[t.k]=o))};o?(b.id=-1,zt(b,s)):b()}}}const zt=GE;function T1(t){return k1(t)}function k1(t,e){const s=tE();s.__VUE__=!0;const{insert:n,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:f,setScopeId:p=ms,insertStaticContent:b}=t,_=(m,v,T,I=null,$=null,U=null,G=!1,F=null,B=!!v.dynamicChildren)=>{if(m===v)return;m&&!Yr(m,v)&&(I=H(m),Ze(m,$,U,!0),m=null),v.patchFlag===-2&&(B=!1,v.dynamicChildren=null);const{type:O,ref:ne,shapeFlag:J}=v;switch(O){case uc:A(m,v,T,I);break;case Nn:C(m,v,T,I);break;case ho:m==null&&P(v,T,I,G);break;case te:Me(m,v,T,I,$,U,G,F,B);break;default:J&1?z(m,v,T,I,$,U,G,F,B):J&6?ze(m,v,T,I,$,U,G,F,B):(J&64||J&128)&&O.process(m,v,T,I,$,U,G,F,B,X)}ne!=null&&$&&oh(ne,m&&m.ref,U,v||m,!v)},A=(m,v,T,I)=>{if(m==null)n(v.el=a(v.children),T,I);else{const $=v.el=m.el;v.children!==m.children&&u($,v.children)}},C=(m,v,T,I)=>{m==null?n(v.el=l(v.children||""),T,I):v.el=m.el},P=(m,v,T,I)=>{[m.el,m.anchor]=b(m.children,v,T,I,m.el,m.anchor)},M=({el:m,anchor:v},T,I)=>{let $;for(;m&&m!==v;)$=f(m),n(m,T,I),m=$;n(v,T,I)},R=({el:m,anchor:v})=>{let T;for(;m&&m!==v;)T=f(m),i(m),m=T;i(v)},z=(m,v,T,I,$,U,G,F,B)=>{G=G||v.type==="svg",m==null?W(v,T,I,$,U,G,F,B):Z(m,v,$,U,G,F,B)},W=(m,v,T,I,$,U,G,F)=>{let B,O;const{type:ne,props:J,shapeFlag:se,transition:ue,dirs:Ee}=m;if(B=m.el=o(m.type,U,J&&J.is,J),se&8?c(B,m.children):se&16&&q(m.children,B,null,I,$,U&&ne!=="foreignObject",G,F),Ee&&Gn(m,null,I,"created"),J){for(const Le in J)Le!=="value"&&!Za(Le)&&r(B,Le,null,J[Le],U,m.children,I,$,K);"value"in J&&r(B,"value",null,J.value),(O=J.onVnodeBeforeMount)&&ks(O,I,m)}ce(B,m,m.scopeId,G,I),Ee&&Gn(m,null,I,"beforeMount");const Be=(!$||$&&!$.pendingBranch)&&ue&&!ue.persisted;Be&&ue.beforeEnter(B),n(B,v,T),((O=J&&J.onVnodeMounted)||Be||Ee)&&zt(()=>{O&&ks(O,I,m),Be&&ue.enter(B),Ee&&Gn(m,null,I,"mounted")},$)},ce=(m,v,T,I,$)=>{if(T&&p(m,T),I)for(let U=0;U<I.length;U++)p(m,I[U]);if($){let U=$.subTree;if(v===U){const G=$.vnode;ce(m,G,G.scopeId,G.slotScopeIds,$.parent)}}},q=(m,v,T,I,$,U,G,F,B=0)=>{for(let O=B;O<m.length;O++){const ne=m[O]=F?_n(m[O]):Ss(m[O]);_(null,ne,v,T,I,$,U,G,F)}},Z=(m,v,T,I,$,U,G)=>{const F=v.el=m.el;let{patchFlag:B,dynamicChildren:O,dirs:ne}=v;B|=m.patchFlag&16;const J=m.props||Qe,se=v.props||Qe;let ue;T&&Qn(T,!1),(ue=se.onVnodeBeforeUpdate)&&ks(ue,T,v,m),ne&&Gn(v,m,T,"beforeUpdate"),T&&Qn(T,!0);const Ee=$&&v.type!=="foreignObject";if(O?de(m.dynamicChildren,O,F,T,I,Ee,U):G||be(m,v,F,null,T,I,Ee,U,!1),B>0){if(B&16)Ie(F,v,J,se,T,I,$);else if(B&2&&J.class!==se.class&&r(F,"class",null,se.class,$),B&4&&r(F,"style",J.style,se.style,$),B&8){const Be=v.dynamicProps;for(let Le=0;Le<Be.length;Le++){const st=Be[Le],hs=J[st],Ri=se[st];(Ri!==hs||st==="value")&&r(F,st,hs,Ri,$,m.children,T,I,K)}}B&1&&m.children!==v.children&&c(F,v.children)}else!G&&O==null&&Ie(F,v,J,se,T,I,$);((ue=se.onVnodeUpdated)||ne)&&zt(()=>{ue&&ks(ue,T,v,m),ne&&Gn(v,m,T,"updated")},I)},de=(m,v,T,I,$,U,G)=>{for(let F=0;F<v.length;F++){const B=m[F],O=v[F],ne=B.el&&(B.type===te||!Yr(B,O)||B.shapeFlag&70)?d(B.el):T;_(B,O,ne,null,I,$,U,G,!0)}},Ie=(m,v,T,I,$,U,G)=>{if(T!==I){if(T!==Qe)for(const F in T)!Za(F)&&!(F in I)&&r(m,F,T[F],null,G,v.children,$,U,K);for(const F in I){if(Za(F))continue;const B=I[F],O=T[F];B!==O&&F!=="value"&&r(m,F,O,B,G,v.children,$,U,K)}"value"in I&&r(m,"value",T.value,I.value)}},Me=(m,v,T,I,$,U,G,F,B)=>{const O=v.el=m?m.el:a(""),ne=v.anchor=m?m.anchor:a("");let{patchFlag:J,dynamicChildren:se,slotScopeIds:ue}=v;ue&&(F=F?F.concat(ue):ue),m==null?(n(O,T,I),n(ne,T,I),q(v.children,T,ne,$,U,G,F,B)):J>0&&J&64&&se&&m.dynamicChildren?(de(m.dynamicChildren,se,T,$,U,G,F),(v.key!=null||$&&v===$.subTree)&&Qy(m,v,!0)):be(m,v,T,ne,$,U,G,F,B)},ze=(m,v,T,I,$,U,G,F,B)=>{v.slotScopeIds=F,m==null?v.shapeFlag&512?$.ctx.activate(v,T,I,G,B):dt(v,T,I,$,U,G,B):ft(m,v,B)},dt=(m,v,T,I,$,U,G)=>{const F=m.component=N1(m,I,$);if(Vy(m)&&(F.ctx.renderer=X),P1(F),F.asyncDep){if($&&$.registerDep(F,Te),!m.el){const B=F.subTree=j(Nn);C(null,B,v,T)}return}Te(F,m,v,T,$,U,G)},ft=(m,v,T)=>{const I=v.component=m.component;if(qE(m,v,T))if(I.asyncDep&&!I.asyncResolved){ye(I,v,T);return}else I.next=v,FE(I.update),I.update();else v.el=m.el,I.vnode=v},Te=(m,v,T,I,$,U,G)=>{const F=()=>{if(m.isMounted){let{next:ne,bu:J,u:se,parent:ue,vnode:Ee}=m,Be=ne,Le;Qn(m,!1),ne?(ne.el=Ee.el,ye(m,ne,G)):ne=Ee,J&&el(J),(Le=ne.props&&ne.props.onVnodeBeforeUpdate)&&ks(Le,ue,ne,Ee),Qn(m,!0);const st=hu(m),hs=m.subTree;m.subTree=st,_(hs,st,d(hs.el),H(hs),m,$,U),ne.el=st.el,Be===null&&WE(m,st.el),se&&zt(se,$),(Le=ne.props&&ne.props.onVnodeUpdated)&&zt(()=>ks(Le,ue,ne,Ee),$)}else{let ne;const{el:J,props:se}=v,{bm:ue,m:Ee,parent:Be}=m,Le=co(v);if(Qn(m,!1),ue&&el(ue),!Le&&(ne=se&&se.onVnodeBeforeMount)&&ks(ne,Be,v),Qn(m,!0),J&&ae){const st=()=>{m.subTree=hu(m),ae(J,m.subTree,m,$,null)};Le?v.type.__asyncLoader().then(()=>!m.isUnmounted&&st()):st()}else{const st=m.subTree=hu(m);_(null,st,T,I,m,$,U),v.el=st.el}if(Ee&&zt(Ee,$),!Le&&(ne=se&&se.onVnodeMounted)){const st=v;zt(()=>ks(ne,Be,st),$)}(v.shapeFlag&256||Be&&co(Be.vnode)&&Be.vnode.shapeFlag&256)&&m.a&&zt(m.a,$),m.isMounted=!0,v=T=I=null}},B=m.effect=new od(F,()=>fd(O),m.scope),O=m.update=()=>B.run();O.id=m.uid,Qn(m,!0),O()},ye=(m,v,T)=>{v.component=m;const I=m.vnode.props;m.vnode=v,m.next=null,y1(m,v.props,I,T),b1(m,v.children,T),Mr(),pp(),Rr()},be=(m,v,T,I,$,U,G,F,B=!1)=>{const O=m&&m.children,ne=m?m.shapeFlag:0,J=v.children,{patchFlag:se,shapeFlag:ue}=v;if(se>0){if(se&128){Ht(O,J,T,I,$,U,G,F,B);return}else if(se&256){tt(O,J,T,I,$,U,G,F,B);return}}ue&8?(ne&16&&K(O,$,U),J!==O&&c(T,J)):ne&16?ue&16?Ht(O,J,T,I,$,U,G,F,B):K(O,$,U,!0):(ne&8&&c(T,""),ue&16&&q(J,T,I,$,U,G,F,B))},tt=(m,v,T,I,$,U,G,F,B)=>{m=m||Ji,v=v||Ji;const O=m.length,ne=v.length,J=Math.min(O,ne);let se;for(se=0;se<J;se++){const ue=v[se]=B?_n(v[se]):Ss(v[se]);_(m[se],ue,T,null,$,U,G,F,B)}O>ne?K(m,$,U,!0,!1,J):q(v,T,I,$,U,G,F,B,J)},Ht=(m,v,T,I,$,U,G,F,B)=>{let O=0;const ne=v.length;let J=m.length-1,se=ne-1;for(;O<=J&&O<=se;){const ue=m[O],Ee=v[O]=B?_n(v[O]):Ss(v[O]);if(Yr(ue,Ee))_(ue,Ee,T,null,$,U,G,F,B);else break;O++}for(;O<=J&&O<=se;){const ue=m[J],Ee=v[se]=B?_n(v[se]):Ss(v[se]);if(Yr(ue,Ee))_(ue,Ee,T,null,$,U,G,F,B);else break;J--,se--}if(O>J){if(O<=se){const ue=se+1,Ee=ue<ne?v[ue].el:I;for(;O<=se;)_(null,v[O]=B?_n(v[O]):Ss(v[O]),T,Ee,$,U,G,F,B),O++}}else if(O>se)for(;O<=J;)Ze(m[O],$,U,!0),O++;else{const ue=O,Ee=O,Be=new Map;for(O=Ee;O<=se;O++){const Yt=v[O]=B?_n(v[O]):Ss(v[O]);Yt.key!=null&&Be.set(Yt.key,O)}let Le,st=0;const hs=se-Ee+1;let Ri=!1,sp=0;const Qr=new Array(hs);for(O=0;O<hs;O++)Qr[O]=0;for(O=ue;O<=J;O++){const Yt=m[O];if(st>=hs){Ze(Yt,$,U,!0);continue}let Ts;if(Yt.key!=null)Ts=Be.get(Yt.key);else for(Le=Ee;Le<=se;Le++)if(Qr[Le-Ee]===0&&Yr(Yt,v[Le])){Ts=Le;break}Ts===void 0?Ze(Yt,$,U,!0):(Qr[Ts-Ee]=O+1,Ts>=sp?sp=Ts:Ri=!0,_(Yt,v[Ts],T,null,$,U,G,F,B),st++)}const np=Ri?A1(Qr):Ji;for(Le=np.length-1,O=hs-1;O>=0;O--){const Yt=Ee+O,Ts=v[Yt],ip=Yt+1<ne?v[Yt+1].el:I;Qr[O]===0?_(null,Ts,T,ip,$,U,G,F,B):Ri&&(Le<0||O!==np[Le]?bt(Ts,T,ip,2):Le--)}}},bt=(m,v,T,I,$=null)=>{const{el:U,type:G,transition:F,children:B,shapeFlag:O}=m;if(O&6){bt(m.component.subTree,v,T,I);return}if(O&128){m.suspense.move(v,T,I);return}if(O&64){G.move(m,v,T,X);return}if(G===te){n(U,v,T);for(let J=0;J<B.length;J++)bt(B[J],v,T,I);n(m.anchor,v,T);return}if(G===ho){M(m,v,T);return}if(I!==2&&O&1&&F)if(I===0)F.beforeEnter(U),n(U,v,T),zt(()=>F.enter(U),$);else{const{leave:J,delayLeave:se,afterLeave:ue}=F,Ee=()=>n(U,v,T),Be=()=>{J(U,()=>{Ee(),ue&&ue()})};se?se(U,Ee,Be):Be()}else n(U,v,T)},Ze=(m,v,T,I=!1,$=!1)=>{const{type:U,props:G,ref:F,children:B,dynamicChildren:O,shapeFlag:ne,patchFlag:J,dirs:se}=m;if(F!=null&&oh(F,null,T,m,!0),ne&256){v.ctx.deactivate(m);return}const ue=ne&1&&se,Ee=!co(m);let Be;if(Ee&&(Be=G&&G.onVnodeBeforeUnmount)&&ks(Be,v,m),ne&6)S(m.component,T,I);else{if(ne&128){m.suspense.unmount(T,I);return}ue&&Gn(m,null,v,"beforeUnmount"),ne&64?m.type.remove(m,v,T,$,X,I):O&&(U!==te||J>0&&J&64)?K(O,v,T,!1,!0):(U===te&&J&384||!$&&ne&16)&&K(B,v,T),I&&Lt(m)}(Ee&&(Be=G&&G.onVnodeUnmounted)||ue)&&zt(()=>{Be&&ks(Be,v,m),ue&&Gn(m,null,v,"unmounted")},T)},Lt=m=>{const{type:v,el:T,anchor:I,transition:$}=m;if(v===te){Qt(T,I);return}if(v===ho){R(m);return}const U=()=>{i(T),$&&!$.persisted&&$.afterLeave&&$.afterLeave()};if(m.shapeFlag&1&&$&&!$.persisted){const{leave:G,delayLeave:F}=$,B=()=>G(T,U);F?F(m.el,U,B):B()}else U()},Qt=(m,v)=>{let T;for(;m!==v;)T=f(m),i(m),m=T;i(v)},S=(m,v,T)=>{const{bum:I,scope:$,update:U,subTree:G,um:F}=m;I&&el(I),$.stop(),U&&(U.active=!1,Ze(G,m,v,T)),F&&zt(F,v),zt(()=>{m.isUnmounted=!0},v),v&&v.pendingBranch&&!v.isUnmounted&&m.asyncDep&&!m.asyncResolved&&m.suspenseId===v.pendingId&&(v.deps--,v.deps===0&&v.resolve())},K=(m,v,T,I=!1,$=!1,U=0)=>{for(let G=U;G<m.length;G++)Ze(m[G],v,T,I,$)},H=m=>m.shapeFlag&6?H(m.component.subTree):m.shapeFlag&128?m.suspense.next():f(m.anchor||m.el),L=(m,v,T)=>{m==null?v._vnode&&Ze(v._vnode,null,null,!0):_(v._vnode||null,m,v,null,null,null,T),pp(),My(),v._vnode=m},X={p:_,um:Ze,m:bt,r:Lt,mt:dt,mc:q,pc:be,pbc:de,n:H,o:t};let Re,ae;return e&&([Re,ae]=e(X)),{render:L,hydrate:Re,createApp:E1(L,Re)}}function Qn({effect:t,update:e},s){t.allowRecurse=e.allowRecurse=s}function Qy(t,e,s=!1){const n=t.children,i=e.children;if(le(n)&&le(i))for(let r=0;r<n.length;r++){const o=n[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=_n(i[r]),a.el=o.el),s||Qy(o,a)),a.type===uc&&(a.el=o.el)}}function A1(t){const e=t.slice(),s=[0];let n,i,r,o,a;const l=t.length;for(n=0;n<l;n++){const u=t[n];if(u!==0){if(i=s[s.length-1],t[i]<u){e[n]=i,s.push(n);continue}for(r=0,o=s.length-1;r<o;)a=r+o>>1,t[s[a]]<u?r=a+1:o=a;u<t[s[r]]&&(r>0&&(e[n]=s[r-1]),s[r]=n)}}for(r=s.length,o=s[r-1];r-- >0;)s[r]=o,o=e[o];return s}const S1=t=>t.__isTeleport,te=Symbol(void 0),uc=Symbol(void 0),Nn=Symbol(void 0),ho=Symbol(void 0),fo=[];let ps=null;function g(t=!1){fo.push(ps=t?null:[])}function I1(){fo.pop(),ps=fo[fo.length-1]||null}let Co=1;function kp(t){Co+=t}function Yy(t){return t.dynamicChildren=Co>0?ps||Ji:null,I1(),Co>0&&ps&&ps.push(t),t}function y(t,e,s,n,i,r){return Yy(h(t,e,s,n,i,r,!0))}function wn(t,e,s,n,i){return Yy(j(t,e,s,n,i,!0))}function El(t){return t?t.__v_isVNode===!0:!1}function Yr(t,e){return t.type===e.type&&t.key===e.key}const hc="__vInternal",Xy=({key:t})=>t??null,nl=({ref:t,ref_key:e,ref_for:s})=>t!=null?ut(t)||Et(t)||_e(t)?{i:Tt,r:t,k:e,f:!!s}:t:null;function h(t,e=null,s=null,n=0,i=null,r=t===te?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Xy(e),ref:e&&nl(e),scopeId:lc,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Tt};return a?(_d(l,s),r&128&&t.normalize(l)):s&&(l.shapeFlag|=ut(s)?8:16),Co>0&&!o&&ps&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&ps.push(l),l}const j=C1;function C1(t,e=null,s=null,n=0,i=null,r=!1){if((!t||t===l1)&&(t=Nn),El(t)){const a=cr(t,e,!0);return s&&_d(a,s),Co>0&&!r&&ps&&(a.shapeFlag&6?ps[ps.indexOf(t)]=a:ps.push(a)),a.patchFlag|=-2,a}if(x1(t)&&(t=t.__vccOpts),e){e=D1(e);let{class:a,style:l}=e;a&&!ut(a)&&(e.class=We(a)),Ge(l)&&(ky(l)&&!le(l)&&(l=jt({},l)),e.style=Ae(l))}const o=ut(t)?1:KE(t)?128:S1(t)?64:Ge(t)?4:_e(t)?2:0;return h(t,e,s,n,i,o,r,!0)}function D1(t){return t?ky(t)||hc in t?jt({},t):t:null}function cr(t,e,s=!1){const{props:n,ref:i,patchFlag:r,children:o}=t,a=e?Rs(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&Xy(a),ref:e&&e.ref?s&&i?le(i)?i.concat(nl(e)):[i,nl(e)]:nl(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==te?r===-1?16:r|16:r,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cr(t.ssContent),ssFallback:t.ssFallback&&cr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx}}function k(t=" ",e=0){return j(uc,null,t,e)}function i8(t,e){const s=j(ho,null,t);return s.staticCount=e,s}function V(t="",e=!1){return e?(g(),wn(Nn,null,t)):j(Nn,null,t)}function Ss(t){return t==null||typeof t=="boolean"?j(Nn):le(t)?j(te,null,t.slice()):typeof t=="object"?_n(t):j(uc,null,String(t))}function _n(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cr(t)}function _d(t,e){let s=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(le(e))s=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),_d(t,i()),i._c&&(i._d=!0));return}else{s=32;const i=e._;!i&&!(hc in e)?e._ctx=Tt:i===3&&Tt&&(Tt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else _e(e)?(e={default:e,_ctx:Tt},s=32):(e=String(e),n&64?(s=16,e=[k(e)]):s=8);t.children=e,t.shapeFlag|=s}function Rs(...t){const e={};for(let s=0;s<t.length;s++){const n=t[s];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=We([e.class,n.class]));else if(i==="style")e.style=Ae([e.style,n.style]);else if(tc(i)){const r=e[i],o=n[i];o&&r!==o&&!(le(r)&&r.includes(o))&&(e[i]=r?[].concat(r,o):o)}else i!==""&&(e[i]=n[i])}return e}function ks(t,e,s,n=null){gs(t,e,7,[s,n])}const $1=Gy();let O1=0;function N1(t,e,s){const n=t.type,i=(e?e.appContext:t.appContext)||$1,r={uid:O1++,vnode:t,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new sE(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:zy(n,i),emitsOptions:Ly(n,i),emit:null,emitted:null,propsDefaults:Qe,inheritAttrs:n.inheritAttrs,ctx:Qe,data:Qe,props:Qe,attrs:Qe,slots:Qe,refs:Qe,setupState:Qe,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=jE.bind(null,r),t.ce&&t.ce(r),r}let gt=null;const Jy=()=>gt||Tt,ur=t=>{gt=t,t.scope.on()},ci=()=>{gt&&gt.scope.off(),gt=null};function Zy(t){return t.vnode.shapeFlag&4}let Do=!1;function P1(t,e=!1){Do=e;const{props:s,children:n}=t.vnode,i=Zy(t);g1(t,s,i,e),_1(t,n);const r=i?M1(t,e):void 0;return Do=!1,r}function M1(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=Ay(new Proxy(t.ctx,u1));const{setup:n}=s;if(n){const i=t.setupContext=n.length>1?tv(t):null;ur(t),Mr();const r=In(n,t,0,[t.props,i]);if(Rr(),ci(),cy(r)){if(r.then(ci,ci),e)return r.then(o=>{Ap(t,o,e)}).catch(o=>{oc(o,t,0)});t.asyncDep=r}else Ap(t,r,e)}else ev(t,e)}function Ap(t,e,s){_e(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ge(e)&&(t.setupState=Dy(e)),ev(t,s)}let Sp;function ev(t,e,s){const n=t.type;if(!t.render){if(!e&&Sp&&!n.render){const i=n.template||yd(t).template;if(i){const{isCustomElement:r,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=n,u=jt(jt({isCustomElement:r,delimiters:a},o),l);n.render=Sp(i,u)}}t.render=n.render||ms}ur(t),Mr(),h1(t),Rr(),ci()}function R1(t){return new Proxy(t.attrs,{get(e,s){return Jt(t,"get","$attrs"),e[s]}})}function tv(t){const e=n=>{t.exposed=n||{}};let s;return{get attrs(){return s||(s=R1(t))},slots:t.slots,emit:t.emit,expose:e}}function dc(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Dy(Ay(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in uo)return uo[s](t)},has(e,s){return s in e||s in uo}}))}function L1(t,e=!0){return _e(t)?t.displayName||t.name:t.name||e&&t.__name}function x1(t){return _e(t)&&"__vccOpts"in t}const ke=(t,e)=>LE(t,e,Do);function Go(){return sv().slots}function V1(){return sv().attrs}function sv(){const t=Jy();return t.setupContext||(t.setupContext=tv(t))}function nv(t,e,s){const n=arguments.length;return n===2?Ge(e)&&!le(e)?El(e)?j(t,null,[e]):j(t,e):j(t,null,e):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&El(s)&&(s=[s]),j(t,e,s))}const F1=Symbol(""),U1=()=>Qs(F1),B1="3.2.45",j1="http://www.w3.org/2000/svg",Zn=typeof document<"u"?document:null,Ip=Zn&&Zn.createElement("template"),H1={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,n)=>{const i=e?Zn.createElementNS(j1,t):Zn.createElement(t,s?{is:s}:void 0);return t==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:t=>Zn.createTextNode(t),createComment:t=>Zn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Zn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,n,i,r){const o=s?s.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),s),!(i===r||!(i=i.nextSibling)););else{Ip.innerHTML=n?`<svg>${t}</svg>`:t;const a=Ip.content;if(n){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,s)}return[o?o.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}};function z1(t,e,s){const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}function q1(t,e,s){const n=t.style,i=ut(s);if(s&&!i){for(const r in s)ah(n,r,s[r]);if(e&&!ut(e))for(const r in e)s[r]==null&&ah(n,r,"")}else{const r=n.display;i?e!==s&&(n.cssText=s):e&&t.removeAttribute("style"),"_vod"in t&&(n.display=r)}}const Cp=/\s*!important$/;function ah(t,e,s){if(le(s))s.forEach(n=>ah(t,e,n));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const n=W1(t,e);Cp.test(s)?t.setProperty(Pr(n),s.replace(Cp,""),"important"):t[n]=s}}const Dp=["Webkit","Moz","ms"],fu={};function W1(t,e){const s=fu[e];if(s)return s;let n=Ms(e);if(n!=="filter"&&n in t)return fu[e]=n;n=ic(n);for(let i=0;i<Dp.length;i++){const r=Dp[i]+n;if(r in t)return fu[e]=r}return e}const $p="http://www.w3.org/1999/xlink";function K1(t,e,s,n,i){if(n&&e.startsWith("xlink:"))s==null?t.removeAttributeNS($p,e.slice(6,e.length)):t.setAttributeNS($p,e,s);else{const r=Kw(e);s==null||r&&!oy(s)?t.removeAttribute(e):t.setAttribute(e,r?"":s)}}function G1(t,e,s,n,i,r,o){if(e==="innerHTML"||e==="textContent"){n&&o(n,i,r),t[e]=s??"";return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=s;const l=s??"";(t.value!==l||t.tagName==="OPTION")&&(t.value=l),s==null&&t.removeAttribute(e);return}let a=!1;if(s===""||s==null){const l=typeof t[e];l==="boolean"?s=oy(s):s==null&&l==="string"?(s="",a=!0):l==="number"&&(s=0,a=!0)}try{t[e]=s}catch{}a&&t.removeAttribute(e)}function iv(t,e,s,n){t.addEventListener(e,s,n)}function Q1(t,e,s,n){t.removeEventListener(e,s,n)}function Y1(t,e,s,n,i=null){const r=t._vei||(t._vei={}),o=r[e];if(n&&o)o.value=n;else{const[a,l]=X1(e);if(n){const u=r[e]=eT(n,i);iv(t,a,u,l)}else o&&(Q1(t,a,o,l),r[e]=void 0)}}const Op=/(?:Once|Passive|Capture)$/;function X1(t){let e;if(Op.test(t)){e={};let n;for(;n=t.match(Op);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Pr(t.slice(2)),e]}let pu=0;const J1=Promise.resolve(),Z1=()=>pu||(J1.then(()=>pu=0),pu=Date.now());function eT(t,e){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;gs(tT(n,s.value),e,5,[n])};return s.value=t,s.attached=Z1(),s}function tT(t,e){if(le(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const Np=/^on[a-z]/,sT=(t,e,s,n,i=!1,r,o,a,l)=>{e==="class"?z1(t,n,i):e==="style"?q1(t,s,n):tc(e)?sd(e)||Y1(t,e,s,n,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):nT(t,e,n,i))?G1(t,e,n,r,o,a,l):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),K1(t,e,n,i))};function nT(t,e,s,n){return n?!!(e==="innerHTML"||e==="textContent"||e in t&&Np.test(e)&&_e(s)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||Np.test(e)&&ut(s)?!1:e in t}function Fn(t){const e=Jy();if(!e)return;const s=e.ut=(i=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(r=>ch(r,i))},n=()=>{const i=t(e.proxy);lh(e.subTree,i),s(i)};QE(n),md(()=>{const i=new MutationObserver(n);i.observe(e.subTree.el.parentNode,{childList:!0}),gd(()=>i.disconnect())})}function lh(t,e){if(t.shapeFlag&128){const s=t.suspense;t=s.activeBranch,s.pendingBranch&&!s.isHydrating&&s.effects.push(()=>{lh(s.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)ch(t.el,e);else if(t.type===te)t.children.forEach(s=>lh(s,e));else if(t.type===ho){let{el:s,anchor:n}=t;for(;s&&(ch(s,e),s!==n);)s=s.nextSibling}}function ch(t,e){if(t.nodeType===1){const s=t.style;for(const n in e)s.setProperty(`--${n}`,e[n])}}const Pp=t=>{const e=t.props["onUpdate:modelValue"]||!1;return le(e)?s=>el(e,s):e},Mp={deep:!0,created(t,e,s){t._assign=Pp(s),iv(t,"change",()=>{const n=t._modelValue,i=iT(t),r=t.checked,o=t._assign;if(le(n)){const a=ay(n,i),l=a!==-1;if(r&&!l)o(n.concat(i));else if(!r&&l){const u=[...n];u.splice(a,1),o(u)}}else if(sc(n)){const a=new Set(n);r?a.add(i):a.delete(i),o(a)}else o(rv(t,r))})},mounted:Rp,beforeUpdate(t,e,s){t._assign=Pp(s),Rp(t,e,s)}};function Rp(t,{value:e,oldValue:s},n){t._modelValue=e,le(e)?t.checked=ay(e,n.props.value)>-1:sc(e)?t.checked=e.has(n.props.value):e!==s&&(t.checked=ec(e,rv(t,!0)))}function iT(t){return"_value"in t?t._value:t.value}function rv(t,e){const s=e?"_trueValue":"_falseValue";return s in t?t[s]:e}const rT=["ctrl","shift","alt","meta"],oT={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>rT.some(s=>t[`${s}Key`]&&!e.includes(s))},ns=(t,e)=>(s,...n)=>{for(let i=0;i<e.length;i++){const r=oT[e[i]];if(r&&r(s,e))return}return t(s,...n)},aT=jt({patchProp:sT},H1);let Lp;function lT(){return Lp||(Lp=T1(aT))}const cT=(...t)=>{const e=lT().createApp(...t),{mount:s}=e;return e.mount=n=>{const i=uT(n);if(!i)return;const r=e._component;!_e(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.innerHTML="";const o=s(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function uT(t){return ut(t)?document.querySelector(t):t}const hT="modulepreload",dT=function(t,e){return new URL(t,e).href},xp={},fT=function(e,s,n){if(!s||s.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(s.map(r=>{if(r=dT(r,n),r in xp)return;xp[r]=!0;const o=r.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let c=i.length-1;c>=0;c--){const d=i[c];if(d.href===r&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":hT,o||(u.as="script",u.crossOrigin=""),u.href=r,document.head.appendChild(u),o)return new Promise((c,d)=>{u.addEventListener("load",c),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e())};/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Ui=typeof window<"u";function pT(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const je=Object.assign;function mu(t,e){const s={};for(const n in e){const i=e[n];s[n]=ys(i)?i.map(t):t(i)}return s}const po=()=>{},ys=Array.isArray,mT=/\/$/,gT=t=>t.replace(mT,"");function gu(t,e,s="/"){let n,i={},r="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(n=e.slice(0,l),r=e.slice(l+1,a>-1?a:e.length),i=t(r)),a>-1&&(n=n||e.slice(0,a),o=e.slice(a,e.length)),n=bT(n??e,s),{fullPath:n+(r&&"?")+r+o,path:n,query:i,hash:o}}function yT(t,e){const s=e.query?t(e.query):"";return e.path+(s&&"?")+s+(e.hash||"")}function Vp(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function vT(t,e,s){const n=e.matched.length-1,i=s.matched.length-1;return n>-1&&n===i&&hr(e.matched[n],s.matched[i])&&ov(e.params,s.params)&&t(e.query)===t(s.query)&&e.hash===s.hash}function hr(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function ov(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(!_T(t[s],e[s]))return!1;return!0}function _T(t,e){return ys(t)?Fp(t,e):ys(e)?Fp(e,t):t===e}function Fp(t,e){return ys(e)?t.length===e.length&&t.every((s,n)=>s===e[n]):t.length===1&&t[0]===e}function bT(t,e){if(t.startsWith("/"))return t;if(!t)return e;const s=e.split("/"),n=t.split("/");let i=s.length-1,r,o;for(r=0;r<n.length;r++)if(o=n[r],o!==".")if(o==="..")i>1&&i--;else break;return s.slice(0,i).join("/")+"/"+n.slice(r-(r===n.length?1:0)).join("/")}var $o;(function(t){t.pop="pop",t.push="push"})($o||($o={}));var mo;(function(t){t.back="back",t.forward="forward",t.unknown=""})(mo||(mo={}));function wT(t){if(!t)if(Ui){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),gT(t)}const ET=/^[^#]+#/;function TT(t,e){return t.replace(ET,"#")+e}function kT(t,e){const s=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-s.left-(e.left||0),top:n.top-s.top-(e.top||0)}}const fc=()=>({left:window.pageXOffset,top:window.pageYOffset});function AT(t){let e;if("el"in t){const s=t.el,n=typeof s=="string"&&s.startsWith("#"),i=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!i)return;e=kT(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function Up(t,e){return(history.state?history.state.position-e:-1)+t}const uh=new Map;function ST(t,e){uh.set(t,e)}function IT(t){const e=uh.get(t);return uh.delete(t),e}let CT=()=>location.protocol+"//"+location.host;function av(t,e){const{pathname:s,search:n,hash:i}=e,r=t.indexOf("#");if(r>-1){let a=i.includes(t.slice(r))?t.slice(r).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),Vp(l,"")}return Vp(s,t)+n+i}function DT(t,e,s,n){let i=[],r=[],o=null;const a=({state:f})=>{const p=av(t,location),b=s.value,_=e.value;let A=0;if(f){if(s.value=p,e.value=f,o&&o===b){o=null;return}A=_?f.position-_.position:0}else n(p);i.forEach(C=>{C(s.value,b,{delta:A,type:$o.pop,direction:A?A>0?mo.forward:mo.back:mo.unknown})})};function l(){o=s.value}function u(f){i.push(f);const p=()=>{const b=i.indexOf(f);b>-1&&i.splice(b,1)};return r.push(p),p}function c(){const{history:f}=window;f.state&&f.replaceState(je({},f.state,{scroll:fc()}),"")}function d(){for(const f of r)f();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c),{pauseListeners:l,listen:u,destroy:d}}function Bp(t,e,s,n=!1,i=!1){return{back:t,current:e,forward:s,replaced:n,position:window.history.length,scroll:i?fc():null}}function $T(t){const{history:e,location:s}=window,n={value:av(t,s)},i={value:e.state};i.value||r(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(l,u,c){const d=t.indexOf("#"),f=d>-1?(s.host&&document.querySelector("base")?t:t.slice(d))+l:CT()+t+l;try{e[c?"replaceState":"pushState"](u,"",f),i.value=u}catch(p){console.error(p),s[c?"replace":"assign"](f)}}function o(l,u){const c=je({},e.state,Bp(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});r(l,c,!0),n.value=l}function a(l,u){const c=je({},i.value,e.state,{forward:l,scroll:fc()});r(c.current,c,!0);const d=je({},Bp(n.value,l,null),{position:c.position+1},u);r(l,d,!1),n.value=l}return{location:n,state:i,push:a,replace:o}}function OT(t){t=wT(t);const e=$T(t),s=DT(t,e.state,e.location,e.replace);function n(r,o=!0){o||s.pauseListeners(),history.go(r)}const i=je({location:"",base:t,go:n,createHref:TT.bind(null,t)},e,s);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function NT(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),OT(t)}function PT(t){return typeof t=="string"||t&&typeof t=="object"}function lv(t){return typeof t=="string"||typeof t=="symbol"}const gn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},cv=Symbol("");var jp;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(jp||(jp={}));function dr(t,e){return je(new Error,{type:t,[cv]:!0},e)}function Bs(t,e){return t instanceof Error&&cv in t&&(e==null||!!(t.type&e))}const Hp="[^/]+?",MT={sensitive:!1,strict:!1,start:!0,end:!0},RT=/[.+*?^${}()[\]/\\]/g;function LT(t,e){const s=je({},MT,e),n=[];let i=s.start?"^":"";const r=[];for(const u of t){const c=u.length?[]:[90];s.strict&&!u.length&&(i+="/");for(let d=0;d<u.length;d++){const f=u[d];let p=40+(s.sensitive?.25:0);if(f.type===0)d||(i+="/"),i+=f.value.replace(RT,"\\$&"),p+=40;else if(f.type===1){const{value:b,repeatable:_,optional:A,regexp:C}=f;r.push({name:b,repeatable:_,optional:A});const P=C||Hp;if(P!==Hp){p+=10;try{new RegExp(`(${P})`)}catch(R){throw new Error(`Invalid custom RegExp for param "${b}" (${P}): `+R.message)}}let M=_?`((?:${P})(?:/(?:${P}))*)`:`(${P})`;d||(M=A&&u.length<2?`(?:/${M})`:"/"+M),A&&(M+="?"),i+=M,p+=20,A&&(p+=-8),_&&(p+=-20),P===".*"&&(p+=-50)}c.push(p)}n.push(c)}if(s.strict&&s.end){const u=n.length-1;n[u][n[u].length-1]+=.7000000000000001}s.strict||(i+="/?"),s.end?i+="$":s.strict&&(i+="(?:/|$)");const o=new RegExp(i,s.sensitive?"":"i");function a(u){const c=u.match(o),d={};if(!c)return null;for(let f=1;f<c.length;f++){const p=c[f]||"",b=r[f-1];d[b.name]=p&&b.repeatable?p.split("/"):p}return d}function l(u){let c="",d=!1;for(const f of t){(!d||!c.endsWith("/"))&&(c+="/"),d=!1;for(const p of f)if(p.type===0)c+=p.value;else if(p.type===1){const{value:b,repeatable:_,optional:A}=p,C=b in u?u[b]:"";if(ys(C)&&!_)throw new Error(`Provided param "${b}" is an array but it is not repeatable (* or + modifiers)`);const P=ys(C)?C.join("/"):C;if(!P)if(A)f.length<2&&(c.endsWith("/")?c=c.slice(0,-1):d=!0);else throw new Error(`Missing required param "${b}"`);c+=P}}return c||"/"}return{re:o,score:n,keys:r,parse:a,stringify:l}}function xT(t,e){let s=0;for(;s<t.length&&s<e.length;){const n=e[s]-t[s];if(n)return n;s++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function VT(t,e){let s=0;const n=t.score,i=e.score;for(;s<n.length&&s<i.length;){const r=xT(n[s],i[s]);if(r)return r;s++}if(Math.abs(i.length-n.length)===1){if(zp(n))return 1;if(zp(i))return-1}return i.length-n.length}function zp(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const FT={type:0,value:""},UT=/[a-zA-Z0-9_]/;function BT(t){if(!t)return[[]];if(t==="/")return[[FT]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${s})/"${u}": ${p}`)}let s=0,n=s;const i=[];let r;function o(){r&&i.push(r),r=[]}let a=0,l,u="",c="";function d(){u&&(s===0?r.push({type:0,value:u}):s===1||s===2||s===3?(r.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function f(){u+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&s!==2){n=s,s=4;continue}switch(s){case 0:l==="/"?(u&&d(),o()):l===":"?(d(),s=1):f();break;case 4:f(),s=n;break;case 1:l==="("?s=2:UT.test(l)?f():(d(),s=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:s=3:c+=l;break;case 3:d(),s=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:e("Unknown state");break}}return s===2&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),i}function jT(t,e,s){const n=LT(BT(t.path),s),i=je(n,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function HT(t,e){const s=[],n=new Map;e=Kp({strict:!1,end:!0,sensitive:!1},e);function i(c){return n.get(c)}function r(c,d,f){const p=!f,b=zT(c);b.aliasOf=f&&f.record;const _=Kp(e,c),A=[b];if("alias"in c){const M=typeof c.alias=="string"?[c.alias]:c.alias;for(const R of M)A.push(je({},b,{components:f?f.record.components:b.components,path:R,aliasOf:f?f.record:b}))}let C,P;for(const M of A){const{path:R}=M;if(d&&R[0]!=="/"){const z=d.record.path,W=z[z.length-1]==="/"?"":"/";M.path=d.record.path+(R&&W+R)}if(C=jT(M,d,_),f?f.alias.push(C):(P=P||C,P!==C&&P.alias.push(C),p&&c.name&&!Wp(C)&&o(c.name)),b.children){const z=b.children;for(let W=0;W<z.length;W++)r(z[W],C,f&&f.children[W])}f=f||C,(C.record.components&&Object.keys(C.record.components).length||C.record.name||C.record.redirect)&&l(C)}return P?()=>{o(P)}:po}function o(c){if(lv(c)){const d=n.get(c);d&&(n.delete(c),s.splice(s.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=s.indexOf(c);d>-1&&(s.splice(d,1),c.record.name&&n.delete(c.record.name),c.children.forEach(o),c.alias.forEach(o))}}function a(){return s}function l(c){let d=0;for(;d<s.length&&VT(c,s[d])>=0&&(c.record.path!==s[d].record.path||!uv(c,s[d]));)d++;s.splice(d,0,c),c.record.name&&!Wp(c)&&n.set(c.record.name,c)}function u(c,d){let f,p={},b,_;if("name"in c&&c.name){if(f=n.get(c.name),!f)throw dr(1,{location:c});_=f.record.name,p=je(qp(d.params,f.keys.filter(P=>!P.optional).map(P=>P.name)),c.params&&qp(c.params,f.keys.map(P=>P.name))),b=f.stringify(p)}else if("path"in c)b=c.path,f=s.find(P=>P.re.test(b)),f&&(p=f.parse(b),_=f.record.name);else{if(f=d.name?n.get(d.name):s.find(P=>P.re.test(d.path)),!f)throw dr(1,{location:c,currentLocation:d});_=f.record.name,p=je({},d.params,c.params),b=f.stringify(p)}const A=[];let C=f;for(;C;)A.unshift(C.record),C=C.parent;return{name:_,path:b,params:p,matched:A,meta:WT(A)}}return t.forEach(c=>r(c)),{addRoute:r,resolve:u,removeRoute:o,getRoutes:a,getRecordMatcher:i}}function qp(t,e){const s={};for(const n of e)n in t&&(s[n]=t[n]);return s}function zT(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:qT(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function qT(t){const e={},s=t.props||!1;if("component"in t)e.default=s;else for(const n in t.components)e[n]=typeof s=="boolean"?s:s[n];return e}function Wp(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function WT(t){return t.reduce((e,s)=>je(e,s.meta),{})}function Kp(t,e){const s={};for(const n in t)s[n]=n in e?e[n]:t[n];return s}function uv(t,e){return e.children.some(s=>s===t||uv(t,s))}const hv=/#/g,KT=/&/g,GT=/\//g,QT=/=/g,YT=/\?/g,dv=/\+/g,XT=/%5B/g,JT=/%5D/g,fv=/%5E/g,ZT=/%60/g,pv=/%7B/g,ek=/%7C/g,mv=/%7D/g,tk=/%20/g;function bd(t){return encodeURI(""+t).replace(ek,"|").replace(XT,"[").replace(JT,"]")}function sk(t){return bd(t).replace(pv,"{").replace(mv,"}").replace(fv,"^")}function hh(t){return bd(t).replace(dv,"%2B").replace(tk,"+").replace(hv,"%23").replace(KT,"%26").replace(ZT,"`").replace(pv,"{").replace(mv,"}").replace(fv,"^")}function nk(t){return hh(t).replace(QT,"%3D")}function ik(t){return bd(t).replace(hv,"%23").replace(YT,"%3F")}function rk(t){return t==null?"":ik(t).replace(GT,"%2F")}function Tl(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function ok(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<n.length;++i){const r=n[i].replace(dv," "),o=r.indexOf("="),a=Tl(o<0?r:r.slice(0,o)),l=o<0?null:Tl(r.slice(o+1));if(a in e){let u=e[a];ys(u)||(u=e[a]=[u]),u.push(l)}else e[a]=l}return e}function Gp(t){let e="";for(let s in t){const n=t[s];if(s=nk(s),n==null){n!==void 0&&(e+=(e.length?"&":"")+s);continue}(ys(n)?n.map(r=>r&&hh(r)):[n&&hh(n)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+s,r!=null&&(e+="="+r))})}return e}function ak(t){const e={};for(const s in t){const n=t[s];n!==void 0&&(e[s]=ys(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return e}const lk=Symbol(""),Qp=Symbol(""),wd=Symbol(""),gv=Symbol(""),dh=Symbol("");function Xr(){let t=[];function e(n){return t.push(n),()=>{const i=t.indexOf(n);i>-1&&t.splice(i,1)}}function s(){t=[]}return{add:e,list:()=>t,reset:s}}function bn(t,e,s,n,i){const r=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((o,a)=>{const l=d=>{d===!1?a(dr(4,{from:s,to:e})):d instanceof Error?a(d):PT(d)?a(dr(2,{from:e,to:d})):(r&&n.enterCallbacks[i]===r&&typeof d=="function"&&r.push(d),o())},u=t.call(n&&n.instances[i],e,s,l);let c=Promise.resolve(u);t.length<3&&(c=c.then(l)),c.catch(d=>a(d))})}function yu(t,e,s,n){const i=[];for(const r of t)for(const o in r.components){let a=r.components[o];if(!(e!=="beforeRouteEnter"&&!r.instances[o]))if(ck(a)){const u=(a.__vccOpts||a)[e];u&&i.push(bn(u,s,n,r,o))}else{let l=a();i.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${r.path}"`));const c=pT(u)?u.default:u;r.components[o]=c;const f=(c.__vccOpts||c)[e];return f&&bn(f,s,n,r,o)()}))}}return i}function ck(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Yp(t){const e=Qs(wd),s=Qs(gv),n=ke(()=>e.resolve(E(t.to))),i=ke(()=>{const{matched:l}=n.value,{length:u}=l,c=l[u-1],d=s.matched;if(!c||!d.length)return-1;const f=d.findIndex(hr.bind(null,c));if(f>-1)return f;const p=Xp(l[u-2]);return u>1&&Xp(c)===p&&d[d.length-1].path!==p?d.findIndex(hr.bind(null,l[u-2])):f}),r=ke(()=>i.value>-1&&fk(s.params,n.value.params)),o=ke(()=>i.value>-1&&i.value===s.matched.length-1&&ov(s.params,n.value.params));function a(l={}){return dk(l)?e[E(t.replace)?"replace":"push"](E(t.to)).catch(po):Promise.resolve()}return{route:n,href:ke(()=>n.value.href),isActive:r,isExactActive:o,navigate:a}}const uk=Oe({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Yp,setup(t,{slots:e}){const s=Ko(Yp(t)),{options:n}=Qs(wd),i=ke(()=>({[Jp(t.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[Jp(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const r=e.default&&e.default(s);return t.custom?r:nv("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:i.value},r)}}}),hk=uk;function dk(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function fk(t,e){for(const s in e){const n=e[s],i=t[s];if(typeof n=="string"){if(n!==i)return!1}else if(!ys(i)||i.length!==n.length||n.some((r,o)=>r!==i[o]))return!1}return!0}function Xp(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Jp=(t,e,s)=>t??e??s,pk=Oe({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:s}){const n=Qs(dh),i=ke(()=>t.route||n.value),r=Qs(Qp,0),o=ke(()=>{let u=E(r);const{matched:c}=i.value;let d;for(;(d=c[u])&&!d.components;)u++;return u}),a=ke(()=>i.value.matched[o.value]);tl(Qp,ke(()=>o.value+1)),tl(lk,a),tl(dh,i);const l=qe();return sl(()=>[l.value,a.value,t.name],([u,c,d],[f,p,b])=>{c&&(c.instances[d]=u,p&&p!==c&&u&&u===f&&(c.leaveGuards.size||(c.leaveGuards=p.leaveGuards),c.updateGuards.size||(c.updateGuards=p.updateGuards))),u&&c&&(!p||!hr(c,p)||!f)&&(c.enterCallbacks[d]||[]).forEach(_=>_(u))},{flush:"post"}),()=>{const u=i.value,c=t.name,d=a.value,f=d&&d.components[c];if(!f)return Zp(s.default,{Component:f,route:u});const p=d.props[c],b=p?p===!0?u.params:typeof p=="function"?p(u):p:null,A=nv(f,je({},b,e,{onVnodeUnmounted:C=>{C.component.isUnmounted&&(d.instances[c]=null)},ref:l}));return Zp(s.default,{Component:A,route:u})||A}}});function Zp(t,e){if(!t)return null;const s=t(e);return s.length===1?s[0]:s}const mk=pk;function gk(t){const e=HT(t.routes,t),s=t.parseQuery||ok,n=t.stringifyQuery||Gp,i=t.history,r=Xr(),o=Xr(),a=Xr(),l=$E(gn);let u=gn;Ui&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=mu.bind(null,S=>""+S),d=mu.bind(null,rk),f=mu.bind(null,Tl);function p(S,K){let H,L;return lv(S)?(H=e.getRecordMatcher(S),L=K):L=S,e.addRoute(L,H)}function b(S){const K=e.getRecordMatcher(S);K&&e.removeRoute(K)}function _(){return e.getRoutes().map(S=>S.record)}function A(S){return!!e.getRecordMatcher(S)}function C(S,K){if(K=je({},K||l.value),typeof S=="string"){const m=gu(s,S,K.path),v=e.resolve({path:m.path},K),T=i.createHref(m.fullPath);return je(m,v,{params:f(v.params),hash:Tl(m.hash),redirectedFrom:void 0,href:T})}let H;if("path"in S)H=je({},S,{path:gu(s,S.path,K.path).path});else{const m=je({},S.params);for(const v in m)m[v]==null&&delete m[v];H=je({},S,{params:d(S.params)}),K.params=d(K.params)}const L=e.resolve(H,K),X=S.hash||"";L.params=c(f(L.params));const Re=yT(n,je({},S,{hash:sk(X),path:L.path})),ae=i.createHref(Re);return je({fullPath:Re,hash:X,query:n===Gp?ak(S.query):S.query||{}},L,{redirectedFrom:void 0,href:ae})}function P(S){return typeof S=="string"?gu(s,S,l.value.path):je({},S)}function M(S,K){if(u!==S)return dr(8,{from:K,to:S})}function R(S){return ce(S)}function z(S){return R(je(P(S),{replace:!0}))}function W(S){const K=S.matched[S.matched.length-1];if(K&&K.redirect){const{redirect:H}=K;let L=typeof H=="function"?H(S):H;return typeof L=="string"&&(L=L.includes("?")||L.includes("#")?L=P(L):{path:L},L.params={}),je({query:S.query,hash:S.hash,params:"path"in L?{}:S.params},L)}}function ce(S,K){const H=u=C(S),L=l.value,X=S.state,Re=S.force,ae=S.replace===!0,m=W(H);if(m)return ce(je(P(m),{state:typeof m=="object"?je({},X,m.state):X,force:Re,replace:ae}),K||H);const v=H;v.redirectedFrom=K;let T;return!Re&&vT(n,L,H)&&(T=dr(16,{to:v,from:L}),Ht(L,L,!0,!1)),(T?Promise.resolve(T):Z(v,L)).catch(I=>Bs(I)?Bs(I,2)?I:tt(I):ye(I,v,L)).then(I=>{if(I){if(Bs(I,2))return ce(je({replace:ae},P(I.to),{state:typeof I.to=="object"?je({},X,I.to.state):X,force:Re}),K||v)}else I=Ie(v,L,!0,ae,X);return de(v,L,I),I})}function q(S,K){const H=M(S,K);return H?Promise.reject(H):Promise.resolve()}function Z(S,K){let H;const[L,X,Re]=yk(S,K);H=yu(L.reverse(),"beforeRouteLeave",S,K);for(const m of L)m.leaveGuards.forEach(v=>{H.push(bn(v,S,K))});const ae=q.bind(null,S,K);return H.push(ae),Li(H).then(()=>{H=[];for(const m of r.list())H.push(bn(m,S,K));return H.push(ae),Li(H)}).then(()=>{H=yu(X,"beforeRouteUpdate",S,K);for(const m of X)m.updateGuards.forEach(v=>{H.push(bn(v,S,K))});return H.push(ae),Li(H)}).then(()=>{H=[];for(const m of S.matched)if(m.beforeEnter&&!K.matched.includes(m))if(ys(m.beforeEnter))for(const v of m.beforeEnter)H.push(bn(v,S,K));else H.push(bn(m.beforeEnter,S,K));return H.push(ae),Li(H)}).then(()=>(S.matched.forEach(m=>m.enterCallbacks={}),H=yu(Re,"beforeRouteEnter",S,K),H.push(ae),Li(H))).then(()=>{H=[];for(const m of o.list())H.push(bn(m,S,K));return H.push(ae),Li(H)}).catch(m=>Bs(m,8)?m:Promise.reject(m))}function de(S,K,H){for(const L of a.list())L(S,K,H)}function Ie(S,K,H,L,X){const Re=M(S,K);if(Re)return Re;const ae=K===gn,m=Ui?history.state:{};H&&(L||ae?i.replace(S.fullPath,je({scroll:ae&&m&&m.scroll},X)):i.push(S.fullPath,X)),l.value=S,Ht(S,K,H,ae),tt()}let Me;function ze(){Me||(Me=i.listen((S,K,H)=>{if(!Qt.listening)return;const L=C(S),X=W(L);if(X){ce(je(X,{replace:!0}),L).catch(po);return}u=L;const Re=l.value;Ui&&ST(Up(Re.fullPath,H.delta),fc()),Z(L,Re).catch(ae=>Bs(ae,12)?ae:Bs(ae,2)?(ce(ae.to,L).then(m=>{Bs(m,20)&&!H.delta&&H.type===$o.pop&&i.go(-1,!1)}).catch(po),Promise.reject()):(H.delta&&i.go(-H.delta,!1),ye(ae,L,Re))).then(ae=>{ae=ae||Ie(L,Re,!1),ae&&(H.delta&&!Bs(ae,8)?i.go(-H.delta,!1):H.type===$o.pop&&Bs(ae,20)&&i.go(-1,!1)),de(L,Re,ae)}).catch(po)}))}let dt=Xr(),ft=Xr(),Te;function ye(S,K,H){tt(S);const L=ft.list();return L.length?L.forEach(X=>X(S,K,H)):console.error(S),Promise.reject(S)}function be(){return Te&&l.value!==gn?Promise.resolve():new Promise((S,K)=>{dt.add([S,K])})}function tt(S){return Te||(Te=!S,ze(),dt.list().forEach(([K,H])=>S?H(S):K()),dt.reset()),S}function Ht(S,K,H,L){const{scrollBehavior:X}=t;if(!Ui||!X)return Promise.resolve();const Re=!H&&IT(Up(S.fullPath,0))||(L||!H)&&history.state&&history.state.scroll||null;return Ny().then(()=>X(S,K,Re)).then(ae=>ae&&AT(ae)).catch(ae=>ye(ae,S,K))}const bt=S=>i.go(S);let Ze;const Lt=new Set,Qt={currentRoute:l,listening:!0,addRoute:p,removeRoute:b,hasRoute:A,getRoutes:_,resolve:C,options:t,push:R,replace:z,go:bt,back:()=>bt(-1),forward:()=>bt(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:ft.add,isReady:be,install(S){const K=this;S.component("RouterLink",hk),S.component("RouterView",mk),S.config.globalProperties.$router=K,Object.defineProperty(S.config.globalProperties,"$route",{enumerable:!0,get:()=>E(l)}),Ui&&!Ze&&l.value===gn&&(Ze=!0,R(i.location).catch(X=>{}));const H={};for(const X in gn)H[X]=ke(()=>l.value[X]);S.provide(wd,K),S.provide(gv,Ko(H)),S.provide(dh,l);const L=S.unmount;Lt.add(S),S.unmount=function(){Lt.delete(S),Lt.size<1&&(u=gn,Me&&Me(),Me=null,l.value=gn,Ze=!1,Te=!1),L()}}};return Qt}function Li(t){return t.reduce((e,s)=>e.then(()=>s()),Promise.resolve())}function yk(t,e){const s=[],n=[],i=[],r=Math.max(e.matched.length,t.matched.length);for(let o=0;o<r;o++){const a=e.matched[o];a&&(t.matched.find(u=>hr(u,a))?n.push(a):s.push(a));const l=t.matched[o];l&&(e.matched.find(u=>hr(u,l))||i.push(l))}return[s,n,i]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=function(t){const e=[];let s=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[s++]=i:i<2048?(e[s++]=i>>6|192,e[s++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[s++]=i>>18|240,e[s++]=i>>12&63|128,e[s++]=i>>6&63|128,e[s++]=i&63|128):(e[s++]=i>>12|224,e[s++]=i>>6&63|128,e[s++]=i&63|128)}return e},vk=function(t){const e=[];let s=0,n=0;for(;s<t.length;){const i=t[s++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const r=t[s++];e[n++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=t[s++],o=t[s++],a=t[s++],l=((i&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const r=t[s++],o=t[s++];e[n++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return e.join("")},vv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const r=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=r>>2,d=(r&3)<<4|a>>4;let f=(a&15)<<2|u>>6,p=u&63;l||(p=64,o||(f=64)),n.push(s[c],s[d],s[f],s[p])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const r=s[t.charAt(i++)],a=i<t.length?s[t.charAt(i)]:0;++i;const u=i<t.length?s[t.charAt(i)]:64;++i;const d=i<t.length?s[t.charAt(i)]:64;if(++i,r==null||a==null||u==null||d==null)throw Error();const f=r<<2|a>>4;if(n.push(f),u!==64){const p=a<<4&240|u>>2;if(n.push(p),d!==64){const b=u<<6&192|d;n.push(b)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},_k=function(t){const e=yv(t);return vv.encodeByteArray(e,!0)},kl=function(t){return _k(t).replace(/\./g,"")},_v=function(t){try{return vv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mt())}function wk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ek(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Tk(){const t=Mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function kk(){try{return typeof indexedDB=="object"}catch{return!1}}function Ak(){return new Promise((t,e)=>{try{let s=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),s||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{s=!1},i.onerror=()=>{var r;e(((r=i.error)===null||r===void 0?void 0:r.message)||"")}}catch(s){e(s)}})}function Sk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=()=>Sk().__FIREBASE_DEFAULTS__,Ck=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Dk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&_v(t[1]);return e&&JSON.parse(e)},Ed=()=>{try{return Ik()||Ck()||Dk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},bv=t=>{var e,s;return(s=(e=Ed())===null||e===void 0?void 0:e.emulatorHosts)===null||s===void 0?void 0:s[t]},$k=t=>{const e=bv(t);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),n]:[e.substring(0,s),n]},Ok=()=>{var t;return(t=Ed())===null||t===void 0?void 0:t.config},wv=t=>{var e;return(e=Ed())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,n)=>{s?this.reject(s):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[kl(JSON.stringify(s)),kl(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk="FirebaseError";class dn extends Error{constructor(e,s,n){super(s),this.code=e,this.customData=n,this.name=Mk,Object.setPrototypeOf(this,dn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qo.prototype.create)}}class Qo{constructor(e,s,n){this.service=e,this.serviceName=s,this.errors=n}create(e,...s){const n=s[0]||{},i=`${this.service}/${e}`,r=this.errors[e],o=r?Rk(r,n):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new dn(i,a,n)}}function Rk(t,e){return t.replace(Lk,(s,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const Lk=/\{\$([^}]+)}/g;function xk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Al(t,e){if(t===e)return!0;const s=Object.keys(t),n=Object.keys(e);for(const i of s){if(!n.includes(i))return!1;const r=t[i],o=e[i];if(em(r)&&em(o)){if(!Al(r,o))return!1}else if(r!==o)return!1}for(const i of n)if(!s.includes(i))return!1;return!0}function em(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(t){const e=[];for(const[s,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function so(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,r]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(r)}}),e}function no(t){const e=t.indexOf("?");if(!e)return"";const s=t.indexOf("#",e);return t.substring(e,s>0?s:void 0)}function Vk(t,e){const s=new Fk(t,e);return s.subscribe.bind(s)}class Fk{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,n){let i;if(e===void 0&&s===void 0&&n===void 0)throw new Error("Missing Observer.");Uk(e,["next","error","complete"])?i=e:i={next:e,error:s,complete:n},i.next===void 0&&(i.next=vu),i.error===void 0&&(i.error=vu),i.complete===void 0&&(i.complete=vu);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Uk(t,e){if(typeof t!="object"||t===null)return!1;for(const s of e)if(s in t&&typeof t[s]=="function")return!0;return!1}function vu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t){return t&&t._delegate?t._delegate:t}class gi{constructor(e,s,n){this.name=e,this.instanceFactory=s,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const n=new Nk;if(this.instancesDeferred.set(s,n),this.isInitialized(s)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:s});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){var s;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(s=e==null?void 0:e.optional)!==null&&s!==void 0?s:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Hk(e))try{this.getOrInitializeService({instanceIdentifier:Xn})}catch{}for(const[s,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(s);try{const r=this.getOrInitializeService({instanceIdentifier:i});n.resolve(r)}catch{}}}}clearInstance(e=Xn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xn){return this.instances.has(e)}getOptions(e=Xn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:s});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);n===a&&o.resolve(i)}return i}onInit(e,s){var n;const i=this.normalizeInstanceIdentifier(s),r=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,s){const n=this.onInitCallbacks.get(s);if(n)for(const i of n)try{i(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:jk(e),options:s}),this.instances.set(e,n),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Xn){return this.component?this.component.multipleInstances?e:Xn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jk(t){return t===Xn?void 0:t}function Hk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new Bk(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const qk={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},Wk=xe.INFO,Kk={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},Gk=(t,e,...s)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=Kk[e];if(i)console[i](`[${n}]  ${t.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Td{constructor(e){this.name=e,this._logLevel=Wk,this._logHandler=Gk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const Qk=(t,e)=>e.some(s=>t instanceof s);let tm,sm;function Yk(){return tm||(tm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Xk(){return sm||(sm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ev=new WeakMap,fh=new WeakMap,Tv=new WeakMap,_u=new WeakMap,kd=new WeakMap;function Jk(t){const e=new Promise((s,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{s(Cn(t.result)),i()},o=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",o)});return e.then(s=>{s instanceof IDBCursor&&Ev.set(s,t)}).catch(()=>{}),kd.set(e,t),e}function Zk(t){if(fh.has(t))return;const e=new Promise((s,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{s(),i()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)});fh.set(t,e)}let ph={get(t,e,s){if(t instanceof IDBTransaction){if(e==="done")return fh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Tv.get(t);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return Cn(t[e])},set(t,e,s){return t[e]=s,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eA(t){ph=t(ph)}function tA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const n=t.call(bu(this),e,...s);return Tv.set(n,e.sort?e.sort():[e]),Cn(n)}:Xk().includes(t)?function(...e){return t.apply(bu(this),e),Cn(Ev.get(this))}:function(...e){return Cn(t.apply(bu(this),e))}}function sA(t){return typeof t=="function"?tA(t):(t instanceof IDBTransaction&&Zk(t),Qk(t,Yk())?new Proxy(t,ph):t)}function Cn(t){if(t instanceof IDBRequest)return Jk(t);if(_u.has(t))return _u.get(t);const e=sA(t);return e!==t&&(_u.set(t,e),kd.set(e,t)),e}const bu=t=>kd.get(t);function nA(t,e,{blocked:s,upgrade:n,blocking:i,terminated:r}={}){const o=indexedDB.open(t,e),a=Cn(o);return n&&o.addEventListener("upgradeneeded",l=>{n(Cn(o.result),l.oldVersion,l.newVersion,Cn(o.transaction))}),s&&o.addEventListener("blocked",()=>s()),a.then(l=>{r&&l.addEventListener("close",()=>r()),i&&l.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}const iA=["get","getKey","getAll","getAllKeys","count"],rA=["put","add","delete","clear"],wu=new Map;function nm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(wu.get(e))return wu.get(e);const s=e.replace(/FromIndex$/,""),n=e!==s,i=rA.includes(s);if(!(s in(n?IDBIndex:IDBObjectStore).prototype)||!(i||iA.includes(s)))return;const r=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return n&&(u=u.index(a.shift())),(await Promise.all([u[s](...a),i&&l.done]))[0]};return wu.set(e,r),r}eA(t=>({...t,get:(e,s,n)=>nm(e,s)||t.get(e,s,n),has:(e,s)=>!!nm(e,s)||t.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(aA(s)){const n=s.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(s=>s).join(" ")}}function aA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const mh="@firebase/app",im="0.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi=new Td("@firebase/app"),lA="@firebase/app-compat",cA="@firebase/analytics-compat",uA="@firebase/analytics",hA="@firebase/app-check-compat",dA="@firebase/app-check",fA="@firebase/auth",pA="@firebase/auth-compat",mA="@firebase/database",gA="@firebase/database-compat",yA="@firebase/functions",vA="@firebase/functions-compat",_A="@firebase/installations",bA="@firebase/installations-compat",wA="@firebase/messaging",EA="@firebase/messaging-compat",TA="@firebase/performance",kA="@firebase/performance-compat",AA="@firebase/remote-config",SA="@firebase/remote-config-compat",IA="@firebase/storage",CA="@firebase/storage-compat",DA="@firebase/firestore",$A="@firebase/firestore-compat",OA="firebase",NA="9.15.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh="[DEFAULT]",PA={[mh]:"fire-core",[lA]:"fire-core-compat",[uA]:"fire-analytics",[cA]:"fire-analytics-compat",[dA]:"fire-app-check",[hA]:"fire-app-check-compat",[fA]:"fire-auth",[pA]:"fire-auth-compat",[mA]:"fire-rtdb",[gA]:"fire-rtdb-compat",[yA]:"fire-fn",[vA]:"fire-fn-compat",[_A]:"fire-iid",[bA]:"fire-iid-compat",[wA]:"fire-fcm",[EA]:"fire-fcm-compat",[TA]:"fire-perf",[kA]:"fire-perf-compat",[AA]:"fire-rc",[SA]:"fire-rc-compat",[IA]:"fire-gcs",[CA]:"fire-gcs-compat",[DA]:"fire-fst",[$A]:"fire-fst-compat","fire-js":"fire-js",[OA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl=new Map,yh=new Map;function MA(t,e){try{t.container.addComponent(e)}catch(s){yi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,s)}}function fr(t){const e=t.name;if(yh.has(e))return yi.debug(`There were multiple attempts to register component ${e}.`),!1;yh.set(e,t);for(const s of Sl.values())MA(s,t);return!0}function Ad(t,e){const s=t.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Dn=new Qo("app","Firebase",RA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e,s,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},s),this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new gi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Dn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo=NA;function kv(t,e={}){let s=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:gh,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw Dn.create("bad-app-name",{appName:String(i)});if(s||(s=Ok()),!s)throw Dn.create("no-options");const r=Sl.get(i);if(r){if(Al(s,r.options)&&Al(n,r.config))return r;throw Dn.create("duplicate-app",{appName:i})}const o=new zk(i);for(const l of yh.values())o.addComponent(l);const a=new LA(s,n,o);return Sl.set(i,a),a}function Av(t=gh){const e=Sl.get(t);if(!e&&t===gh)return kv();if(!e)throw Dn.create("no-app",{appName:t});return e}function ui(t,e,s){var n;let i=(n=PA[t])!==null&&n!==void 0?n:t;s&&(i+=`-${s}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yi.warn(a.join(" "));return}fr(new gi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA="firebase-heartbeat-database",VA=1,Oo="firebase-heartbeat-store";let Eu=null;function Sv(){return Eu||(Eu=nA(xA,VA,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Oo)}}}).catch(t=>{throw Dn.create("idb-open",{originalErrorMessage:t.message})})),Eu}async function FA(t){try{return(await Sv()).transaction(Oo).objectStore(Oo).get(Iv(t))}catch(e){if(e instanceof dn)yi.warn(e.message);else{const s=Dn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});yi.warn(s.message)}}}async function rm(t,e){try{const n=(await Sv()).transaction(Oo,"readwrite");return await n.objectStore(Oo).put(e,Iv(t)),n.done}catch(s){if(s instanceof dn)yi.warn(s.message);else{const n=Dn.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});yi.warn(n.message)}}}function Iv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=1024,BA=30*24*60*60*1e3;class jA{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new zA(s),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=om();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(i=>i.date===n)))return this._heartbeatsCache.heartbeats.push({date:n,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const r=new Date(i.date).valueOf();return Date.now()-r<=BA}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=om(),{heartbeatsToSend:s,unsentEntries:n}=HA(this._heartbeatsCache.heartbeats),i=kl(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function om(){return new Date().toISOString().substring(0,10)}function HA(t,e=UA){const s=[];let n=t.slice();for(const i of t){const r=s.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),am(s)>e){r.dates.pop();break}}else if(s.push({agent:i.agent,dates:[i.date]}),am(s)>e){s.pop();break}n=n.slice(1)}return{heartbeatsToSend:s,unsentEntries:n}}class zA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kk()?Ak().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await FA(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var s;if(await this._canUseIndexedDBPromise){const i=await this.read();return rm(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var s;if(await this._canUseIndexedDBPromise){const i=await this.read();return rm(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function am(t){return kl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(t){fr(new gi("platform-logger",e=>new oA(e),"PRIVATE")),fr(new gi("heartbeat",e=>new jA(e),"PRIVATE")),ui(mh,im,t),ui(mh,im,"esm2017"),ui("fire-js","")}qA("");function Sd(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(s[n[i]]=t[n[i]]);return s}function Cv(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WA=Cv,Dv=new Qo("auth","Firebase",Cv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm=new Td("@firebase/auth");function il(t,...e){lm.logLevel<=xe.ERROR&&lm.error(`Auth (${Xo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(t,...e){throw Id(t,...e)}function Ds(t,...e){return Id(t,...e)}function KA(t,e,s){const n=Object.assign(Object.assign({},WA()),{[e]:s});return new Qo("auth","Firebase",n).create(e,{appName:t.name})}function Id(t,...e){if(typeof t!="string"){const s=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(s,...n)}return Dv.create(t,...e)}function he(t,e,...s){if(!t)throw Id(e,...s)}function zs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw il(e),new Error(e)}function tn(t,e){t||zs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm=new Map;function qs(t){tn(t instanceof Function,"Expected a class definition");let e=cm.get(t);return e?(tn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,cm.set(t,e),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t,e){const s=Ad(t,"auth");if(s.isInitialized()){const i=s.getImmediate(),r=s.getOptions();if(Al(r,e??{}))return i;vs(i,"already-initialized")}return s.initialize({options:e})}function QA(t,e){const s=(e==null?void 0:e.persistence)||[],n=(Array.isArray(s)?s:[s]).map(qs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function YA(){return um()==="http:"||um()==="https:"}function um(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YA()||wk()||"connection"in navigator)?navigator.onLine:!0}function JA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,s){this.shortDelay=e,this.longDelay=s,tn(s>e,"Short delay should be less than long delay!"),this.isMobile=bk()||Ek()}get(){return XA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(t,e){tn(t.emulator,"Emulator should always be set here");const{url:s}=t.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{static initialize(e,s,n){this.fetchImpl=e,s&&(this.headersImpl=s),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;zs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;zs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;zs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS=new Jo(3e4,6e4);function Zo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ea(t,e,s,n,i={}){return Ov(t,i,async()=>{let r={},o={};n&&(e==="GET"?o=n:r={body:JSON.stringify(n)});const a=Yo(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),$v.fetch()(Nv(t,t.config.apiHost,s,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},r))})}async function Ov(t,e,s){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},ZA),e);try{const i=new tS(t),r=await Promise.race([s(),i.promise]);i.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw xa(t,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw xa(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw xa(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw xa(t,"user-disabled",o);const c=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw KA(t,c,u);vs(t,c)}}catch(i){if(i instanceof dn)throw i;vs(t,"network-request-failed")}}async function ta(t,e,s,n,i={}){const r=await ea(t,e,s,n,i);return"mfaPendingCredential"in r&&vs(t,"multi-factor-auth-required",{_serverResponse:r}),r}function Nv(t,e,s,n){const i=`${e}${s}?${n}`;return t.config.emulator?Cd(t.config,i):`${t.config.apiScheme}://${i}`}class tS{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,n)=>{this.timer=setTimeout(()=>n(Ds(this.auth,"network-request-failed")),eS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xa(t,e,s){const n={appName:t.name};s.email&&(n.email=s.email),s.phoneNumber&&(n.phoneNumber=s.phoneNumber);const i=Ds(t,e,n);return i.customData._tokenResponse=s,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sS(t,e){return ea(t,"POST","/v1/accounts:delete",e)}async function nS(t,e){return ea(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function iS(t,e=!1){const s=yt(t),n=await s.getIdToken(e),i=Dd(n);he(i&&i.exp&&i.auth_time&&i.iat,s.auth,"internal-error");const r=typeof i.firebase=="object"?i.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:i,token:n,authTime:go(Tu(i.auth_time)),issuedAtTime:go(Tu(i.iat)),expirationTime:go(Tu(i.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function Tu(t){return Number(t)*1e3}function Dd(t){const[e,s,n]=t.split(".");if(e===void 0||s===void 0||n===void 0)return il("JWT malformed, contained fewer than 3 sections"),null;try{const i=_v(s);return i?JSON.parse(i):(il("Failed to decode base64 JWT payload"),null)}catch(i){return il("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function rS(t){const e=Dd(t);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(t,e,s=!1){if(s)return e;try{return await e}catch(n){throw n instanceof dn&&oS(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function oS({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var s;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((s=this.user.stsTokenManager.expirationTime)!==null&&s!==void 0?s:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=go(this.lastLoginAt),this.creationTime=go(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Il(t){var e;const s=t.auth,n=await t.getIdToken(),i=await No(t,nS(s,{idToken:n}));he(i==null?void 0:i.users.length,s,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=!((e=r.providerUserInfo)===null||e===void 0)&&e.length?uS(r.providerUserInfo):[],a=cS(t.providerData,o),l=t.isAnonymous,u=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Pv(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function lS(t){const e=yt(t);await Il(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cS(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function uS(t){return t.map(e=>{var{providerId:s}=e,n=Sd(e,["providerId"]);return{providerId:s,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hS(t,e){const s=await Ov(t,{},async()=>{const n=Yo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,o=Nv(t,i,"/v1/token",`key=${r}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",$v.fetch()(o,{method:"POST",headers:a,body:n})});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const s="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}async getToken(e,s=!1){return he(!this.accessToken||this.refreshToken,e,"user-token-expired"),!s&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:n,refreshToken:i,expiresIn:r}=await hS(e,s);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,s,n){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,s){const{refreshToken:n,accessToken:i,expirationTime:r}=s,o=new Po;return n&&(he(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),i&&(he(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),r&&(he(typeof r=="number","internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Po,this.toJSON())}_performRefresh(){return zs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(t,e){he(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class hi{constructor(e){var{uid:s,auth:n,stsTokenManager:i}=e,r=Sd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new aS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=s,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Pv(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const s=await No(this,this.stsTokenManager.getToken(this.auth,e));return he(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return iS(this,e)}reload(){return lS(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>Object.assign({},s)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new hi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),s&&await Il(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await No(this,sS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){var n,i,r,o,a,l,u,c;const d=(n=s.displayName)!==null&&n!==void 0?n:void 0,f=(i=s.email)!==null&&i!==void 0?i:void 0,p=(r=s.phoneNumber)!==null&&r!==void 0?r:void 0,b=(o=s.photoURL)!==null&&o!==void 0?o:void 0,_=(a=s.tenantId)!==null&&a!==void 0?a:void 0,A=(l=s._redirectEventId)!==null&&l!==void 0?l:void 0,C=(u=s.createdAt)!==null&&u!==void 0?u:void 0,P=(c=s.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:M,emailVerified:R,isAnonymous:z,providerData:W,stsTokenManager:ce}=s;he(M&&ce,e,"internal-error");const q=Po.fromJSON(this.name,ce);he(typeof M=="string",e,"internal-error"),yn(d,e.name),yn(f,e.name),he(typeof R=="boolean",e,"internal-error"),he(typeof z=="boolean",e,"internal-error"),yn(p,e.name),yn(b,e.name),yn(_,e.name),yn(A,e.name),yn(C,e.name),yn(P,e.name);const Z=new hi({uid:M,auth:e,email:f,emailVerified:R,displayName:d,isAnonymous:z,photoURL:b,phoneNumber:p,tenantId:_,stsTokenManager:q,createdAt:C,lastLoginAt:P});return W&&Array.isArray(W)&&(Z.providerData=W.map(de=>Object.assign({},de))),A&&(Z._redirectEventId=A),Z}static async _fromIdTokenResponse(e,s,n=!1){const i=new Po;i.updateFromServerResponse(s);const r=new hi({uid:s.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Il(r),r}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}Mv.type="NONE";const hm=Mv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(t,e,s){return`firebase:${t}:${e}:${s}`}class sr{constructor(e,s,n){this.persistence=e,this.auth=s,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=rl(this.userKey,i.apiKey,r),this.fullPersistenceKey=rl("persistence",i.apiKey,r),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?hi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,n="authUser"){if(!s.length)return new sr(qs(hm),e,n);const i=(await Promise.all(s.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let r=i[0]||qs(hm);const o=rl(n,e.config.apiKey,e.name);let a=null;for(const u of s)try{const c=await u._get(o);if(c){const d=hi._fromJSON(e,c);u!==r&&(a=d),r=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new sr(r,e,n):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(s.map(async u=>{if(u!==r)try{await u._remove(o)}catch{}})),new sr(r,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(xv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Rv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Fv(e))return"Blackberry";if(Uv(e))return"Webos";if($d(e))return"Safari";if((e.includes("chrome/")||Lv(e))&&!e.includes("edge/"))return"Chrome";if(Vv(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(s);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function Rv(t=Mt()){return/firefox\//i.test(t)}function $d(t=Mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Lv(t=Mt()){return/crios\//i.test(t)}function xv(t=Mt()){return/iemobile/i.test(t)}function Vv(t=Mt()){return/android/i.test(t)}function Fv(t=Mt()){return/blackberry/i.test(t)}function Uv(t=Mt()){return/webos/i.test(t)}function pc(t=Mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function dS(t=Mt()){var e;return pc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function fS(){return Tk()&&document.documentMode===10}function Bv(t=Mt()){return pc(t)||Vv(t)||Uv(t)||Fv(t)||/windows phone/i.test(t)||xv(t)}function pS(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(t,e=[]){let s;switch(t){case"Browser":s=dm(Mt());break;case"Worker":s=`${dm(Mt())}-${t}`;break;default:s=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${Xo}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const n=r=>new Promise((o,a)=>{try{const l=e(r);o(l)}catch(l){a(l)}});n.onAbort=s,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const n of this.queue)await n(e),n.onAbort&&s.push(n.onAbort)}catch(n){s.reverse();for(const i of s)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,s,n){this.app=e,this.heartbeatServiceProvider=s,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fm(this),this.idTokenSubscription=new fm(this),this.beforeStateQueue=new mS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Dv,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=qs(s)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await sr.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var s;const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await Il(e)}catch(s){if((s==null?void 0:s.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=JA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const s=e?yt(e):null;return s&&he(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(qs(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Qo("auth","Firebase",e())}onAuthStateChanged(e,s,n){return this.registerStateListener(this.authStateSubscription,e,s,n)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,n){return this.registerStateListener(this.idTokenSubscription,e,s,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,s){const n=await this.getOrInitRedirectPersistenceManager(s);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&qs(e)||this._popupRedirectResolver;he(s,this,"argument-error"),this.redirectPersistenceManager=await sr.create(this,[qs(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var s,n;return this._isInitialized&&await this.queue(async()=>{}),((s=this._currentUser)===null||s===void 0?void 0:s._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,s;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(s=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&s!==void 0?s:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,n,i){if(this._deleted)return()=>{};const r=typeof s=="function"?s:s.next.bind(s),o=this._isInitialized?Promise.resolve():this._initializationPromise;return he(o,this,"internal-error"),o.then(()=>r(this.currentUser)),typeof s=="function"?e.addObserver(s,n,i):e.addObserver(s)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const s={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(s["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return n&&(s["X-Firebase-Client"]=n),s}}function sa(t){return yt(t)}class fm{constructor(e){this.auth=e,this.observer=null,this.addObserver=Vk(s=>this.observer=s)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function yS(t,e,s){const n=sa(t);he(n._canInitEmulator,n,"emulator-config-failed"),he(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!!(s!=null&&s.disableWarnings),r=Hv(e),{host:o,port:a}=vS(e),l=a===null?"":`:${a}`;n.config.emulator={url:`${r}//${o}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||_S()}function Hv(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function vS(t){const e=Hv(t),s=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!s)return{host:"",port:null};const n=s[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const r=i[1];return{host:r,port:pm(n.substr(r.length+1))}}else{const[r,o]=n.split(":");return{host:r,port:pm(o)}}}function pm(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function _S(){function t(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return zs("not implemented")}_getIdTokenResponse(e){return zs("not implemented")}_linkToIdToken(e,s){return zs("not implemented")}_getReauthenticationResolver(e){return zs("not implemented")}}async function bS(t,e){return ea(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wS(t,e){return ta(t,"POST","/v1/accounts:signInWithPassword",Zo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ES(t,e){return ta(t,"POST","/v1/accounts:signInWithEmailLink",Zo(t,e))}async function TS(t,e){return ta(t,"POST","/v1/accounts:signInWithEmailLink",Zo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo extends Od{constructor(e,s,n,i=null){super("password",n),this._email=e,this._password=s,this._tenantId=i}static _fromEmailAndPassword(e,s){return new Mo(e,s,"password")}static _fromEmailAndCode(e,s,n=null){return new Mo(e,s,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e;if(s!=null&&s.email&&(s!=null&&s.password)){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return wS(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return ES(e,{email:this._email,oobCode:this._password});default:vs(e,"internal-error")}}async _linkToIdToken(e,s){switch(this.signInMethod){case"password":return bS(e,{idToken:s,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return TS(e,{idToken:s,email:this._email,oobCode:this._password});default:vs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nr(t,e){return ta(t,"POST","/v1/accounts:signInWithIdp",Zo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="http://localhost";class vi extends Od{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new vi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):vs("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=s,r=Sd(s,["providerId","signInMethod"]);if(!n||!i)return null;const o=new vi(n,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){const s=this.buildRequest();return nr(e,s)}_linkToIdToken(e,s){const n=this.buildRequest();return n.idToken=s,nr(e,n)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,nr(e,s)}buildRequest(){const e={requestUri:kS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=Yo(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function SS(t){const e=so(no(t)).link,s=e?so(no(e)).deep_link_id:null,n=so(no(t)).deep_link_id;return(n?so(no(n)).link:null)||n||s||e||t}class Nd{constructor(e){var s,n,i,r,o,a;const l=so(no(e)),u=(s=l.apiKey)!==null&&s!==void 0?s:null,c=(n=l.oobCode)!==null&&n!==void 0?n:null,d=AS((i=l.mode)!==null&&i!==void 0?i:null);he(u&&c&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=c,this.continueUrl=(r=l.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const s=SS(e);try{return new Nd(s)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(){this.providerId=Lr.PROVIDER_ID}static credential(e,s){return Mo._fromEmailAndPassword(e,s)}static credentialWithLink(e,s){const n=Nd.parseLink(s);return he(n,"argument-error"),Mo._fromEmailAndCode(e,n.code,n.tenantId)}}Lr.PROVIDER_ID="password";Lr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Lr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na extends zv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En extends na{constructor(){super("facebook.com")}static credential(e){return vi._fromParams({providerId:En.PROVIDER_ID,signInMethod:En.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return En.credentialFromTaggedObject(e)}static credentialFromError(e){return En.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return En.credential(e.oauthAccessToken)}catch{return null}}}En.FACEBOOK_SIGN_IN_METHOD="facebook.com";En.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn extends na{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return vi._fromParams({providerId:Tn.PROVIDER_ID,signInMethod:Tn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return Tn.credentialFromTaggedObject(e)}static credentialFromError(e){return Tn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:n}=e;if(!s&&!n)return null;try{return Tn.credential(s,n)}catch{return null}}}Tn.GOOGLE_SIGN_IN_METHOD="google.com";Tn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn extends na{constructor(){super("github.com")}static credential(e){return vi._fromParams({providerId:kn.PROVIDER_ID,signInMethod:kn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kn.credentialFromTaggedObject(e)}static credentialFromError(e){return kn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return kn.credential(e.oauthAccessToken)}catch{return null}}}kn.GITHUB_SIGN_IN_METHOD="github.com";kn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An extends na{constructor(){super("twitter.com")}static credential(e,s){return vi._fromParams({providerId:An.PROVIDER_ID,signInMethod:An.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return An.credentialFromTaggedObject(e)}static credentialFromError(e){return An.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:n}=e;if(!s||!n)return null;try{return An.credential(s,n)}catch{return null}}}An.TWITTER_SIGN_IN_METHOD="twitter.com";An.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IS(t,e){return ta(t,"POST","/v1/accounts:signUp",Zo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,n,i=!1){const r=await hi._fromIdTokenResponse(e,n,i),o=mm(n);return new _i({user:r,providerId:o,_tokenResponse:n,operationType:s})}static async _forOperation(e,s,n){await e._updateTokensIfNecessary(n,!0);const i=mm(n);return new _i({user:e,providerId:i,_tokenResponse:n,operationType:s})}}function mm(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl extends dn{constructor(e,s,n,i){var r;super(s.code,s.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Cl.prototype),this.customData={appName:e.name,tenantId:(r=e.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:s.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,s,n,i){return new Cl(e,s,n,i)}}function qv(t,e,s,n){return(e==="reauthenticate"?s._getReauthenticationResolver(t):s._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Cl._fromErrorAndOperation(t,r,e,n):r})}async function CS(t,e,s=!1){const n=await No(t,e._linkToIdToken(t.auth,await t.getIdToken()),s);return _i._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DS(t,e,s=!1){const{auth:n}=t,i="reauthenticate";try{const r=await No(t,qv(n,i,e,t),s);he(r.idToken,n,"internal-error");const o=Dd(r.idToken);he(o,n,"internal-error");const{sub:a}=o;return he(t.uid===a,n,"user-mismatch"),_i._forOperation(t,i,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&vs(n,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wv(t,e,s=!1){const n="signIn",i=await qv(t,n,e),r=await _i._fromIdTokenResponse(t,n,i);return s||await t._updateCurrentUser(r.user),r}async function $S(t,e){return Wv(sa(t),e)}async function OS(t,e,s){const n=sa(t),i=await IS(n,{returnSecureToken:!0,email:e,password:s}),r=await _i._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r}function NS(t,e,s){return $S(yt(t),Lr.credential(e,s))}function PS(t,e,s,n){return yt(t).onIdTokenChanged(e,s,n)}function MS(t,e,s){return yt(t).beforeAuthStateChanged(e,s)}function RS(t,e,s,n){return yt(t).onAuthStateChanged(e,s,n)}function LS(t){return yt(t).signOut()}const Dl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(Dl,"1"),this.storage.removeItem(Dl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(){const t=Mt();return $d(t)||pc(t)}const VS=1e3,FS=10;class Gv extends Kv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=xS()&&pS(),this.fallbackToPolling=Bv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const n=this.storage.getItem(s),i=this.localCache[s];n!==i&&e(s,i,n)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const n=e.key;if(s?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(n);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!s)return}const i=()=>{const o=this.storage.getItem(n);!s&&this.localCache[n]===o||this.notifyListeners(n,o)},r=this.storage.getItem(n);fS()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,FS):i()}notifyListeners(e,s){this.localCache[e]=s;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:n}),!0)})},VS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}Gv.type="LOCAL";const US=Gv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv extends Kv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}Qv.type="SESSION";const Yv=Qv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(i=>i.isListeningto(e));if(s)return s;const n=new mc(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:n,eventType:i,data:r}=s.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;s.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const a=Array.from(o).map(async u=>u(s.origin,r)),l=await BS(a);s.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:l})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pd(t="",e=10){let s="";for(let n=0;n<e;n++)s+=Math.floor(Math.random()*10);return t+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const u=Pd("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},n);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(c),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(f.data.response);break;default:clearTimeout(c),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:s},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(){return window}function HS(t){$s().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(){return typeof $s().WorkerGlobalScope<"u"&&typeof $s().importScripts=="function"}async function zS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qS(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function WS(){return Xv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="firebaseLocalStorageDb",KS=1,$l="firebaseLocalStorage",Zv="fbase_key";class ia{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function gc(t,e){return t.transaction([$l],e?"readwrite":"readonly").objectStore($l)}function GS(){const t=indexedDB.deleteDatabase(Jv);return new ia(t).toPromise()}function _h(){const t=indexedDB.open(Jv,KS);return new Promise((e,s)=>{t.addEventListener("error",()=>{s(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore($l,{keyPath:Zv})}catch(i){s(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains($l)?e(n):(n.close(),await GS(),e(await _h()))})})}async function gm(t,e,s){const n=gc(t,!0).put({[Zv]:e,value:s});return new ia(n).toPromise()}async function QS(t,e){const s=gc(t,!1).get(e),n=await new ia(s).toPromise();return n===void 0?null:n.value}function ym(t,e){const s=gc(t,!0).delete(e);return new ia(s).toPromise()}const YS=800,XS=3;class e_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _h(),this.db)}async _withRetries(e){let s=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(s++>XS)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Xv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mc._getInstance(WS()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){var e,s;if(this.activeServiceWorker=await zS(),!this.activeServiceWorker)return;this.sender=new jS(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((s=n[0])===null||s===void 0)&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _h();return await gm(e,Dl,"1"),await ym(e,Dl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(n=>gm(n,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(n=>QS(n,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>ym(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const r=gc(i,!1).getAll();return new ia(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],n=new Set;for(const{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),s.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),s.push(i));return s}notifyListeners(e,s){this.localCache[e]=s;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}e_.type="LOCAL";const JS=e_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function eI(t){return new Promise((e,s)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const r=Ds("internal-error");r.customData=i,s(r)},n.type="text/javascript",n.charset="UTF-8",ZS().appendChild(n)})}function tI(t){return`__${t}${Math.floor(Math.random()*1e6)}`}new Jo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(t,e){return e?qs(e):(he(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md extends Od{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nr(e,this._buildIdpRequest())}_linkToIdToken(e,s){return nr(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return nr(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function nI(t){return Wv(t.auth,new Md(t),t.bypassAuthState)}function iI(t){const{auth:e,user:s}=t;return he(s,e,"internal-error"),DS(s,new Md(t),t.bypassAuthState)}async function rI(t){const{auth:e,user:s}=t;return he(s,e,"internal-error"),CS(s,new Md(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,s,n,i,r=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:n,postBody:i,tenantId:r,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:s,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nI;case"linkViaPopup":case"linkViaRedirect":return rI;case"reauthViaPopup":case"reauthViaRedirect":return iI;default:vs(this.auth,"internal-error")}}resolve(e){tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=new Jo(2e3,1e4);class Wi extends t_{constructor(e,s,n,i,r){super(e,s,i,r),this.provider=n,this.authWindow=null,this.pollId=null,Wi.currentPopupAction&&Wi.currentPopupAction.cancel(),Wi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){tn(this.filter.length===1,"Popup operations only handle one event");const e=Pd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(Ds(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ds(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var s,n;if(!((n=(s=this.authWindow)===null||s===void 0?void 0:s.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ds(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,oI.get())};e()}}Wi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI="pendingRedirect",ol=new Map;class lI extends t_{constructor(e,s,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,n),this.eventId=null}async execute(){let e=ol.get(this.auth._key());if(!e){try{const n=await cI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(s){e=()=>Promise.reject(s)}ol.set(this.auth._key(),e)}return this.bypassAuthState||ol.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cI(t,e){const s=dI(e),n=hI(t);if(!await n._isAvailable())return!1;const i=await n._get(s)==="true";return await n._remove(s),i}function uI(t,e){ol.set(t._key(),e)}function hI(t){return qs(t._redirectPersistence)}function dI(t){return rl(aI,t.config.apiKey,t.name)}async function fI(t,e,s=!1){const n=sa(t),i=sI(n,e),o=await new lI(n,i,s).execute();return o&&!s&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI=10*60*1e3;class mI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(s=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gI(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){var n;if(e.error&&!s_(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";s.onError(Ds(this.auth,i))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const n=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pI&&this.cachedEventUids.clear(),this.cachedEventUids.has(vm(e))}saveEventToCache(e){this.cachedEventUids.add(vm(e)),this.lastProcessedEventTime=Date.now()}}function vm(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function s_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function gI(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return s_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yI(t,e={}){return ea(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_I=/^https?/;async function bI(t){if(t.config.emulator)return;const{authorizedDomains:e}=await yI(t);for(const s of e)try{if(wI(s))return}catch{}vs(t,"unauthorized-domain")}function wI(t){const e=vh(),{protocol:s,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?s==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&o.hostname===n}if(!_I.test(s))return!1;if(vI.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI=new Jo(3e4,6e4);function _m(){const t=$s().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let s=0;s<t.CP.length;s++)t.CP[s]=null}}function TI(t){return new Promise((e,s)=>{var n,i,r;function o(){_m(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_m(),s(Ds(t,"network-request-failed"))},timeout:EI.get()})}if(!((i=(n=$s().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((r=$s().gapi)===null||r===void 0)&&r.load)o();else{const a=tI("iframefcb");return $s()[a]=()=>{gapi.load?o():s(Ds(t,"network-request-failed"))},eI(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>s(l))}}).catch(e=>{throw al=null,e})}let al=null;function kI(t){return al=al||TI(t),al}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=new Jo(5e3,15e3),SI="__/auth/iframe",II="emulator/auth/iframe",CI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $I(t){const e=t.config;he(e.authDomain,t,"auth-domain-config-required");const s=e.emulator?Cd(e,II):`https://${t.config.authDomain}/${SI}`,n={apiKey:e.apiKey,appName:t.name,v:Xo},i=DI.get(t.config.apiHost);i&&(n.eid=i);const r=t._getFrameworks();return r.length&&(n.fw=r.join(",")),`${s}?${Yo(n).slice(1)}`}async function OI(t){const e=await kI(t),s=$s().gapi;return he(s,t,"internal-error"),e.open({where:document.body,url:$I(t),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CI,dontclear:!0},n=>new Promise(async(i,r)=>{await n.restyle({setHideOnLeave:!1});const o=Ds(t,"network-request-failed"),a=$s().setTimeout(()=>{r(o)},AI.get());function l(){$s().clearTimeout(a),i(n)}n.ping(l).then(l,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PI=500,MI=600,RI="_blank",LI="http://localhost";class bm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function xI(t,e,s,n=PI,i=MI){const r=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let a="";const l=Object.assign(Object.assign({},NI),{width:n.toString(),height:i.toString(),top:r,left:o}),u=Mt().toLowerCase();s&&(a=Lv(u)?RI:s),Rv(u)&&(e=e||LI,l.scrollbars="yes");const c=Object.entries(l).reduce((f,[p,b])=>`${f}${p}=${b},`,"");if(dS(u)&&a!=="_self")return VI(e||"",a),new bm(null);const d=window.open(e||"",a,c);he(d,t,"popup-blocked");try{d.focus()}catch{}return new bm(d)}function VI(t,e){const s=document.createElement("a");s.href=t,s.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI="__/auth/handler",UI="emulator/auth/handler";function wm(t,e,s,n,i,r){he(t.config.authDomain,t,"auth-domain-config-required"),he(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:s,redirectUrl:n,v:Xo,eventId:i};if(e instanceof zv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",xk(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,u]of Object.entries(r||{}))o[l]=u}if(e instanceof na){const l=e.getScopes().filter(u=>u!=="");l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const l of Object.keys(a))a[l]===void 0&&delete a[l];return`${BI(t)}?${Yo(a).slice(1)}`}function BI({config:t}){return t.emulator?Cd(t,UI):`https://${t.authDomain}/${FI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku="webStorageSupport";class jI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yv,this._completeRedirectFn=fI,this._overrideRedirectResult=uI}async _openPopup(e,s,n,i){var r;tn((r=this.eventManagers[e._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const o=wm(e,s,n,vh(),i);return xI(e,o,Pd())}async _openRedirect(e,s,n,i){return await this._originValidation(e),HS(wm(e,s,n,vh(),i)),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:i,promise:r}=this.eventManagers[s];return i?Promise.resolve(i):(tn(r,"If manager is not set, promise should be"),r)}const n=this.initAndGetManager(e);return this.eventManagers[s]={promise:n},n.catch(()=>{delete this.eventManagers[s]}),n}async initAndGetManager(e){const s=await OI(e),n=new mI(e);return s.register("authEvent",i=>(he(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=s,n}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(ku,{type:ku},i=>{var r;const o=(r=i==null?void 0:i[0])===null||r===void 0?void 0:r[ku];o!==void 0&&s(!!o),vs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=bI(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return Bv()||$d()||pc()}}const HI=jI;var Em="@firebase/auth",Tm="0.21.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function WI(t){fr(new gi("auth",(e,{options:s})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:r,authDomain:o}=n.options;return((a,l)=>{he(r&&!r.includes(":"),"invalid-api-key",{appName:a.name}),he(!(o!=null&&o.includes(":")),"argument-error",{appName:a.name});const u={apiKey:r,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jv(t)},c=new gS(a,l,u);return QA(c,s),c})(n,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,n)=>{e.getProvider("auth-internal").initialize()})),fr(new gi("auth-internal",e=>{const s=sa(e.getProvider("auth").getImmediate());return(n=>new zI(n))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),ui(Em,Tm,qI(t)),ui(Em,Tm,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=5*60,GI=wv("authIdTokenMaxAge")||KI;let km=null;const QI=t=>async e=>{const s=e&&await e.getIdTokenResult(),n=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(n&&n>GI)return;const i=s==null?void 0:s.token;km!==i&&(km=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function xr(t=Av()){const e=Ad(t,"auth");if(e.isInitialized())return e.getImmediate();const s=GA(t,{popupRedirectResolver:HI,persistence:[JS,US,Yv]}),n=wv("authTokenSyncURL");if(n){const r=QI(n);MS(s,r,()=>r(s.currentUser)),PS(s,o=>r(o))}const i=bv("auth");return i&&yS(s,`http://${i}`),s}WI("Browser");var YI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ee,Rd=Rd||{},pe=YI||self;function Ol(){}function yc(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function ra(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function XI(t){return Object.prototype.hasOwnProperty.call(t,Au)&&t[Au]||(t[Au]=++JI)}var Au="closure_uid_"+(1e9*Math.random()>>>0),JI=0;function ZI(t,e,s){return t.call.apply(t.bind,arguments)}function eC(t,e,s){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Nt(t,e,s){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Nt=ZI:Nt=eC,Nt.apply(null,arguments)}function Va(t,e){var s=Array.prototype.slice.call(arguments,1);return function(){var n=s.slice();return n.push.apply(n,arguments),t.apply(this,n)}}function St(t,e){function s(){}s.prototype=e.prototype,t.X=e.prototype,t.prototype=new s,t.prototype.constructor=t,t.Wb=function(n,i,r){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(n,o)}}function Un(){this.s=this.s,this.o=this.o}var tC=0;Un.prototype.s=!1;Un.prototype.na=function(){!this.s&&(this.s=!0,this.M(),tC!=0)&&XI(this)};Un.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const n_=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let s=0;s<t.length;s++)if(s in t&&t[s]===e)return s;return-1};function Ld(t){const e=t.length;if(0<e){const s=Array(e);for(let n=0;n<e;n++)s[n]=t[n];return s}return[]}function Am(t,e){for(let s=1;s<arguments.length;s++){const n=arguments[s];if(yc(n)){const i=t.length||0,r=n.length||0;t.length=i+r;for(let o=0;o<r;o++)t[i+o]=n[o]}else t.push(n)}}function Pt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Pt.prototype.h=function(){this.defaultPrevented=!0};var sC=function(){if(!pe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{pe.addEventListener("test",Ol,e),pe.removeEventListener("test",Ol,e)}catch{}return t}();function Nl(t){return/^[\s\xa0]*$/.test(t)}var Sm=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Su(t,e){return t<e?-1:t>e?1:0}function vc(){var t=pe.navigator;return t&&(t=t.userAgent)?t:""}function Cs(t){return vc().indexOf(t)!=-1}function xd(t){return xd[" "](t),t}xd[" "]=Ol;function nC(t){var e=oC;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var iC=Cs("Opera"),pr=Cs("Trident")||Cs("MSIE"),i_=Cs("Edge"),bh=i_||pr,r_=Cs("Gecko")&&!(vc().toLowerCase().indexOf("webkit")!=-1&&!Cs("Edge"))&&!(Cs("Trident")||Cs("MSIE"))&&!Cs("Edge"),rC=vc().toLowerCase().indexOf("webkit")!=-1&&!Cs("Edge");function o_(){var t=pe.document;return t?t.documentMode:void 0}var Pl;e:{var Iu="",Cu=function(){var t=vc();if(r_)return/rv:([^\);]+)(\)|;)/.exec(t);if(i_)return/Edge\/([\d\.]+)/.exec(t);if(pr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(rC)return/WebKit\/(\S+)/.exec(t);if(iC)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Cu&&(Iu=Cu?Cu[1]:""),pr){var Du=o_();if(Du!=null&&Du>parseFloat(Iu)){Pl=String(Du);break e}}Pl=Iu}var oC={};function aC(){return nC(function(){let t=0;const e=Sm(String(Pl)).split("."),s=Sm("9").split("."),n=Math.max(e.length,s.length);for(let o=0;t==0&&o<n;o++){var i=e[o]||"",r=s[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],i[0].length==0&&r[0].length==0)break;t=Su(i[1].length==0?0:parseInt(i[1],10),r[1].length==0?0:parseInt(r[1],10))||Su(i[2].length==0,r[2].length==0)||Su(i[2],r[2]),i=i[3],r=r[3]}while(t==0)}return 0<=t})}var wh;if(pe.document&&pr){var Im=o_();wh=Im||parseInt(Pl,10)||void 0}else wh=void 0;var lC=wh;function Ro(t,e){if(Pt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var s=this.type=t.type,n=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(r_){e:{try{xd(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else s=="mouseover"?e=t.fromElement:s=="mouseout"&&(e=t.toElement);this.relatedTarget=e,n?(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:cC[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ro.X.h.call(this)}}St(Ro,Pt);var cC={2:"touch",3:"pen",4:"mouse"};Ro.prototype.h=function(){Ro.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var oa="closure_listenable_"+(1e6*Math.random()|0),uC=0;function hC(t,e,s,n,i){this.listener=t,this.proxy=null,this.src=e,this.type=s,this.capture=!!n,this.ha=i,this.key=++uC,this.ba=this.ea=!1}function _c(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function Vd(t,e,s){for(const n in t)e.call(s,t[n],n,t)}function a_(t){const e={};for(const s in t)e[s]=t[s];return e}const Cm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function l_(t,e){let s,n;for(let i=1;i<arguments.length;i++){n=arguments[i];for(s in n)t[s]=n[s];for(let r=0;r<Cm.length;r++)s=Cm[r],Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}}function bc(t){this.src=t,this.g={},this.h=0}bc.prototype.add=function(t,e,s,n,i){var r=t.toString();t=this.g[r],t||(t=this.g[r]=[],this.h++);var o=Th(t,e,n,i);return-1<o?(e=t[o],s||(e.ea=!1)):(e=new hC(e,this.src,r,!!n,i),e.ea=s,t.push(e)),e};function Eh(t,e){var s=e.type;if(s in t.g){var n=t.g[s],i=n_(n,e),r;(r=0<=i)&&Array.prototype.splice.call(n,i,1),r&&(_c(e),t.g[s].length==0&&(delete t.g[s],t.h--))}}function Th(t,e,s,n){for(var i=0;i<t.length;++i){var r=t[i];if(!r.ba&&r.listener==e&&r.capture==!!s&&r.ha==n)return i}return-1}var Fd="closure_lm_"+(1e6*Math.random()|0),$u={};function c_(t,e,s,n,i){if(n&&n.once)return h_(t,e,s,n,i);if(Array.isArray(e)){for(var r=0;r<e.length;r++)c_(t,e[r],s,n,i);return null}return s=jd(s),t&&t[oa]?t.N(e,s,ra(n)?!!n.capture:!!n,i):u_(t,e,s,!1,n,i)}function u_(t,e,s,n,i,r){if(!e)throw Error("Invalid event type");var o=ra(i)?!!i.capture:!!i,a=Bd(t);if(a||(t[Fd]=a=new bc(t)),s=a.add(e,s,n,o,r),s.proxy)return s;if(n=dC(),s.proxy=n,n.src=t,n.listener=s,t.addEventListener)sC||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),n,i);else if(t.attachEvent)t.attachEvent(f_(e.toString()),n);else if(t.addListener&&t.removeListener)t.addListener(n);else throw Error("addEventListener and attachEvent are unavailable.");return s}function dC(){function t(s){return e.call(t.src,t.listener,s)}const e=fC;return t}function h_(t,e,s,n,i){if(Array.isArray(e)){for(var r=0;r<e.length;r++)h_(t,e[r],s,n,i);return null}return s=jd(s),t&&t[oa]?t.O(e,s,ra(n)?!!n.capture:!!n,i):u_(t,e,s,!0,n,i)}function d_(t,e,s,n,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)d_(t,e[r],s,n,i);else n=ra(n)?!!n.capture:!!n,s=jd(s),t&&t[oa]?(t=t.i,e=String(e).toString(),e in t.g&&(r=t.g[e],s=Th(r,s,n,i),-1<s&&(_c(r[s]),Array.prototype.splice.call(r,s,1),r.length==0&&(delete t.g[e],t.h--)))):t&&(t=Bd(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Th(e,s,n,i)),(s=-1<t?e[t]:null)&&Ud(s))}function Ud(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[oa])Eh(e.i,t);else{var s=t.type,n=t.proxy;e.removeEventListener?e.removeEventListener(s,n,t.capture):e.detachEvent?e.detachEvent(f_(s),n):e.addListener&&e.removeListener&&e.removeListener(n),(s=Bd(e))?(Eh(s,t),s.h==0&&(s.src=null,e[Fd]=null)):_c(t)}}}function f_(t){return t in $u?$u[t]:$u[t]="on"+t}function fC(t,e){if(t.ba)t=!0;else{e=new Ro(e,this);var s=t.listener,n=t.ha||t.src;t.ea&&Ud(t),t=s.call(n,e)}return t}function Bd(t){return t=t[Fd],t instanceof bc?t:null}var Ou="__closure_events_fn_"+(1e9*Math.random()>>>0);function jd(t){return typeof t=="function"?t:(t[Ou]||(t[Ou]=function(e){return t.handleEvent(e)}),t[Ou])}function vt(){Un.call(this),this.i=new bc(this),this.P=this,this.I=null}St(vt,Un);vt.prototype[oa]=!0;vt.prototype.removeEventListener=function(t,e,s,n){d_(this,t,e,s,n)};function kt(t,e){var s,n=t.I;if(n)for(s=[];n;n=n.I)s.push(n);if(t=t.P,n=e.type||e,typeof e=="string")e=new Pt(e,t);else if(e instanceof Pt)e.target=e.target||t;else{var i=e;e=new Pt(n,t),l_(e,i)}if(i=!0,s)for(var r=s.length-1;0<=r;r--){var o=e.g=s[r];i=Fa(o,n,!0,e)&&i}if(o=e.g=t,i=Fa(o,n,!0,e)&&i,i=Fa(o,n,!1,e)&&i,s)for(r=0;r<s.length;r++)o=e.g=s[r],i=Fa(o,n,!1,e)&&i}vt.prototype.M=function(){if(vt.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var s=t.g[e],n=0;n<s.length;n++)_c(s[n]);delete t.g[e],t.h--}}this.I=null};vt.prototype.N=function(t,e,s,n){return this.i.add(String(t),e,!1,s,n)};vt.prototype.O=function(t,e,s,n){return this.i.add(String(t),e,!0,s,n)};function Fa(t,e,s,n){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,r=0;r<e.length;++r){var o=e[r];if(o&&!o.ba&&o.capture==s){var a=o.listener,l=o.ha||o.src;o.ea&&Eh(t.i,o),i=a.call(l,n)!==!1&&i}}return i&&!n.defaultPrevented}var Hd=pe.JSON.stringify;function pC(){var t=g_;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class mC{constructor(){this.h=this.g=null}add(e,s){const n=p_.get();n.set(e,s),this.h?this.h.next=n:this.g=n,this.h=n}}var p_=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new gC,t=>t.reset());class gC{constructor(){this.next=this.g=this.h=null}set(e,s){this.h=e,this.g=s,this.next=null}reset(){this.next=this.g=this.h=null}}function yC(t){pe.setTimeout(()=>{throw t},0)}function m_(t,e){kh||vC(),Ah||(kh(),Ah=!0),g_.add(t,e)}var kh;function vC(){var t=pe.Promise.resolve(void 0);kh=function(){t.then(_C)}}var Ah=!1,g_=new mC;function _C(){for(var t;t=pC();){try{t.h.call(t.g)}catch(s){yC(s)}var e=p_;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ah=!1}function wc(t,e){vt.call(this),this.h=t||1,this.g=e||pe,this.j=Nt(this.lb,this),this.l=Date.now()}St(wc,vt);ee=wc.prototype;ee.ca=!1;ee.R=null;ee.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),kt(this,"tick"),this.ca&&(zd(this),this.start()))}};ee.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function zd(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}ee.M=function(){wc.X.M.call(this),zd(this),delete this.g};function qd(t,e,s){if(typeof t=="function")s&&(t=Nt(t,s));else if(t&&typeof t.handleEvent=="function")t=Nt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:pe.setTimeout(t,e||0)}function y_(t){t.g=qd(()=>{t.g=null,t.i&&(t.i=!1,y_(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class bC extends Un{constructor(e,s){super(),this.m=e,this.j=s,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:y_(this)}M(){super.M(),this.g&&(pe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lo(t){Un.call(this),this.h=t,this.g={}}St(Lo,Un);var Dm=[];function v_(t,e,s,n){Array.isArray(s)||(s&&(Dm[0]=s.toString()),s=Dm);for(var i=0;i<s.length;i++){var r=c_(e,s[i],n||t.handleEvent,!1,t.h||t);if(!r)break;t.g[r.key]=r}}function __(t){Vd(t.g,function(e,s){this.g.hasOwnProperty(s)&&Ud(e)},t),t.g={}}Lo.prototype.M=function(){Lo.X.M.call(this),__(this)};Lo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Ec(){this.g=!0}Ec.prototype.Aa=function(){this.g=!1};function wC(t,e,s,n,i,r){t.info(function(){if(t.g)if(r)for(var o="",a=r.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var d=c.split("_");o=2<=d.length&&d[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+n+") [attempt "+i+"]: "+e+`
`+s+`
`+o})}function EC(t,e,s,n,i,r,o){t.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+i+"]: "+e+`
`+s+`
`+r+" "+o})}function Ki(t,e,s,n){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+kC(t,s)+(n?" "+n:"")})}function TC(t,e){t.info(function(){return"TIMEOUT: "+e})}Ec.prototype.info=function(){};function kC(t,e){if(!t.g)return e;if(!e)return null;try{var s=JSON.parse(e);if(s){for(t=0;t<s.length;t++)if(Array.isArray(s[t])){var n=s[t];if(!(2>n.length)){var i=n[1];if(Array.isArray(i)&&!(1>i.length)){var r=i[0];if(r!="noop"&&r!="stop"&&r!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Hd(s)}catch{return e}}var Ii={},$m=null;function Tc(){return $m=$m||new vt}Ii.Pa="serverreachability";function b_(t){Pt.call(this,Ii.Pa,t)}St(b_,Pt);function xo(t){const e=Tc();kt(e,new b_(e))}Ii.STAT_EVENT="statevent";function w_(t,e){Pt.call(this,Ii.STAT_EVENT,t),this.stat=e}St(w_,Pt);function Vt(t){const e=Tc();kt(e,new w_(e,t))}Ii.Qa="timingevent";function E_(t,e){Pt.call(this,Ii.Qa,t),this.size=e}St(E_,Pt);function aa(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return pe.setTimeout(function(){t()},e)}var kc={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},T_={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Wd(){}Wd.prototype.h=null;function Om(t){return t.h||(t.h=t.i())}function k_(){}var la={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Kd(){Pt.call(this,"d")}St(Kd,Pt);function Gd(){Pt.call(this,"c")}St(Gd,Pt);var Sh;function Ac(){}St(Ac,Wd);Ac.prototype.g=function(){return new XMLHttpRequest};Ac.prototype.i=function(){return{}};Sh=new Ac;function ca(t,e,s,n){this.l=t,this.j=e,this.m=s,this.U=n||1,this.S=new Lo(this),this.O=AC,t=bh?125:void 0,this.T=new wc(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new A_}function A_(){this.i=null,this.g="",this.h=!1}var AC=45e3,Ih={},Ml={};ee=ca.prototype;ee.setTimeout=function(t){this.O=t};function Ch(t,e,s){t.K=1,t.v=Ic(sn(e)),t.s=s,t.P=!0,S_(t,null)}function S_(t,e){t.F=Date.now(),ua(t),t.A=sn(t.v);var s=t.A,n=t.U;Array.isArray(n)||(n=[String(n)]),M_(s.i,"t",n),t.C=0,s=t.l.H,t.h=new A_,t.g=tb(t.l,s?e:null,!t.s),0<t.N&&(t.L=new bC(Nt(t.La,t,t.g),t.N)),v_(t.S,t.g,"readystatechange",t.ib),e=t.H?a_(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),xo(),wC(t.j,t.u,t.A,t.m,t.U,t.s)}ee.ib=function(t){t=t.target;const e=this.L;e&&Ws(t)==3?e.l():this.La(t)};ee.La=function(t){try{if(t==this.g)e:{const c=Ws(this.g);var e=this.g.Ea();const d=this.g.aa();if(!(3>c)&&(c!=3||bh||this.g&&(this.h.h||this.g.fa()||Rm(this.g)))){this.I||c!=4||e==7||(e==8||0>=d?xo(3):xo(2)),Sc(this);var s=this.g.aa();this.Y=s;t:if(I_(this)){var n=Rm(this.g);t="";var i=n.length,r=Ws(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ti(this),yo(this);var o="";break t}this.h.i=new pe.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(n[e],{stream:r&&e==i-1});n.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=s==200,EC(this.j,this.u,this.A,this.m,this.U,c,s),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Nl(a)){var u=a;break t}}u=null}if(s=u)Ki(this.j,this.m,s,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Dh(this,s);else{this.i=!1,this.o=3,Vt(12),ti(this),yo(this);break e}}this.P?(C_(this,c,o),bh&&this.i&&c==3&&(v_(this.S,this.T,"tick",this.hb),this.T.start())):(Ki(this.j,this.m,o,null),Dh(this,o)),c==4&&ti(this),this.i&&!this.I&&(c==4?X_(this.l,this):(this.i=!1,ua(this)))}else s==400&&0<o.indexOf("Unknown SID")?(this.o=3,Vt(12)):(this.o=0,Vt(13)),ti(this),yo(this)}}}catch{}finally{}};function I_(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function C_(t,e,s){let n=!0,i;for(;!t.I&&t.C<s.length;)if(i=SC(t,s),i==Ml){e==4&&(t.o=4,Vt(14),n=!1),Ki(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Ih){t.o=4,Vt(15),Ki(t.j,t.m,s,"[Invalid Chunk]"),n=!1;break}else Ki(t.j,t.m,i,null),Dh(t,i);I_(t)&&i!=Ml&&i!=Ih&&(t.h.g="",t.C=0),e!=4||s.length!=0||t.h.h||(t.o=1,Vt(16),n=!1),t.i=t.i&&n,n?0<s.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+s.length),tf(e),e.K=!0,Vt(11))):(Ki(t.j,t.m,s,"[Invalid Chunked Response]"),ti(t),yo(t))}ee.hb=function(){if(this.g){var t=Ws(this.g),e=this.g.fa();this.C<e.length&&(Sc(this),C_(this,t,e),this.i&&t!=4&&ua(this))}};function SC(t,e){var s=t.C,n=e.indexOf(`
`,s);return n==-1?Ml:(s=Number(e.substring(s,n)),isNaN(s)?Ih:(n+=1,n+s>e.length?Ml:(e=e.substr(n,s),t.C=n+s,e)))}ee.cancel=function(){this.I=!0,ti(this)};function ua(t){t.V=Date.now()+t.O,D_(t,t.O)}function D_(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=aa(Nt(t.gb,t),e)}function Sc(t){t.B&&(pe.clearTimeout(t.B),t.B=null)}ee.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(TC(this.j,this.A),this.K!=2&&(xo(),Vt(17)),ti(this),this.o=2,yo(this)):D_(this,this.V-t)};function yo(t){t.l.G==0||t.I||X_(t.l,t)}function ti(t){Sc(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,zd(t.T),__(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Dh(t,e){try{var s=t.l;if(s.G!=0&&(s.g==t||$h(s.h,t))){if(!t.J&&$h(s.h,t)&&s.G==3){try{var n=s.Fa.g.parse(e)}catch{n=null}if(Array.isArray(n)&&n.length==3){var i=n;if(i[0]==0){e:if(!s.u){if(s.g)if(s.g.F+3e3<t.F)xl(s),$c(s);else break e;ef(s),Vt(18)}}else s.Ba=i[1],0<s.Ba-s.T&&37500>i[2]&&s.L&&s.A==0&&!s.v&&(s.v=aa(Nt(s.cb,s),6e3));if(1>=x_(s.h)&&s.ja){try{s.ja()}catch{}s.ja=void 0}}else si(s,11)}else if((t.J||s.g==t)&&xl(s),!Nl(e))for(i=s.Fa.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(s.T=u[0],u=u[1],s.G==2)if(u[0]=="c"){s.I=u[1],s.ka=u[2];const c=u[3];c!=null&&(s.ma=c,s.j.info("VER="+s.ma));const d=u[4];d!=null&&(s.Ca=d,s.j.info("SVER="+s.Ca));const f=u[5];f!=null&&typeof f=="number"&&0<f&&(n=1.5*f,s.J=n,s.j.info("backChannelRequestTimeoutMs_="+n)),n=s;const p=t.g;if(p){const b=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(b){var r=n.h;r.g||b.indexOf("spdy")==-1&&b.indexOf("quic")==-1&&b.indexOf("h2")==-1||(r.j=r.l,r.g=new Set,r.h&&(Qd(r,r.h),r.h=null))}if(n.D){const _=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(n.za=_,Xe(n.F,n.D,_))}}s.G=3,s.l&&s.l.xa(),s.$&&(s.P=Date.now()-t.F,s.j.info("Handshake RTT: "+s.P+"ms")),n=s;var o=t;if(n.sa=eb(n,n.H?n.ka:null,n.V),o.J){V_(n.h,o);var a=o,l=n.J;l&&a.setTimeout(l),a.B&&(Sc(a),ua(a)),n.g=o}else Q_(n);0<s.i.length&&Oc(s)}else u[0]!="stop"&&u[0]!="close"||si(s,7);else s.G==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?si(s,7):Zd(s):u[0]!="noop"&&s.l&&s.l.wa(u),s.A=0)}}xo(4)}catch{}}function IC(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(yc(t)){for(var e=[],s=t.length,n=0;n<s;n++)e.push(t[n]);return e}e=[],s=0;for(n in t)e[s++]=t[n];return e}function CC(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(yc(t)||typeof t=="string"){var e=[];t=t.length;for(var s=0;s<t;s++)e.push(s);return e}e=[],s=0;for(const n in t)e[s++]=n;return e}}}function $_(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(yc(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var s=CC(t),n=IC(t),i=n.length,r=0;r<i;r++)e.call(void 0,n[r],s&&s[r],t)}var O_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function DC(t,e){if(t){t=t.split("&");for(var s=0;s<t.length;s++){var n=t[s].indexOf("="),i=null;if(0<=n){var r=t[s].substring(0,n);i=t[s].substring(n+1)}else r=t[s];e(r,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function di(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof di){this.h=e!==void 0?e:t.h,Rl(this,t.j),this.s=t.s,this.g=t.g,Ll(this,t.m),this.l=t.l,e=t.i;var s=new Vo;s.i=e.i,e.g&&(s.g=new Map(e.g),s.h=e.h),Nm(this,s),this.o=t.o}else t&&(s=String(t).match(O_))?(this.h=!!e,Rl(this,s[1]||"",!0),this.s=io(s[2]||""),this.g=io(s[3]||"",!0),Ll(this,s[4]),this.l=io(s[5]||"",!0),Nm(this,s[6]||"",!0),this.o=io(s[7]||"")):(this.h=!!e,this.i=new Vo(null,this.h))}di.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ro(e,Pm,!0),":");var s=this.g;return(s||e=="file")&&(t.push("//"),(e=this.s)&&t.push(ro(e,Pm,!0),"@"),t.push(encodeURIComponent(String(s)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s=this.m,s!=null&&t.push(":",String(s))),(s=this.l)&&(this.g&&s.charAt(0)!="/"&&t.push("/"),t.push(ro(s,s.charAt(0)=="/"?NC:OC,!0))),(s=this.i.toString())&&t.push("?",s),(s=this.o)&&t.push("#",ro(s,MC)),t.join("")};function sn(t){return new di(t)}function Rl(t,e,s){t.j=s?io(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ll(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Nm(t,e,s){e instanceof Vo?(t.i=e,RC(t.i,t.h)):(s||(e=ro(e,PC)),t.i=new Vo(e,t.h))}function Xe(t,e,s){t.i.set(e,s)}function Ic(t){return Xe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function io(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ro(t,e,s){return typeof t=="string"?(t=encodeURI(t).replace(e,$C),s&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function $C(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Pm=/[#\/\?@]/g,OC=/[#\?:]/g,NC=/[#\?]/g,PC=/[#\?@]/g,MC=/#/g;function Vo(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Bn(t){t.g||(t.g=new Map,t.h=0,t.i&&DC(t.i,function(e,s){t.add(decodeURIComponent(e.replace(/\+/g," ")),s)}))}ee=Vo.prototype;ee.add=function(t,e){Bn(this),this.i=null,t=Vr(this,t);var s=this.g.get(t);return s||this.g.set(t,s=[]),s.push(e),this.h+=1,this};function N_(t,e){Bn(t),e=Vr(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function P_(t,e){return Bn(t),e=Vr(t,e),t.g.has(e)}ee.forEach=function(t,e){Bn(this),this.g.forEach(function(s,n){s.forEach(function(i){t.call(e,i,n,this)},this)},this)};ee.oa=function(){Bn(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),s=[];for(let n=0;n<e.length;n++){const i=t[n];for(let r=0;r<i.length;r++)s.push(e[n])}return s};ee.W=function(t){Bn(this);let e=[];if(typeof t=="string")P_(this,t)&&(e=e.concat(this.g.get(Vr(this,t))));else{t=Array.from(this.g.values());for(let s=0;s<t.length;s++)e=e.concat(t[s])}return e};ee.set=function(t,e){return Bn(this),this.i=null,t=Vr(this,t),P_(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};ee.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function M_(t,e,s){N_(t,e),0<s.length&&(t.i=null,t.g.set(Vr(t,e),Ld(s)),t.h+=s.length)}ee.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var s=0;s<e.length;s++){var n=e[s];const r=encodeURIComponent(String(n)),o=this.W(n);for(n=0;n<o.length;n++){var i=r;o[n]!==""&&(i+="="+encodeURIComponent(String(o[n]))),t.push(i)}}return this.i=t.join("&")};function Vr(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function RC(t,e){e&&!t.j&&(Bn(t),t.i=null,t.g.forEach(function(s,n){var i=n.toLowerCase();n!=i&&(N_(this,n),M_(this,i,s))},t)),t.j=e}var LC=class{constructor(e,s){this.h=e,this.g=s}};function R_(t){this.l=t||xC,pe.PerformanceNavigationTiming?(t=pe.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(pe.g&&pe.g.Ga&&pe.g.Ga()&&pe.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var xC=10;function L_(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function x_(t){return t.h?1:t.g?t.g.size:0}function $h(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Qd(t,e){t.g?t.g.add(e):t.h=e}function V_(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}R_.prototype.cancel=function(){if(this.i=F_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function F_(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const s of t.g.values())e=e.concat(s.D);return e}return Ld(t.i)}function Yd(){}Yd.prototype.stringify=function(t){return pe.JSON.stringify(t,void 0)};Yd.prototype.parse=function(t){return pe.JSON.parse(t,void 0)};function VC(){this.g=new Yd}function FC(t,e,s){const n=s||"";try{$_(t,function(i,r){let o=i;ra(i)&&(o=Hd(i)),e.push(n+r+"="+encodeURIComponent(o))})}catch(i){throw e.push(n+"type="+encodeURIComponent("_badmap")),i}}function UC(t,e){const s=new Ec;if(pe.Image){const n=new Image;n.onload=Va(Ua,s,n,"TestLoadImage: loaded",!0,e),n.onerror=Va(Ua,s,n,"TestLoadImage: error",!1,e),n.onabort=Va(Ua,s,n,"TestLoadImage: abort",!1,e),n.ontimeout=Va(Ua,s,n,"TestLoadImage: timeout",!1,e),pe.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=t}else e(!1)}function Ua(t,e,s,n,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(n)}catch{}}function ha(t){this.l=t.ac||null,this.j=t.jb||!1}St(ha,Wd);ha.prototype.g=function(){return new Cc(this.l,this.j)};ha.prototype.i=function(t){return function(){return t}}({});function Cc(t,e){vt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Xd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}St(Cc,vt);var Xd=0;ee=Cc.prototype;ee.open=function(t,e){if(this.readyState!=Xd)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Fo(this)};ee.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||pe).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};ee.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,da(this)),this.readyState=Xd};ee.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Fo(this)),this.g&&(this.readyState=3,Fo(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof pe.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;U_(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))};function U_(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}ee.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?da(this):Fo(this),this.readyState==3&&U_(this)}};ee.Va=function(t){this.g&&(this.response=this.responseText=t,da(this))};ee.Ua=function(t){this.g&&(this.response=t,da(this))};ee.ga=function(){this.g&&da(this)};function da(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Fo(t)}ee.setRequestHeader=function(t,e){this.v.append(t,e)};ee.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};ee.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var s=e.next();!s.done;)s=s.value,t.push(s[0]+": "+s[1]),s=e.next();return t.join(`\r
`)};function Fo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Cc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var BC=pe.JSON.parse;function et(t){vt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=B_,this.K=this.L=!1}St(et,vt);var B_="",jC=/^https?$/i,HC=["POST","PUT"];ee=et.prototype;ee.Ka=function(t){this.L=t};ee.da=function(t,e,s,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Sh.g(),this.C=this.u?Om(this.u):Om(Sh),this.g.onreadystatechange=Nt(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(r){Mm(this,r);return}if(t=s||"",s=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var i in n)s.set(i,n[i]);else if(typeof n.keys=="function"&&typeof n.get=="function")for(const r of n.keys())s.set(r,n.get(r));else throw Error("Unknown input type for opt_headers: "+String(n));n=Array.from(s.keys()).find(r=>r.toLowerCase()=="content-type"),i=pe.FormData&&t instanceof pe.FormData,!(0<=n_(HC,e))||n||i||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,o]of s)this.g.setRequestHeader(r,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{z_(this),0<this.B&&((this.K=zC(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Nt(this.qa,this)):this.A=qd(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(r){Mm(this,r)}};function zC(t){return pr&&aC()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}ee.qa=function(){typeof Rd<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,kt(this,"timeout"),this.abort(8))};function Mm(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,j_(t),Dc(t)}function j_(t){t.D||(t.D=!0,kt(t,"complete"),kt(t,"error"))}ee.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,kt(this,"complete"),kt(this,"abort"),Dc(this))};ee.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Dc(this,!0)),et.X.M.call(this)};ee.Ha=function(){this.s||(this.F||this.v||this.l?H_(this):this.fb())};ee.fb=function(){H_(this)};function H_(t){if(t.h&&typeof Rd<"u"&&(!t.C[1]||Ws(t)!=4||t.aa()!=2)){if(t.v&&Ws(t)==4)qd(t.Ha,0,t);else if(kt(t,"readystatechange"),Ws(t)==4){t.h=!1;try{const a=t.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var s;if(!(s=e)){var n;if(n=a===0){var i=String(t.H).match(O_)[1]||null;if(!i&&pe.self&&pe.self.location){var r=pe.self.location.protocol;i=r.substr(0,r.length-1)}n=!jC.test(i?i.toLowerCase():"")}s=n}if(s)kt(t,"complete"),kt(t,"success");else{t.m=6;try{var o=2<Ws(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.aa()+"]",j_(t)}}finally{Dc(t)}}}}function Dc(t,e){if(t.g){z_(t);const s=t.g,n=t.C[0]?Ol:null;t.g=null,t.C=null,e||kt(t,"ready");try{s.onreadystatechange=n}catch{}}}function z_(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(pe.clearTimeout(t.A),t.A=null)}function Ws(t){return t.g?t.g.readyState:0}ee.aa=function(){try{return 2<Ws(this)?this.g.status:-1}catch{return-1}};ee.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};ee.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),BC(e)}};function Rm(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case B_:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}ee.Ea=function(){return this.m};ee.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function q_(t){let e="";return Vd(t,function(s,n){e+=n,e+=":",e+=s,e+=`\r
`}),e}function Jd(t,e,s){e:{for(n in s){var n=!1;break e}n=!0}n||(s=q_(s),typeof t=="string"?s!=null&&encodeURIComponent(String(s)):Xe(t,e,s))}function Jr(t,e,s){return s&&s.internalChannelParams&&s.internalChannelParams[t]||e}function W_(t){this.Ca=0,this.i=[],this.j=new Ec,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Jr("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Jr("baseRetryDelayMs",5e3,t),this.bb=Jr("retryDelaySeedMs",1e4,t),this.$a=Jr("forwardChannelMaxRetries",2,t),this.ta=Jr("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new R_(t&&t.concurrentRequestLimit),this.Fa=new VC,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}ee=W_.prototype;ee.ma=8;ee.G=1;function Zd(t){if(K_(t),t.G==3){var e=t.U++,s=sn(t.F);Xe(s,"SID",t.I),Xe(s,"RID",e),Xe(s,"TYPE","terminate"),fa(t,s),e=new ca(t,t.j,e,void 0),e.K=2,e.v=Ic(sn(s)),s=!1,pe.navigator&&pe.navigator.sendBeacon&&(s=pe.navigator.sendBeacon(e.v.toString(),"")),!s&&pe.Image&&(new Image().src=e.v,s=!0),s||(e.g=tb(e.l,null),e.g.da(e.v)),e.F=Date.now(),ua(e)}Z_(t)}function $c(t){t.g&&(tf(t),t.g.cancel(),t.g=null)}function K_(t){$c(t),t.u&&(pe.clearTimeout(t.u),t.u=null),xl(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&pe.clearTimeout(t.m),t.m=null)}function Oc(t){L_(t.h)||t.m||(t.m=!0,m_(t.Ja,t),t.C=0)}function qC(t,e){return x_(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Za?0:t.$a)?!1:(t.m=aa(Nt(t.Ja,t,e),J_(t,t.C)),t.C++,!0)}ee.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const i=new ca(this,this.j,t,void 0);let r=this.s;if(this.S&&(r?(r=a_(r),l_(r,this.S)):r=this.S),this.o!==null||this.N||(i.H=r,r=null),this.O)e:{for(var e=0,s=0;s<this.i.length;s++){t:{var n=this.i[s];if("__data__"in n.g&&(n=n.g.__data__,typeof n=="string")){n=n.length;break t}n=void 0}if(n===void 0)break;if(e+=n,4096<e){e=s;break e}if(e===4096||s===this.i.length-1){e=s+1;break e}}e=1e3}else e=1e3;e=G_(this,i,e),s=sn(this.F),Xe(s,"RID",t),Xe(s,"CVER",22),this.D&&Xe(s,"X-HTTP-Session-Id",this.D),fa(this,s),r&&(this.N?e="headers="+encodeURIComponent(String(q_(r)))+"&"+e:this.o&&Jd(s,this.o,r)),Qd(this.h,i),this.Ya&&Xe(s,"TYPE","init"),this.O?(Xe(s,"$req",e),Xe(s,"SID","null"),i.Z=!0,Ch(i,s,null)):Ch(i,s,e),this.G=2}}else this.G==3&&(t?Lm(this,t):this.i.length==0||L_(this.h)||Lm(this))};function Lm(t,e){var s;e?s=e.m:s=t.U++;const n=sn(t.F);Xe(n,"SID",t.I),Xe(n,"RID",s),Xe(n,"AID",t.T),fa(t,n),t.o&&t.s&&Jd(n,t.o,t.s),s=new ca(t,t.j,s,t.C+1),t.o===null&&(s.H=t.s),e&&(t.i=e.D.concat(t.i)),e=G_(t,s,1e3),s.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),Qd(t.h,s),Ch(s,n,e)}function fa(t,e){t.ia&&Vd(t.ia,function(s,n){Xe(e,n,s)}),t.l&&$_({},function(s,n){Xe(e,n,s)})}function G_(t,e,s){s=Math.min(t.i.length,s);var n=t.l?Nt(t.l.Ra,t.l,t):null;e:{var i=t.i;let r=-1;for(;;){const o=["count="+s];r==-1?0<s?(r=i[0].h,o.push("ofs="+r)):r=0:o.push("ofs="+r);let a=!0;for(let l=0;l<s;l++){let u=i[l].h;const c=i[l].g;if(u-=r,0>u)r=Math.max(0,i[l].h-100),a=!1;else try{FC(c,o,"req"+u+"_")}catch{n&&n(c)}}if(a){n=o.join("&");break e}}}return t=t.i.splice(0,s),e.D=t,n}function Q_(t){t.g||t.u||(t.Z=1,m_(t.Ia,t),t.A=0)}function ef(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=aa(Nt(t.Ia,t),J_(t,t.A)),t.A++,!0)}ee.Ia=function(){if(this.u=null,Y_(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=aa(Nt(this.eb,this),t)}};ee.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Vt(10),$c(this),Y_(this))};function tf(t){t.B!=null&&(pe.clearTimeout(t.B),t.B=null)}function Y_(t){t.g=new ca(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=sn(t.sa);Xe(e,"RID","rpc"),Xe(e,"SID",t.I),Xe(e,"CI",t.L?"0":"1"),Xe(e,"AID",t.T),Xe(e,"TYPE","xmlhttp"),fa(t,e),t.o&&t.s&&Jd(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var s=t.g;t=t.ka,s.K=1,s.v=Ic(sn(e)),s.s=null,s.P=!0,S_(s,t)}ee.cb=function(){this.v!=null&&(this.v=null,$c(this),ef(this),Vt(19))};function xl(t){t.v!=null&&(pe.clearTimeout(t.v),t.v=null)}function X_(t,e){var s=null;if(t.g==e){xl(t),tf(t),t.g=null;var n=2}else if($h(t.h,e))s=e.D,V_(t.h,e),n=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(n==1){s=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;n=Tc(),kt(n,new E_(n,s)),Oc(t)}else Q_(t);else if(i=e.o,i==3||i==0&&0<t.pa||!(n==1&&qC(t,e)||n==2&&ef(t)))switch(s&&0<s.length&&(e=t.h,e.i=e.i.concat(s)),i){case 1:si(t,5);break;case 4:si(t,10);break;case 3:si(t,6);break;default:si(t,2)}}}function J_(t,e){let s=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(s*=2),s*e}function si(t,e){if(t.j.info("Error code "+e),e==2){var s=null;t.l&&(s=null);var n=Nt(t.kb,t);s||(s=new di("//www.google.com/images/cleardot.gif"),pe.location&&pe.location.protocol=="http"||Rl(s,"https"),Ic(s)),UC(s.toString(),n)}else Vt(2);t.G=0,t.l&&t.l.va(e),Z_(t),K_(t)}ee.kb=function(t){t?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function Z_(t){if(t.G=0,t.la=[],t.l){const e=F_(t.h);(e.length!=0||t.i.length!=0)&&(Am(t.la,e),Am(t.la,t.i),t.h.i.length=0,Ld(t.i),t.i.length=0),t.l.ua()}}function eb(t,e,s){var n=s instanceof di?sn(s):new di(s,void 0);if(n.g!="")e&&(n.g=e+"."+n.g),Ll(n,n.m);else{var i=pe.location;n=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var r=new di(null,void 0);n&&Rl(r,n),e&&(r.g=e),i&&Ll(r,i),s&&(r.l=s),n=r}return s=t.D,e=t.za,s&&e&&Xe(n,s,e),Xe(n,"VER",t.ma),fa(t,n),n}function tb(t,e,s){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=s&&t.Da&&!t.ra?new et(new ha({jb:!0})):new et(t.ra),e.Ka(t.H),e}function sb(){}ee=sb.prototype;ee.xa=function(){};ee.wa=function(){};ee.va=function(){};ee.ua=function(){};ee.Ra=function(){};function Vl(){if(pr&&!(10<=Number(lC)))throw Error("Environmental error: no available transport.")}Vl.prototype.g=function(t,e){return new Zt(t,e)};function Zt(t,e){vt.call(this),this.g=new W_(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!Nl(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Nl(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Fr(this)}St(Zt,vt);Zt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,s=this.h||void 0;Vt(0),t.V=e,t.ia=s||{},t.L=t.Y,t.F=eb(t,null,t.V),Oc(t)};Zt.prototype.close=function(){Zd(this.g)};Zt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var s={};s.__data__=t,t=s}else this.v&&(s={},s.__data__=Hd(t),t=s);e.i.push(new LC(e.ab++,t)),e.G==3&&Oc(e)};Zt.prototype.M=function(){this.g.l=null,delete this.j,Zd(this.g),delete this.g,Zt.X.M.call(this)};function nb(t){Kd.call(this);var e=t.__sm__;if(e){e:{for(const s in e){t=s;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}St(nb,Kd);function ib(){Gd.call(this),this.status=1}St(ib,Gd);function Fr(t){this.g=t}St(Fr,sb);Fr.prototype.xa=function(){kt(this.g,"a")};Fr.prototype.wa=function(t){kt(this.g,new nb(t))};Fr.prototype.va=function(t){kt(this.g,new ib)};Fr.prototype.ua=function(){kt(this.g,"b")};Vl.prototype.createWebChannel=Vl.prototype.g;Zt.prototype.send=Zt.prototype.u;Zt.prototype.open=Zt.prototype.m;Zt.prototype.close=Zt.prototype.close;kc.NO_ERROR=0;kc.TIMEOUT=8;kc.HTTP_ERROR=6;T_.COMPLETE="complete";k_.EventType=la;la.OPEN="a";la.CLOSE="b";la.ERROR="c";la.MESSAGE="d";vt.prototype.listen=vt.prototype.N;et.prototype.listenOnce=et.prototype.O;et.prototype.getLastError=et.prototype.Oa;et.prototype.getLastErrorCode=et.prototype.Ea;et.prototype.getStatus=et.prototype.aa;et.prototype.getResponseJson=et.prototype.Sa;et.prototype.getResponseText=et.prototype.fa;et.prototype.send=et.prototype.da;et.prototype.setWithCredentials=et.prototype.Ka;var WC=function(){return new Vl},KC=function(){return Tc()},Nu=kc,GC=T_,QC=Ii,xm={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},YC=ha,Ba=k_,XC=et;const Vm="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}It.UNAUTHENTICATED=new It(null),It.GOOGLE_CREDENTIALS=new It("google-credentials-uid"),It.FIRST_PARTY=new It("first-party-uid"),It.MOCK_USER=new It("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ur="9.15.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=new Td("@firebase/firestore");function Fm(){return bi.logLevel}function ie(t,...e){if(bi.logLevel<=xe.DEBUG){const s=e.map(sf);bi.debug(`Firestore (${Ur}): ${t}`,...s)}}function nn(t,...e){if(bi.logLevel<=xe.ERROR){const s=e.map(sf);bi.error(`Firestore (${Ur}): ${t}`,...s)}}function Oh(t,...e){if(bi.logLevel<=xe.WARN){const s=e.map(sf);bi.warn(`Firestore (${Ur}): ${t}`,...s)}}function sf(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t="Unexpected state"){const e=`FIRESTORE (${Ur}) INTERNAL ASSERTION FAILED: `+t;throw nn(e),new Error(e)}function Ke(t,e){t||fe()}function ge(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends dn{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(){this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class JC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable(()=>s(It.UNAUTHENTICATED))}shutdown(){}}class ZC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable(()=>s(this.token.user))}shutdown(){this.changeListener=null}}class eD{constructor(e){this.t=e,this.currentUser=It.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){let n=this.i;const i=l=>this.i!==n?(n=this.i,s(l)):Promise.resolve();let r=new Ys;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Ys,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=r;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Ys)}},0),o()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then(n=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ke(typeof n.accessToken=="string"),new rb(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string"),new It(e)}}class tD{constructor(e,s,n,i){this.h=e,this.l=s,this.m=n,this.g=i,this.type="FirstParty",this.user=It.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ke(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class sD{constructor(e,s,n,i){this.h=e,this.l=s,this.m=n,this.g=i}getToken(){return Promise.resolve(new tD(this.h,this.l,this.m,this.g))}start(e,s){e.enqueueRetryable(()=>s(It.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iD{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,s){const n=r=>{r.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.A;return this.A=r.token,ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?s(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>n(r))};const i=r=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.T.onInit(r=>i(r)),setTimeout(()=>{if(!this.appCheck){const r=this.T.getImmediate({optional:!0});r?i(r):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(s=>s?(Ke(typeof s.token=="string"),this.A=s.token,new nD(s.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let n=0;n<t;n++)s[n]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=rD(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<s&&(n+=e.charAt(i[r]%e.length))}return n}}function Ve(t,e){return t<e?-1:t>e?1:0}function mr(t,e,s){return t.length===e.length&&t.every((n,i)=>s(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new Q(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new Q(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<-62135596800)throw new Q(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*s));return new lt(s,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.timestamp=e}static fromTimestamp(e){return new me(e)}static min(){return new me(new lt(0,0))}static max(){return new me(new lt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,s,n){s===void 0?s=0:s>e.length&&fe(),n===void 0?n=e.length-s:n>e.length-s&&fe(),this.segments=e,this.offset=s,this.len=n}get length(){return this.len}isEqual(e){return Uo.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof Uo?e.forEach(n=>{s.push(n)}):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,n=this.limit();s<n;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const n=Math.min(e.length,s.length);for(let i=0;i<n;i++){const r=e.get(i),o=s.get(i);if(r<o)return-1;if(r>o)return 1}return e.length<s.length?-1:e.length>s.length?1:0}}class Ye extends Uo{construct(e,s,n){return new Ye(e,s,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const s=[];for(const n of e){if(n.indexOf("//")>=0)throw new Q(D.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);s.push(...n.split("/").filter(i=>i.length>0))}return new Ye(s)}static emptyPath(){return new Ye([])}}const oD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends Uo{construct(e,s,n){return new $t(e,s,n)}static isValidIdentifier(e){return oD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new $t(["__name__"])}static fromServerFormat(e){const s=[];let n="",i=0;const r=()=>{if(n.length===0)throw new Q(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(n),n=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Q(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Q(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(n+=a,i++):(r(),i++)}if(r(),o)throw new Q(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(s)}static emptyPath(){return new $t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.path=e}static fromPath(e){return new re(Ye.fromString(e))}static fromName(e){return new re(Ye.fromString(e).popFirst(5))}static empty(){return new re(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return Ye.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new re(new Ye(e.slice()))}}function aD(t,e){const s=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=me.fromTimestamp(n===1e9?new lt(s+1,0):new lt(s,n));return new Pn(i,re.empty(),e)}function lD(t){return new Pn(t.readTime,t.key,-1)}class Pn{constructor(e,s,n){this.readTime=e,this.documentKey=s,this.largestBatchId=n}static min(){return new Pn(me.min(),re.empty(),-1)}static max(){return new Pn(me.max(),re.empty(),-1)}}function cD(t,e){let s=t.readTime.compareTo(e.readTime);return s!==0?s:(s=re.comparator(t.documentKey,e.documentKey),s!==0?s:Ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pa(t){if(t.code!==D.FAILED_PRECONDITION||t.message!==uD)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)},s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)})}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new x((n,i)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(n,i)},this.catchCallback=r=>{this.wrapFailure(s,r).next(n,i)}})}toPromise(){return new Promise((e,s)=>{this.next(e,s)})}wrapUserFunction(e){try{const s=e();return s instanceof x?s:x.resolve(s)}catch(s){return x.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction(()=>e(s)):x.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction(()=>e(s)):x.reject(s)}static resolve(e){return new x((s,n)=>{s(e)})}static reject(e){return new x((s,n)=>{n(e)})}static waitFor(e){return new x((s,n)=>{let i=0,r=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++r,o&&r===i&&s()},l=>n(l))}),o=!0,r===i&&s()})}static or(e){let s=x.resolve(!1);for(const n of e)s=s.next(i=>i?x.resolve(i):n());return s}static forEach(e,s){const n=[];return e.forEach((i,r)=>{n.push(s.call(this,i,r))}),this.waitFor(n)}static mapArray(e,s){return new x((n,i)=>{const r=e.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const u=l;s(e[u]).next(c=>{o[u]=c,++a,a===r&&n(o)},c=>i(c))}})}static doWhile(e,s){return new x((n,i)=>{const r=()=>{e()===!0?s().next(()=>{r()},i):n()};r()})}}function ma(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=n=>this.ut(n),this.ct=n=>s.writeSequenceNumber(n))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}nf.at=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e,s,n,i,r,o,a,l){this.databaseId=e,this.appId=s,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class Bo{constructor(e,s){this.projectId=e,this.database=s||"(default)"}static empty(){return new Bo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Bo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(t){let e=0;for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e++;return e}function Ci(t,e){for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e(s,t[s])}function ab(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nc(t){return t==null}function Fl(t){return t===0&&1/t==-1/0}function fD(t){return typeof t=="number"&&Number.isInteger(t)&&!Fl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const s=atob(e);return new Rt(s)}static fromUint8Array(e){const s=function(n){let i="";for(let r=0;r<n.length;++r)i+=String.fromCharCode(n[r]);return i}(e);return new Rt(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const s=new Uint8Array(e.length);for(let n=0;n<e.length;n++)s[n]=e.charCodeAt(n);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const pD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mn(t){if(Ke(!!t),typeof t=="string"){let e=0;const s=pD.exec(t);if(Ke(!!s),s[1]){let i=s[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:it(t.seconds),nanos:it(t.nanos)}}function it(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gr(t){return typeof t=="string"?Rt.fromBase64String(t):Rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(t){var e,s;return((s=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||s===void 0?void 0:s.stringValue)==="server_timestamp"}function cb(t){const e=t.mapValue.fields.__previous_value__;return lb(e)?cb(e):e}function jo(t){const e=Mn(t.mapValue.fields.__local_write_time__.timestampValue);return new lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function wi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?lb(t)?4:mD(t)?9007199254740991:10:fe()}function Ls(t,e){if(t===e)return!0;const s=wi(t);if(s!==wi(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return jo(t).isEqual(jo(e));case 3:return function(n,i){if(typeof n.timestampValue=="string"&&typeof i.timestampValue=="string"&&n.timestampValue.length===i.timestampValue.length)return n.timestampValue===i.timestampValue;const r=Mn(n.timestampValue),o=Mn(i.timestampValue);return r.seconds===o.seconds&&r.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(n,i){return gr(n.bytesValue).isEqual(gr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(n,i){return it(n.geoPointValue.latitude)===it(i.geoPointValue.latitude)&&it(n.geoPointValue.longitude)===it(i.geoPointValue.longitude)}(t,e);case 2:return function(n,i){if("integerValue"in n&&"integerValue"in i)return it(n.integerValue)===it(i.integerValue);if("doubleValue"in n&&"doubleValue"in i){const r=it(n.doubleValue),o=it(i.doubleValue);return r===o?Fl(r)===Fl(o):isNaN(r)&&isNaN(o)}return!1}(t,e);case 9:return mr(t.arrayValue.values||[],e.arrayValue.values||[],Ls);case 10:return function(n,i){const r=n.mapValue.fields||{},o=i.mapValue.fields||{};if(Um(r)!==Um(o))return!1;for(const a in r)if(r.hasOwnProperty(a)&&(o[a]===void 0||!Ls(r[a],o[a])))return!1;return!0}(t,e);default:return fe()}}function Ho(t,e){return(t.values||[]).find(s=>Ls(s,e))!==void 0}function yr(t,e){if(t===e)return 0;const s=wi(t),n=wi(e);if(s!==n)return Ve(s,n);switch(s){case 0:case 9007199254740991:return 0;case 1:return Ve(t.booleanValue,e.booleanValue);case 2:return function(i,r){const o=it(i.integerValue||i.doubleValue),a=it(r.integerValue||r.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return Bm(t.timestampValue,e.timestampValue);case 4:return Bm(jo(t),jo(e));case 5:return Ve(t.stringValue,e.stringValue);case 6:return function(i,r){const o=gr(i),a=gr(r);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,r){const o=i.split("/"),a=r.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=Ve(o[l],a[l]);if(u!==0)return u}return Ve(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,r){const o=Ve(it(i.latitude),it(r.latitude));return o!==0?o:Ve(it(i.longitude),it(r.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,r){const o=i.values||[],a=r.values||[];for(let l=0;l<o.length&&l<a.length;++l){const u=yr(o[l],a[l]);if(u)return u}return Ve(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,r){if(i===ja.mapValue&&r===ja.mapValue)return 0;if(i===ja.mapValue)return 1;if(r===ja.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),l=r.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let c=0;c<a.length&&c<u.length;++c){const d=Ve(a[c],u[c]);if(d!==0)return d;const f=yr(o[a[c]],l[u[c]]);if(f!==0)return f}return Ve(a.length,u.length)}(t.mapValue,e.mapValue);default:throw fe()}}function Bm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ve(t,e);const s=Mn(t),n=Mn(e),i=Ve(s.seconds,n.seconds);return i!==0?i:Ve(s.nanos,n.nanos)}function vr(t){return Nh(t)}function Nh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Mn(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?gr(t.bytesValue).toBase64():"referenceValue"in t?(s=t.referenceValue,re.fromName(s).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=Nh(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${Nh(n.fields[a])}`;return r+"}"}(t.mapValue):fe();var e,s}function jm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ph(t){return!!t&&"integerValue"in t}function rf(t){return!!t&&"arrayValue"in t}function Hm(t){return!!t&&"nullValue"in t}function zm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ll(t){return!!t&&"mapValue"in t}function vo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ci(t.mapValue.fields,(s,n)=>e.mapValue.fields[s]=vo(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(t.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=vo(t.arrayValue.values[s]);return e}return Object.assign({},t)}function mD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,s){this.position=e,this.inclusive=s}}function qm(t,e,s){let n=0;for(let i=0;i<t.position.length;i++){const r=e[i],o=t.position[i];if(r.field.isKeyField()?n=re.comparator(re.fromName(o.referenceValue),s.key):n=yr(o,s.data.field(r.field)),r.dir==="desc"&&(n*=-1),n!==0)break}return n}function Wm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let s=0;s<t.position.length;s++)if(!Ls(t.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{}class rt extends ub{constructor(e,s,n){super(),this.field=e,this.op=s,this.value=n}static create(e,s,n){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,n):new vD(e,s,n):s==="array-contains"?new wD(e,n):s==="in"?new ED(e,n):s==="not-in"?new TD(e,n):s==="array-contains-any"?new kD(e,n):new rt(e,s,n)}static createKeyFieldInFilter(e,s,n){return s==="in"?new _D(e,n):new bD(e,n)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&this.matchesComparison(yr(s,this.value)):s!==null&&wi(this.value)===wi(s)&&this.matchesComparison(yr(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class _s extends ub{constructor(e,s){super(),this.filters=e,this.op=s,this.ht=null}static create(e,s){return new _s(e,s)}matches(e){return hb(this)?this.filters.find(s=>!s.matches(e))===void 0:this.filters.find(s=>s.matches(e))!==void 0}getFlattenedFilters(){return this.ht!==null||(this.ht=this.filters.reduce((e,s)=>e.concat(s.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(s=>s.isInequality());return e!==null?e.field:null}lt(e){for(const s of this.getFlattenedFilters())if(e(s))return s;return null}}function hb(t){return t.op==="and"}function gD(t){return yD(t)&&hb(t)}function yD(t){for(const e of t.filters)if(e instanceof _s)return!1;return!0}function db(t){if(t instanceof rt)return t.field.canonicalString()+t.op.toString()+vr(t.value);{const e=t.filters.map(s=>db(s)).join(",");return`${t.op}(${e})`}}function fb(t,e){return t instanceof rt?function(s,n){return n instanceof rt&&s.op===n.op&&s.field.isEqual(n.field)&&Ls(s.value,n.value)}(t,e):t instanceof _s?function(s,n){return n instanceof _s&&s.op===n.op&&s.filters.length===n.filters.length?s.filters.reduce((i,r,o)=>i&&fb(r,n.filters[o]),!0):!1}(t,e):void fe()}function pb(t){return t instanceof rt?function(e){return`${e.field.canonicalString()} ${e.op} ${vr(e.value)}`}(t):t instanceof _s?function(e){return e.op.toString()+" {"+e.getFilters().map(pb).join(" ,")+"}"}(t):"Filter"}class vD extends rt{constructor(e,s,n){super(e,s,n),this.key=re.fromName(n.referenceValue)}matches(e){const s=re.comparator(e.key,this.key);return this.matchesComparison(s)}}class _D extends rt{constructor(e,s){super(e,"in",s),this.keys=mb("in",s)}matches(e){return this.keys.some(s=>s.isEqual(e.key))}}class bD extends rt{constructor(e,s){super(e,"not-in",s),this.keys=mb("not-in",s)}matches(e){return!this.keys.some(s=>s.isEqual(e.key))}}function mb(t,e){var s;return(((s=e.arrayValue)===null||s===void 0?void 0:s.values)||[]).map(n=>re.fromName(n.referenceValue))}class wD extends rt{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return rf(s)&&Ho(s.arrayValue,this.value)}}class ED extends rt{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&Ho(this.value.arrayValue,s)}}class TD extends rt{constructor(e,s){super(e,"not-in",s)}matches(e){if(Ho(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&!Ho(this.value.arrayValue,s)}}class kD extends rt{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!rf(s)||!s.arrayValue.values)&&s.arrayValue.values.some(n=>Ho(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,s="asc"){this.field=e,this.dir=s}}function AD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,s){this.comparator=e,this.root=s||wt.EMPTY}insert(e,s){return new ht(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wt.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const n=this.comparator(e,s.key);if(n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}indexOf(e){let s=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return s+n.left.size;i<0?n=n.left:(s+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((s,n)=>(e(s,n),!1))}toString(){const e=[];return this.inorderTraversal((s,n)=>(e.push(`${s}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ha(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ha(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ha(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ha(this.root,e,this.comparator,!0)}}class Ha{constructor(e,s,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=s?n(e.key,s):1,s&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wt{constructor(e,s,n,i,r){this.key=e,this.value=s,this.color=n??wt.RED,this.left=i??wt.EMPTY,this.right=r??wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,n,i,r){return new wt(e??this.key,s??this.value,n??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,s,n),null):r===0?i.copy(null,s,null,null,null):i.copy(null,null,null,null,i.right.insert(e,s,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let n,i=this;if(s(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,s),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),s(e,i.key)===0){if(i.right.isEmpty())return wt.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,s))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fe();const e=this.left.check();if(e!==this.right.check())throw fe();return e+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1;wt.EMPTY=new class{constructor(){this.size=0}get key(){throw fe()}get value(){throw fe()}get color(){throw fe()}get left(){throw fe()}get right(){throw fe()}copy(t,e,s,n,i){return this}insert(t,e,s){return new wt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((s,n)=>(e(s),!1))}forEachInRange(e,s){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;s(i.key)}}forEachWhile(e,s){let n;for(n=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new Km(this.data.getIterator())}getIteratorFrom(e){return new Km(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach(n=>{s=s.add(n)}),s}isEqual(e){if(!(e instanceof ct)||this.size!==e.size)return!1;const s=this.data.getIterator(),n=e.data.getIterator();for(;s.hasNext();){const i=s.getNext().key,r=n.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(s=>{e.push(s)}),e}toString(){const e=[];return this.forEach(s=>e.push(s)),"SortedSet("+e.toString()+")"}copy(e){const s=new ct(this.comparator);return s.data=e,s}}class Km{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new is([])}unionWith(e){let s=new ct($t.comparator);for(const n of this.fields)s=s.add(n);for(const n of e)s=s.add(n);return new is(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return mr(this.fields,e.fields,(s,n)=>s.isEqual(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.value=e}static empty(){return new Kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let n=0;n<e.length-1;++n)if(s=(s.mapValue.fields||{})[e.get(n)],!ll(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=vo(s)}setAll(e){let s=$t.emptyPath(),n={},i=[];e.forEach((o,a)=>{if(!s.isImmediateParentOf(a)){const l=this.getFieldsMap(s);this.applyChanges(l,n,i),n={},i=[],s=a.popLast()}o?n[a.lastSegment()]=vo(o):i.push(a.lastSegment())});const r=this.getFieldsMap(s);this.applyChanges(r,n,i)}delete(e){const s=this.field(e.popLast());ll(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return Ls(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=s.mapValue.fields[e.get(n)];ll(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},s.mapValue.fields[e.get(n)]=i),s=i}return s.mapValue.fields}applyChanges(e,s,n){Ci(s,(i,r)=>e[i]=r);for(const i of n)delete e[i]}clone(){return new Kt(vo(this.value))}}function gb(t){const e=[];return Ci(t.fields,(s,n)=>{const i=new $t([s]);if(ll(n)){const r=gb(n.mapValue).fields;if(r.length===0)e.push(i);else for(const o of r)e.push(i.child(o))}else e.push(i)}),new is(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,s,n,i,r,o,a){this.key=e,this.documentType=s,this.version=n,this.readTime=i,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ct(e,0,me.min(),me.min(),me.min(),Kt.empty(),0)}static newFoundDocument(e,s,n,i){return new Ct(e,1,s,me.min(),n,i,0)}static newNoDocument(e,s){return new Ct(e,2,s,me.min(),me.min(),Kt.empty(),0)}static newUnknownDocument(e,s){return new Ct(e,3,s,me.min(),me.min(),Kt.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,s=null,n=[],i=[],r=null,o=null,a=null){this.path=e,this.collectionGroup=s,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=o,this.endAt=a,this.ft=null}}function Gm(t,e=null,s=[],n=[],i=null,r=null,o=null){return new SD(t,e,s,n,i,r,o)}function of(t){const e=ge(t);if(e.ft===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map(n=>db(n)).join(","),s+="|ob:",s+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),Nc(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map(n=>vr(n)).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map(n=>vr(n)).join(",")),e.ft=s}return e.ft}function af(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<t.orderBy.length;s++)if(!AD(t.orderBy[s],e.orderBy[s]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let s=0;s<t.filters.length;s++)if(!fb(t.filters[s],e.filters[s]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Wm(t.startAt,e.startAt)&&Wm(t.endAt,e.endAt)}function Mh(t){return re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,s=null,n=[],i=[],r=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.dt=null,this._t=null,this.startAt,this.endAt}}function ID(t,e,s,n,i,r,o,a){return new Br(t,e,s,n,i,r,o,a)}function lf(t){return new Br(t)}function Qm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function cf(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Pc(t){for(const e of t.filters){const s=e.getFirstInequalityField();if(s!==null)return s}return null}function yb(t){return t.collectionGroup!==null}function rr(t){const e=ge(t);if(e.dt===null){e.dt=[];const s=Pc(e),n=cf(e);if(s!==null&&n===null)s.isKeyField()||e.dt.push(new ir(s)),e.dt.push(new ir($t.keyField(),"asc"));else{let i=!1;for(const r of e.explicitOrderBy)e.dt.push(r),r.field.isKeyField()&&(i=!0);if(!i){const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new ir($t.keyField(),r))}}}return e.dt}function rn(t){const e=ge(t);if(!e._t)if(e.limitType==="F")e._t=Gm(e.path,e.collectionGroup,rr(e),e.filters,e.limit,e.startAt,e.endAt);else{const s=[];for(const r of rr(e)){const o=r.dir==="desc"?"asc":"desc";s.push(new ir(r.field,o))}const n=e.endAt?new Ul(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ul(e.startAt.position,e.startAt.inclusive):null;e._t=Gm(e.path,e.collectionGroup,s,e.filters,e.limit,n,i)}return e._t}function Rh(t,e){e.getFirstInequalityField(),Pc(t);const s=t.filters.concat([e]);return new Br(t.path,t.collectionGroup,t.explicitOrderBy.slice(),s,t.limit,t.limitType,t.startAt,t.endAt)}function Bl(t,e,s){return new Br(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,s,t.startAt,t.endAt)}function Mc(t,e){return af(rn(t),rn(e))&&t.limitType===e.limitType}function vb(t){return`${of(rn(t))}|lt:${t.limitType}`}function Lh(t){return`Query(target=${function(e){let s=e.path.canonicalString();return e.collectionGroup!==null&&(s+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(s+=`, filters: [${e.filters.map(n=>pb(n)).join(", ")}]`),Nc(e.limit)||(s+=", limit: "+e.limit),e.orderBy.length>0&&(s+=`, orderBy: [${e.orderBy.map(n=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(n)).join(", ")}]`),e.startAt&&(s+=", startAt: ",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map(n=>vr(n)).join(",")),e.endAt&&(s+=", endAt: ",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map(n=>vr(n)).join(",")),`Target(${s})`}(rn(t))}; limitType=${t.limitType})`}function uf(t,e){return e.isFoundDocument()&&function(s,n){const i=n.key.path;return s.collectionGroup!==null?n.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):re.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,n){for(const i of rr(s))if(!i.field.isKeyField()&&n.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,n){for(const i of s.filters)if(!i.matches(n))return!1;return!0}(t,e)&&function(s,n){return!(s.startAt&&!function(i,r,o){const a=qm(i,r,o);return i.inclusive?a<=0:a<0}(s.startAt,rr(s),n)||s.endAt&&!function(i,r,o){const a=qm(i,r,o);return i.inclusive?a>=0:a>0}(s.endAt,rr(s),n))}(t,e)}function CD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function _b(t){return(e,s)=>{let n=!1;for(const i of rr(t)){const r=DD(i,e,s);if(r!==0)return r;n=n||i.field.isKeyField()}return 0}}function DD(t,e,s){const n=t.field.isKeyField()?re.comparator(e.key,s.key):function(i,r,o){const a=r.data.field(i),l=o.data.field(i);return a!==null&&l!==null?yr(a,l):fe()}(t.field,e,s);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return fe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(t,e){if(t.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fl(e)?"-0":e}}function wb(t){return{integerValue:""+t}}function $D(t,e){return fD(e)?wb(e):bb(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(){this._=void 0}}function OD(t,e,s){return t instanceof jl?function(n,i){const r={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}};return i&&(r.fields.__previous_value__=i),{mapValue:r}}(s,e):t instanceof _r?Tb(t,e):t instanceof br?kb(t,e):function(n,i){const r=Eb(n,i),o=Ym(r)+Ym(n.gt);return Ph(r)&&Ph(n.gt)?wb(o):bb(n.yt,o)}(t,e)}function ND(t,e,s){return t instanceof _r?Tb(t,e):t instanceof br?kb(t,e):s}function Eb(t,e){return t instanceof Hl?Ph(s=e)||function(n){return!!n&&"doubleValue"in n}(s)?e:{integerValue:0}:null;var s}class jl extends Rc{}class _r extends Rc{constructor(e){super(),this.elements=e}}function Tb(t,e){const s=Ab(e);for(const n of t.elements)s.some(i=>Ls(i,n))||s.push(n);return{arrayValue:{values:s}}}class br extends Rc{constructor(e){super(),this.elements=e}}function kb(t,e){let s=Ab(e);for(const n of t.elements)s=s.filter(i=>!Ls(i,n));return{arrayValue:{values:s}}}class Hl extends Rc{constructor(e,s){super(),this.yt=e,this.gt=s}}function Ym(t){return it(t.integerValue||t.doubleValue)}function Ab(t){return rf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e,s){this.field=e,this.transform=s}}function PD(t,e){return t.field.isEqual(e.field)&&function(s,n){return s instanceof _r&&n instanceof _r||s instanceof br&&n instanceof br?mr(s.elements,n.elements,Ls):s instanceof Hl&&n instanceof Hl?Ls(s.gt,n.gt):s instanceof jl&&n instanceof jl}(t.transform,e.transform)}class MD{constructor(e,s){this.version=e,this.transformResults=s}}class rs{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new rs}static exists(e){return new rs(void 0,e)}static updateTime(e){return new rs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Lc{}function Ib(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hf(t.key,rs.none()):new ga(t.key,t.data,rs.none());{const s=t.data,n=Kt.empty();let i=new ct($t.comparator);for(let r of e.fields)if(!i.has(r)){let o=s.field(r);o===null&&r.length>1&&(r=r.popLast(),o=s.field(r)),o===null?n.delete(r):n.set(r,o),i=i.add(r)}return new jn(t.key,n,new is(i.toArray()),rs.none())}}function RD(t,e,s){t instanceof ga?function(n,i,r){const o=n.value.clone(),a=Jm(n.fieldTransforms,i,r.transformResults);o.setAll(a),i.convertToFoundDocument(r.version,o).setHasCommittedMutations()}(t,e,s):t instanceof jn?function(n,i,r){if(!cl(n.precondition,i))return void i.convertToUnknownDocument(r.version);const o=Jm(n.fieldTransforms,i,r.transformResults),a=i.data;a.setAll(Cb(n)),a.setAll(o),i.convertToFoundDocument(r.version,a).setHasCommittedMutations()}(t,e,s):function(n,i,r){i.convertToNoDocument(r.version).setHasCommittedMutations()}(0,e,s)}function _o(t,e,s,n){return t instanceof ga?function(i,r,o,a){if(!cl(i.precondition,r))return o;const l=i.value.clone(),u=Zm(i.fieldTransforms,a,r);return l.setAll(u),r.convertToFoundDocument(r.version,l).setHasLocalMutations(),null}(t,e,s,n):t instanceof jn?function(i,r,o,a){if(!cl(i.precondition,r))return o;const l=Zm(i.fieldTransforms,a,r),u=r.data;return u.setAll(Cb(i)),u.setAll(l),r.convertToFoundDocument(r.version,u).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(c=>c.field))}(t,e,s,n):function(i,r,o){return cl(i.precondition,r)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):o}(t,e,s)}function LD(t,e){let s=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),r=Eb(n.transform,i||null);r!=null&&(s===null&&(s=Kt.empty()),s.set(n.field,r))}return s||null}function Xm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,n){return s===void 0&&n===void 0||!(!s||!n)&&mr(s,n,(i,r)=>PD(i,r))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ga extends Lc{constructor(e,s,n,i=[]){super(),this.key=e,this.value=s,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class jn extends Lc{constructor(e,s,n,i,r=[]){super(),this.key=e,this.data=s,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Cb(t){const e=new Map;return t.fieldMask.fields.forEach(s=>{if(!s.isEmpty()){const n=t.data.field(s);e.set(s,n)}}),e}function Jm(t,e,s){const n=new Map;Ke(t.length===s.length);for(let i=0;i<s.length;i++){const r=t[i],o=r.transform,a=e.data.field(r.field);n.set(r.field,ND(o,a,s[i]))}return n}function Zm(t,e,s){const n=new Map;for(const i of t){const r=i.transform,o=s.data.field(i.field);n.set(i.field,OD(r,o,e))}return n}class hf extends Lc{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xD extends Lc{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt,Ce;function FD(t){switch(t){default:return fe();case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0}}function Db(t){if(t===void 0)return nn("GRPC error has no .code"),D.UNKNOWN;switch(t){case nt.OK:return D.OK;case nt.CANCELLED:return D.CANCELLED;case nt.UNKNOWN:return D.UNKNOWN;case nt.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case nt.INTERNAL:return D.INTERNAL;case nt.UNAVAILABLE:return D.UNAVAILABLE;case nt.UNAUTHENTICATED:return D.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case nt.NOT_FOUND:return D.NOT_FOUND;case nt.ALREADY_EXISTS:return D.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return D.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case nt.ABORTED:return D.ABORTED;case nt.OUT_OF_RANGE:return D.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return D.UNIMPLEMENTED;case nt.DATA_LOSS:return D.DATA_LOSS;default:return fe()}}(Ce=nt||(nt={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),n=this.inner[s];if(n!==void 0){for(const[i,r]of n)if(this.equalsFn(i,e))return r}}has(e){return this.get(e)!==void 0}set(e,s){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,s]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,s]);i.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),n=this.inner[s];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[s]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ci(this.inner,(s,n)=>{for(const[i,r]of n)e(i,r)})}isEmpty(){return ab(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD=new ht(re.comparator);function on(){return UD}const $b=new ht(re.comparator);function oo(...t){let e=$b;for(const s of t)e=e.insert(s.key,s);return e}function Ob(t){let e=$b;return t.forEach((s,n)=>e=e.insert(s,n.overlayedDocument)),e}function ni(){return bo()}function Nb(){return bo()}function bo(){return new jr(t=>t.toString(),(t,e)=>t.isEqual(e))}const BD=new ht(re.comparator),jD=new ct(re.comparator);function Se(...t){let e=jD;for(const s of t)e=e.add(s);return e}const HD=new ct(Ve);function Pb(){return HD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,s,n,i,r){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,s,n){const i=new Map;return i.set(e,ya.createSynthesizedTargetChangeForCurrentChange(e,s,n)),new xc(me.min(),i,Pb(),on(),Se())}}class ya{constructor(e,s,n,i,r){this.resumeToken=e,this.current=s,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,s,n){return new ya(n,s,Se(),Se(),Se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,s,n,i){this.It=e,this.removedTargetIds=s,this.key=n,this.Tt=i}}class Mb{constructor(e,s){this.targetId=e,this.Et=s}}class Rb{constructor(e,s,n=Rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=s,this.resumeToken=n,this.cause=i}}class eg{constructor(){this.At=0,this.Rt=sg(),this.bt=Rt.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return this.At!==0}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Se(),s=Se(),n=Se();return this.Rt.forEach((i,r)=>{switch(r){case 0:e=e.add(i);break;case 2:s=s.add(i);break;case 1:n=n.add(i);break;default:fe()}}),new ya(this.bt,this.Pt,e,s,n)}xt(){this.vt=!1,this.Rt=sg()}Nt(e,s){this.vt=!0,this.Rt=this.Rt.insert(e,s)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class zD{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=on(),this.qt=tg(),this.Ut=new ct(Ve)}Kt(e){for(const s of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(s,e.Tt):this.Qt(s,e.key,e.Tt);for(const s of e.removedTargetIds)this.Qt(s,e.key,e.Tt)}jt(e){this.forEachTarget(e,s=>{const n=this.Wt(s);switch(e.state){case 0:this.zt(s)&&n.Dt(e.resumeToken);break;case 1:n.Mt(),n.Vt||n.xt(),n.Dt(e.resumeToken);break;case 2:n.Mt(),n.Vt||this.removeTarget(s);break;case 3:this.zt(s)&&(n.Ft(),n.Dt(e.resumeToken));break;case 4:this.zt(s)&&(this.Ht(s),n.Dt(e.resumeToken));break;default:fe()}})}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.Bt.forEach((n,i)=>{this.zt(i)&&s(i)})}Jt(e){const s=e.targetId,n=e.Et.count,i=this.Yt(s);if(i){const r=i.target;if(Mh(r))if(n===0){const o=new re(r.path);this.Qt(s,o,Ct.newNoDocument(o,me.min()))}else Ke(n===1);else this.Xt(s)!==n&&(this.Ht(s),this.Ut=this.Ut.add(s))}}Zt(e){const s=new Map;this.Bt.forEach((r,o)=>{const a=this.Yt(o);if(a){if(r.current&&Mh(a.target)){const l=new re(a.target.path);this.Lt.get(l)!==null||this.te(o,l)||this.Qt(o,l,Ct.newNoDocument(l,e))}r.St&&(s.set(o,r.Ct()),r.xt())}});let n=Se();this.qt.forEach((r,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Yt(l);return!u||u.purpose===2||(a=!1,!1)}),a&&(n=n.add(r))}),this.Lt.forEach((r,o)=>o.setReadTime(e));const i=new xc(e,s,this.Ut,this.Lt,n);return this.Lt=on(),this.qt=tg(),this.Ut=new ct(Ve),i}Gt(e,s){if(!this.zt(e))return;const n=this.te(e,s.key)?2:0;this.Wt(e).Nt(s.key,n),this.Lt=this.Lt.insert(s.key,s),this.qt=this.qt.insert(s.key,this.ee(s.key).add(e))}Qt(e,s,n){if(!this.zt(e))return;const i=this.Wt(e);this.te(e,s)?i.Nt(s,1):i.kt(s),this.qt=this.qt.insert(s,this.ee(s).delete(e)),n&&(this.Lt=this.Lt.insert(s,n))}removeTarget(e){this.Bt.delete(e)}Xt(e){const s=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let s=this.Bt.get(e);return s||(s=new eg,this.Bt.set(e,s)),s}ee(e){let s=this.qt.get(e);return s||(s=new ct(Ve),this.qt=this.qt.insert(e,s)),s}zt(e){const s=this.Yt(e)!==null;return s||ie("WatchChangeAggregator","Detected inactive target",e),s}Yt(e){const s=this.Bt.get(e);return s&&s.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new eg),this.$t.getRemoteKeysForTarget(e).forEach(s=>{this.Qt(e,s,null)})}te(e,s){return this.$t.getRemoteKeysForTarget(e).has(s)}}function tg(){return new ht(re.comparator)}function sg(){return new ht(re.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),WD=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),KD=(()=>({and:"AND",or:"OR"}))();class GD{constructor(e,s){this.databaseId=e,this.wt=s}}function zl(t,e){return t.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Lb(t,e){return t.wt?e.toBase64():e.toUint8Array()}function QD(t,e){return zl(t,e.toTimestamp())}function Os(t){return Ke(!!t),me.fromTimestamp(function(e){const s=Mn(e);return new lt(s.seconds,s.nanos)}(t))}function df(t,e){return function(s){return new Ye(["projects",s.projectId,"databases",s.database])}(t).child("documents").child(e).canonicalString()}function xb(t){const e=Ye.fromString(t);return Ke(Bb(e)),e}function xh(t,e){return df(t.databaseId,e.path)}function Pu(t,e){const s=xb(e);if(s.get(1)!==t.databaseId.projectId)throw new Q(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+t.databaseId.projectId);if(s.get(3)!==t.databaseId.database)throw new Q(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+t.databaseId.database);return new re(Vb(s))}function Vh(t,e){return df(t.databaseId,e)}function YD(t){const e=xb(t);return e.length===4?Ye.emptyPath():Vb(e)}function Fh(t){return new Ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Vb(t){return Ke(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ng(t,e,s){return{name:xh(t,e),fields:s.value.mapValue.fields}}function XD(t,e){let s;if("targetChange"in e){e.targetChange;const n=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:fe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],r=function(l,u){return l.wt?(Ke(u===void 0||typeof u=="string"),Rt.fromBase64String(u||"")):(Ke(u===void 0||u instanceof Uint8Array),Rt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?D.UNKNOWN:Db(l.code);return new Q(u,l.message||"")}(o);s=new Rb(n,i,r,a||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=Pu(t,n.document.name),r=Os(n.document.updateTime),o=n.document.createTime?Os(n.document.createTime):me.min(),a=new Kt({mapValue:{fields:n.document.fields}}),l=Ct.newFoundDocument(i,r,o,a),u=n.targetIds||[],c=n.removedTargetIds||[];s=new ul(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=Pu(t,n.document),r=n.readTime?Os(n.readTime):me.min(),o=Ct.newNoDocument(i,r),a=n.removedTargetIds||[];s=new ul([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=Pu(t,n.document),r=n.removedTargetIds||[];s=new ul([],r,i,null)}else{if(!("filter"in e))return fe();{e.filter;const n=e.filter;n.targetId;const i=n.count||0,r=new VD(i),o=n.targetId;s=new Mb(o,r)}}return s}function JD(t,e){let s;if(e instanceof ga)s={update:ng(t,e.key,e.value)};else if(e instanceof hf)s={delete:xh(t,e.key)};else if(e instanceof jn)s={update:ng(t,e.key,e.data),updateMask:a$(e.fieldMask)};else{if(!(e instanceof xD))return fe();s={verify:xh(t,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map(n=>function(i,r){const o=r.transform;if(o instanceof jl)return{fieldPath:r.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof _r)return{fieldPath:r.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof br)return{fieldPath:r.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Hl)return{fieldPath:r.field.canonicalString(),increment:o.gt};throw fe()}(0,n))),e.precondition.isNone||(s.currentDocument=function(n,i){return i.updateTime!==void 0?{updateTime:QD(n,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:fe()}(t,e.precondition)),s}function ZD(t,e){return t&&t.length>0?(Ke(e!==void 0),t.map(s=>function(n,i){let r=n.updateTime?Os(n.updateTime):Os(i);return r.isEqual(me.min())&&(r=Os(i)),new MD(r,n.transformResults||[])}(s,e))):[]}function e$(t,e){return{documents:[Vh(t,e.path)]}}function t$(t,e){const s={structuredQuery:{}},n=e.path;e.collectionGroup!==null?(s.parent=Vh(t,n),s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s.parent=Vh(t,n.popLast()),s.structuredQuery.from=[{collectionId:n.lastSegment()}]);const i=function(l){if(l.length!==0)return Ub(_s.create(l,"and"))}(e.filters);i&&(s.structuredQuery.where=i);const r=function(l){if(l.length!==0)return l.map(u=>function(c){return{field:Bi(c.field),direction:i$(c.dir)}}(u))}(e.orderBy);r&&(s.structuredQuery.orderBy=r);const o=function(l,u){return l.wt||Nc(u)?u:{value:u}}(t,e.limit);var a;return o!==null&&(s.structuredQuery.limit=o),e.startAt&&(s.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(s.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),s}function s$(t){let e=YD(t.parent);const s=t.structuredQuery,n=s.from?s.from.length:0;let i=null;if(n>0){Ke(n===1);const c=s.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let r=[];s.where&&(r=function(c){const d=Fb(c);return d instanceof _s&&gD(d)?d.getFilters():[d]}(s.where));let o=[];s.orderBy&&(o=s.orderBy.map(c=>function(d){return new ir(ji(d.field),function(f){switch(f){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction))}(c)));let a=null;s.limit&&(a=function(c){let d;return d=typeof c=="object"?c.value:c,Nc(d)?null:d}(s.limit));let l=null;s.startAt&&(l=function(c){const d=!!c.before,f=c.values||[];return new Ul(f,d)}(s.startAt));let u=null;return s.endAt&&(u=function(c){const d=!c.before,f=c.values||[];return new Ul(f,d)}(s.endAt)),ID(e,i,o,r,a,"F",l,u)}function n$(t,e){const s=function(n,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return fe()}}(0,e.purpose);return s==null?null:{"goog-listen-tags":s}}function Fb(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const s=ji(e.unaryFilter.field);return rt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const n=ji(e.unaryFilter.field);return rt.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ji(e.unaryFilter.field);return rt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=ji(e.unaryFilter.field);return rt.create(r,"!=",{nullValue:"NULL_VALUE"});default:return fe()}}(t):t.fieldFilter!==void 0?function(e){return rt.create(ji(e.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fe()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return _s.create(e.compositeFilter.filters.map(s=>Fb(s)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return fe()}}(e.compositeFilter.op))}(t):fe()}function i$(t){return qD[t]}function r$(t){return WD[t]}function o$(t){return KD[t]}function Bi(t){return{fieldPath:t.canonicalString()}}function ji(t){return $t.fromServerFormat(t.fieldPath)}function Ub(t){return t instanceof rt?function(e){if(e.op==="=="){if(zm(e.value))return{unaryFilter:{field:Bi(e.field),op:"IS_NAN"}};if(Hm(e.value))return{unaryFilter:{field:Bi(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(zm(e.value))return{unaryFilter:{field:Bi(e.field),op:"IS_NOT_NAN"}};if(Hm(e.value))return{unaryFilter:{field:Bi(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bi(e.field),op:r$(e.op),value:e.value}}}(t):t instanceof _s?function(e){const s=e.getFilters().map(n=>Ub(n));return s.length===1?s[0]:{compositeFilter:{op:o$(e.op),filters:s}}}(t):fe()}function a$(t){const e=[];return t.fields.forEach(s=>e.push(s.canonicalString())),{fieldPaths:e}}function Bb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l${constructor(e,s,n,i){this.batchId=e,this.localWriteTime=s,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,s){const n=s.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(e.key)&&RD(r,e,n[i])}}applyToLocalView(e,s){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(s=_o(n,e,s,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(s=_o(n,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const n=Nb();return this.mutations.forEach(i=>{const r=e.get(i.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=s.has(i.key)?null:a;const l=Ib(o,a);l!==null&&n.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(me.min())}),n}keys(){return this.mutations.reduce((e,s)=>e.add(s.key),Se())}isEqual(e){return this.batchId===e.batchId&&mr(this.mutations,e.mutations,(s,n)=>Xm(s,n))&&mr(this.baseMutations,e.baseMutations,(s,n)=>Xm(s,n))}}class ff{constructor(e,s,n,i){this.batch=e,this.commitVersion=s,this.mutationResults=n,this.docVersions=i}static from(e,s,n){Ke(e.mutations.length===n.length);let i=BD;const r=e.mutations;for(let o=0;o<r.length;o++)i=i.insert(r[o].key,n[o].version);return new ff(e,s,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c${constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,s,n,i,r=me.min(),o=me.min(),a=Rt.EMPTY_BYTE_STRING){this.target=e,this.targetId=s,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new fi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,s){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u${constructor(e){this.ie=e}}function h$(t){const e=s$({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Bl(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d${constructor(){this.Je=new f$}addToCollectionParentIndex(e,s){return this.Je.add(s),x.resolve()}getCollectionParents(e,s){return x.resolve(this.Je.getEntries(s))}addFieldIndex(e,s){return x.resolve()}deleteFieldIndex(e,s){return x.resolve()}getDocumentsMatchingTarget(e,s){return x.resolve(null)}getIndexType(e,s){return x.resolve(0)}getFieldIndexes(e,s){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,s){return x.resolve(Pn.min())}getMinOffsetFromCollectionGroup(e,s){return x.resolve(Pn.min())}updateCollectionGroup(e,s,n){return x.resolve()}updateIndexEntries(e,s){return x.resolve()}}class f${constructor(){this.index={}}add(e){const s=e.lastSegment(),n=e.popLast(),i=this.index[s]||new ct(Ye.comparator),r=!i.has(n);return this.index[s]=i.add(n),r}has(e){const s=e.lastSegment(),n=e.popLast(),i=this.index[s];return i&&i.has(n)}getEntries(e){return(this.index[e]||new ct(Ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new wr(0)}static vn(){return new wr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p${constructor(){this.changes=new jr(e=>e.toString(),(e,s)=>e.isEqual(s)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,Ct.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const n=this.changes.get(s);return n!==void 0?x.resolve(n):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m${constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g${constructor(e,s,n,i){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,s){let n=null;return this.documentOverlayCache.getOverlay(e,s).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,s))).next(i=>(n!==null&&_o(n.mutation,i,is.empty(),lt.now()),i))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next(n=>this.getLocalViewOfDocuments(e,n,Se()).next(()=>n))}getLocalViewOfDocuments(e,s,n=Se()){const i=ni();return this.populateOverlays(e,i,s).next(()=>this.computeViews(e,s,i,n).next(r=>{let o=oo();return r.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,s){const n=ni();return this.populateOverlays(e,n,s).next(()=>this.computeViews(e,s,n,Se()))}populateOverlays(e,s,n){const i=[];return n.forEach(r=>{s.has(r)||i.push(r)}),this.documentOverlayCache.getOverlays(e,i).next(r=>{r.forEach((o,a)=>{s.set(o,a)})})}computeViews(e,s,n,i){let r=on();const o=bo(),a=bo();return s.forEach((l,u)=>{const c=n.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof jn)?r=r.insert(u.key,u):c!==void 0&&(o.set(u.key,c.mutation.getFieldMask()),_o(c.mutation,u,c.mutation.getFieldMask(),lt.now()))}),this.recalculateAndSaveOverlays(e,r).next(l=>(l.forEach((u,c)=>o.set(u,c)),s.forEach((u,c)=>{var d;return a.set(u,new m$(c,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,s){const n=bo();let i=new ht((o,a)=>o-a),r=Se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=s.get(l);if(u===null)return;let c=n.get(l)||is.empty();c=a.applyToLocalView(u,c),n.set(l,c);const d=(i.get(a.batchId)||Se()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,d=Nb();c.forEach(f=>{if(!r.has(f)){const p=Ib(s.get(f),n.get(f));p!==null&&d.set(f,p),r=r.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return x.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,s,n){return function(i){return re.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):yb(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,n):this.getDocumentsMatchingCollectionQuery(e,s,n)}getNextDocuments(e,s,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,n,i).next(r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,n.largestBatchId,i-r.size):x.resolve(ni());let a=-1,l=r;return o.next(u=>x.forEach(u,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),r.get(c)?x.resolve():this.remoteDocumentCache.getEntry(e,c).next(f=>{l=l.insert(c,f)}))).next(()=>this.populateOverlays(e,u,r)).next(()=>this.computeViews(e,l,u,Se())).next(c=>({batchId:a,changes:Ob(c)})))})}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new re(s)).next(n=>{let i=oo();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,s,n){const i=s.collectionGroup;let r=oo();return this.indexManager.getCollectionParents(e,i).next(o=>x.forEach(o,a=>{const l=function(u,c){return new Br(c,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(s,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,n).next(u=>{u.forEach((c,d)=>{r=r.insert(c,d)})})}).next(()=>r))}getDocumentsMatchingCollectionQuery(e,s,n){let i;return this.remoteDocumentCache.getAllFromCollection(e,s.path,n).next(r=>(i=r,this.documentOverlayCache.getOverlaysForCollection(e,s.path,n.largestBatchId))).next(r=>{r.forEach((a,l)=>{const u=l.getKey();i.get(u)===null&&(i=i.insert(u,Ct.newInvalidDocument(u)))});let o=oo();return i.forEach((a,l)=>{const u=r.get(a);u!==void 0&&_o(u.mutation,l,is.empty(),lt.now()),uf(s,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y${constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,s){return x.resolve(this.Zn.get(s))}saveBundleMetadata(e,s){var n;return this.Zn.set(s.id,{id:(n=s).id,version:n.version,createTime:Os(n.createTime)}),x.resolve()}getNamedQuery(e,s){return x.resolve(this.ts.get(s))}saveNamedQuery(e,s){return this.ts.set(s.name,function(n){return{name:n.name,query:h$(n.bundledQuery),readTime:Os(n.readTime)}}(s)),x.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v${constructor(){this.overlays=new ht(re.comparator),this.es=new Map}getOverlay(e,s){return x.resolve(this.overlays.get(s))}getOverlays(e,s){const n=ni();return x.forEach(s,i=>this.getOverlay(e,i).next(r=>{r!==null&&n.set(i,r)})).next(()=>n)}saveOverlays(e,s,n){return n.forEach((i,r)=>{this.oe(e,s,r)}),x.resolve()}removeOverlaysForBatchId(e,s,n){const i=this.es.get(n);return i!==void 0&&(i.forEach(r=>this.overlays=this.overlays.remove(r)),this.es.delete(n)),x.resolve()}getOverlaysForCollection(e,s,n){const i=ni(),r=s.length+1,o=new re(s.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!s.isPrefixOf(u.path))break;u.path.length===r&&l.largestBatchId>n&&i.set(l.getKey(),l)}return x.resolve(i)}getOverlaysForCollectionGroup(e,s,n,i){let r=new ht((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===s&&u.largestBatchId>n){let c=r.get(u.largestBatchId);c===null&&(c=ni(),r=r.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=ni(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return x.resolve(a)}oe(e,s,n){const i=this.overlays.get(n.key);if(i!==null){const o=this.es.get(i.largestBatchId).delete(n.key);this.es.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new c$(s,n));let r=this.es.get(s);r===void 0&&(r=Se(),this.es.set(s,r)),this.es.set(s,r.add(n.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(){this.ns=new ct(pt.ss),this.rs=new ct(pt.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,s){const n=new pt(e,s);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}us(e,s){e.forEach(n=>this.addReference(n,s))}removeReference(e,s){this.cs(new pt(e,s))}hs(e,s){e.forEach(n=>this.removeReference(n,s))}ls(e){const s=new re(new Ye([])),n=new pt(s,e),i=new pt(s,e+1),r=[];return this.rs.forEachInRange([n,i],o=>{this.cs(o),r.push(o.key)}),r}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const s=new re(new Ye([])),n=new pt(s,e),i=new pt(s,e+1);let r=Se();return this.rs.forEachInRange([n,i],o=>{r=r.add(o.key)}),r}containsKey(e){const s=new pt(e,0),n=this.ns.firstAfterOrEqual(s);return n!==null&&e.isEqual(n.key)}}class pt{constructor(e,s){this.key=e,this._s=s}static ss(e,s){return re.comparator(e.key,s.key)||Ve(e._s,s._s)}static os(e,s){return Ve(e._s,s._s)||re.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _${constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.ws=1,this.gs=new ct(pt.ss)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,n,i){const r=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new l$(r,s,n,i);this.mutationQueue.push(o);for(const a of i)this.gs=this.gs.add(new pt(a.key,r)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(o)}lookupMutationBatch(e,s){return x.resolve(this.ys(s))}getNextMutationBatchAfterBatchId(e,s){const n=s+1,i=this.ps(n),r=i<0?0:i;return x.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?-1:this.ws-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const n=new pt(s,0),i=new pt(s,Number.POSITIVE_INFINITY),r=[];return this.gs.forEachInRange([n,i],o=>{const a=this.ys(o._s);r.push(a)}),x.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,s){let n=new ct(Ve);return s.forEach(i=>{const r=new pt(i,0),o=new pt(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([r,o],a=>{n=n.add(a._s)})}),x.resolve(this.Is(n))}getAllMutationBatchesAffectingQuery(e,s){const n=s.path,i=n.length+1;let r=n;re.isDocumentKey(r)||(r=r.child(""));const o=new pt(new re(r),0);let a=new ct(Ve);return this.gs.forEachWhile(l=>{const u=l.key.path;return!!n.isPrefixOf(u)&&(u.length===i&&(a=a.add(l._s)),!0)},o),x.resolve(this.Is(a))}Is(e){const s=[];return e.forEach(n=>{const i=this.ys(n);i!==null&&s.push(i)}),s}removeMutationBatch(e,s){Ke(this.Ts(s.batchId,"removed")===0),this.mutationQueue.shift();let n=this.gs;return x.forEach(s.mutations,i=>{const r=new pt(i.key,s.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=n})}An(e){}containsKey(e,s){const n=new pt(s,0),i=this.gs.firstAfterOrEqual(n);return x.resolve(s.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}Ts(e,s){return this.ps(e)}ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ys(e){const s=this.ps(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b${constructor(e){this.Es=e,this.docs=new ht(re.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const n=s.key,i=this.docs.get(n),r=i?i.size:0,o=this.Es(s);return this.docs=this.docs.insert(n,{document:s.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const n=this.docs.get(s);return x.resolve(n?n.document.mutableCopy():Ct.newInvalidDocument(s))}getEntries(e,s){let n=on();return s.forEach(i=>{const r=this.docs.get(i);n=n.insert(i,r?r.document.mutableCopy():Ct.newInvalidDocument(i))}),x.resolve(n)}getAllFromCollection(e,s,n){let i=on();const r=new re(s.child("")),o=this.docs.getIteratorFrom(r);for(;o.hasNext();){const{key:a,value:{document:l}}=o.getNext();if(!s.isPrefixOf(a.path))break;a.path.length>s.length+1||cD(lD(l),n)<=0||(i=i.insert(l.key,l.mutableCopy()))}return x.resolve(i)}getAllFromCollectionGroup(e,s,n,i){fe()}As(e,s){return x.forEach(this.docs,n=>s(n))}newChangeBuffer(e){return new w$(this)}getSize(e){return x.resolve(this.size)}}class w$ extends p${constructor(e){super(),this.Yn=e}applyChanges(e){const s=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?s.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(n)}),x.waitFor(s)}getFromCache(e,s){return this.Yn.getEntry(e,s)}getAllFromCache(e,s){return this.Yn.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E${constructor(e){this.persistence=e,this.Rs=new jr(s=>of(s),af),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.bs=0,this.Ps=new pf,this.targetCount=0,this.vs=wr.Pn()}forEachTarget(e,s){return this.Rs.forEach((n,i)=>s(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,s,n){return n&&(this.lastRemoteSnapshotVersion=n),s>this.bs&&(this.bs=s),x.resolve()}Dn(e){this.Rs.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.vs=new wr(s),this.highestTargetId=s),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,s){return this.Dn(s),this.targetCount+=1,x.resolve()}updateTargetData(e,s){return this.Dn(s),x.resolve()}removeTargetData(e,s){return this.Rs.delete(s.target),this.Ps.ls(s.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,s,n){let i=0;const r=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=s&&n.get(a.targetId)===null&&(this.Rs.delete(o),r.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(r).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,s){const n=this.Rs.get(s)||null;return x.resolve(n)}addMatchingKeys(e,s,n){return this.Ps.us(s,n),x.resolve()}removeMatchingKeys(e,s,n){this.Ps.hs(s,n);const i=this.persistence.referenceDelegate,r=[];return i&&s.forEach(o=>{r.push(i.markPotentiallyOrphaned(e,o))}),x.waitFor(r)}removeMatchingKeysForTargetId(e,s){return this.Ps.ls(s),x.resolve()}getMatchingKeysForTargetId(e,s){const n=this.Ps.ds(s);return x.resolve(n)}containsKey(e,s){return x.resolve(this.Ps.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T${constructor(e,s){this.Vs={},this.overlays={},this.Ss=new nf(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new E$(this),this.indexManager=new d$,this.remoteDocumentCache=function(n){return new b$(n)}(n=>this.referenceDelegate.xs(n)),this.yt=new u$(s),this.Ns=new y$(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new v$,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let n=this.Vs[e.toKey()];return n||(n=new _$(s,this.referenceDelegate),this.Vs[e.toKey()]=n),n}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,s,n){ie("MemoryPersistence","Starting transaction:",e);const i=new k$(this.Ss.next());return this.referenceDelegate.ks(),n(i).next(r=>this.referenceDelegate.Os(i).next(()=>r)).toPromise().then(r=>(i.raiseOnCommittedEvent(),r))}Ms(e,s){return x.or(Object.values(this.Vs).map(n=>()=>n.containsKey(e,s)))}}class k$ extends hD{constructor(e){super(),this.currentSequenceNumber=e}}class mf{constructor(e){this.persistence=e,this.Fs=new pf,this.$s=null}static Bs(e){return new mf(e)}get Ls(){if(this.$s)return this.$s;throw fe()}addReference(e,s,n){return this.Fs.addReference(n,s),this.Ls.delete(n.toString()),x.resolve()}removeReference(e,s,n){return this.Fs.removeReference(n,s),this.Ls.add(n.toString()),x.resolve()}markPotentiallyOrphaned(e,s){return this.Ls.add(s.toString()),x.resolve()}removeTarget(e,s){this.Fs.ls(s.targetId).forEach(i=>this.Ls.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,s.targetId).next(i=>{i.forEach(r=>this.Ls.add(r.toString()))}).next(()=>n.removeTargetData(e,s))}ks(){this.$s=new Set}Os(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Ls,n=>{const i=re.fromPath(n);return this.qs(e,i).next(r=>{r||s.removeEntry(i,me.min())})}).next(()=>(this.$s=null,s.apply(e)))}updateLimboDocument(e,s){return this.qs(e,s).next(n=>{n?this.Ls.delete(s.toString()):this.Ls.add(s.toString())})}xs(e){return 0}qs(e,s){return x.or([()=>x.resolve(this.Fs.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Ms(e,s)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,s,n,i){this.targetId=e,this.fromCache=s,this.Si=n,this.Di=i}static Ci(e,s){let n=Se(),i=Se();for(const r of s.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new gf(e,s.fromCache,n,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A${constructor(){this.xi=!1}initialize(e,s){this.Ni=e,this.indexManager=s,this.xi=!0}getDocumentsMatchingQuery(e,s,n,i){return this.ki(e,s).next(r=>r||this.Oi(e,s,i,n)).next(r=>r||this.Mi(e,s))}ki(e,s){if(Qm(s))return x.resolve(null);let n=rn(s);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(s.limit!==null&&i===1&&(s=Bl(s,null,"F"),n=rn(s)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const o=Se(...r);return this.Ni.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,n).next(l=>{const u=this.Fi(s,a);return this.$i(s,u,o,l.readTime)?this.ki(e,Bl(s,null,"F")):this.Bi(e,u,s,l)}))})))}Oi(e,s,n,i){return Qm(s)||i.isEqual(me.min())?this.Mi(e,s):this.Ni.getDocuments(e,n).next(r=>{const o=this.Fi(s,r);return this.$i(s,o,n,i)?this.Mi(e,s):(Fm()<=xe.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Lh(s)),this.Bi(e,o,s,aD(i,-1)))})}Fi(e,s){let n=new ct(_b(e));return s.forEach((i,r)=>{uf(e,r)&&(n=n.add(r))}),n}$i(e,s,n,i){if(e.limit===null)return!1;if(n.size!==s.size)return!0;const r=e.limitType==="F"?s.last():s.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Mi(e,s){return Fm()<=xe.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",Lh(s)),this.Ni.getDocumentsMatchingQuery(e,s,Pn.min())}Bi(e,s,n,i){return this.Ni.getDocumentsMatchingQuery(e,n,i).next(r=>(s.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S${constructor(e,s,n,i){this.persistence=e,this.Li=s,this.yt=i,this.qi=new ht(Ve),this.Ui=new jr(r=>of(r),af),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(n)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new g$(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",s=>e.collect(s,this.qi))}}function I$(t,e,s,n){return new S$(t,e,s,n)}async function jb(t,e){const s=ge(t);return await s.persistence.runTransaction("Handle user change","readonly",n=>{let i;return s.mutationQueue.getAllMutationBatches(n).next(r=>(i=r,s.Qi(e),s.mutationQueue.getAllMutationBatches(n))).next(r=>{const o=[],a=[];let l=Se();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of r){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return s.localDocuments.getDocuments(n,l).next(u=>({ji:u,removedBatchIds:o,addedBatchIds:a}))})})}function C$(t,e){const s=ge(t);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),r=s.Gi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const c=l.batch,d=c.keys();let f=x.resolve();return d.forEach(p=>{f=f.next(()=>u.getEntry(a,p)).next(b=>{const _=l.docVersions.get(p);Ke(_!==null),b.version.compareTo(_)<0&&(c.applyToRemoteDocument(b,l),b.isValidDocument()&&(b.setReadTime(l.commitVersion),u.addEntry(b)))})}),f.next(()=>o.mutationQueue.removeMutationBatch(a,c))}(s,n,e,r).next(()=>r.apply(n)).next(()=>s.mutationQueue.performConsistencyCheck(n)).next(()=>s.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let a=Se();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>s.localDocuments.getDocuments(n,i))})}function Hb(t){const e=ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",s=>e.Cs.getLastRemoteSnapshotVersion(s))}function D$(t,e){const s=ge(t),n=e.snapshotVersion;let i=s.qi;return s.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=s.Gi.newChangeBuffer({trackRemovals:!0});i=s.qi;const a=[];e.targetChanges.forEach((c,d)=>{const f=i.get(d);if(!f)return;a.push(s.Cs.removeMatchingKeys(r,c.removedDocuments,d).next(()=>s.Cs.addMatchingKeys(r,c.addedDocuments,d)));let p=f.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.has(d)?p=p.withResumeToken(Rt.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):c.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(c.resumeToken,n)),i=i.insert(d,p),function(b,_,A){return b.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(f,p,c)&&a.push(s.Cs.updateTargetData(r,p))});let l=on(),u=Se();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(s.persistence.referenceDelegate.updateLimboDocument(r,c))}),a.push($$(r,o,e.documentUpdates).next(c=>{l=c.Wi,u=c.zi})),!n.isEqual(me.min())){const c=s.Cs.getLastRemoteSnapshotVersion(r).next(d=>s.Cs.setTargetsMetadata(r,r.currentSequenceNumber,n));a.push(c)}return x.waitFor(a).next(()=>o.apply(r)).next(()=>s.localDocuments.getLocalViewOfDocuments(r,l,u)).next(()=>l)}).then(r=>(s.qi=i,r))}function $$(t,e,s){let n=Se(),i=Se();return s.forEach(r=>n=n.add(r)),e.getEntries(t,n).next(r=>{let o=on();return s.forEach((a,l)=>{const u=r.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(me.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ie("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Wi:o,zi:i}})}function O$(t,e){const s=ge(t);return s.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),s.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function N$(t,e){const s=ge(t);return s.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return s.Cs.getTargetData(n,e).next(r=>r?(i=r,x.resolve(i)):s.Cs.allocateTargetId(n).next(o=>(i=new fi(e,o,0,n.currentSequenceNumber),s.Cs.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=s.qi.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(s.qi=s.qi.insert(n.targetId,n),s.Ui.set(e,n.targetId)),n})}async function Uh(t,e,s){const n=ge(t),i=n.qi.get(e),r=s?"readwrite":"readwrite-primary";try{s||await n.persistence.runTransaction("Release target",r,o=>n.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ma(o))throw o;ie("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.qi=n.qi.remove(e),n.Ui.delete(i.target)}function ig(t,e,s){const n=ge(t);let i=me.min(),r=Se();return n.persistence.runTransaction("Execute query","readonly",o=>function(a,l,u){const c=ge(a),d=c.Ui.get(u);return d!==void 0?x.resolve(c.qi.get(d)):c.Cs.getTargetData(l,u)}(n,o,rn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,n.Cs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{r=l})}).next(()=>n.Li.getDocumentsMatchingQuery(o,e,s?i:me.min(),s?r:Se())).next(a=>(P$(n,CD(e),a),{documents:a,Hi:r})))}function P$(t,e,s){let n=t.Ki.get(e)||me.min();s.forEach((i,r)=>{r.readTime.compareTo(n)>0&&(n=r.readTime)}),t.Ki.set(e,n)}class rg{constructor(){this.activeTargetIds=Pb()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class M${constructor(){this.Lr=new rg,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,n){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,s,n){this.qr[e]=s}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new rg,Promise.resolve()}handleUserChange(e,s,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R${Ur(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){ie("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){ie("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x${constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V$ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const s=e.ssl?"https":"http";this.oo=s+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,s,n,i,r){const o=this.ho(e,s);ie("RestConnection","Sending: ",o,n);const a={};return this.lo(a,i,r),this.fo(e,o,a,n).then(l=>(ie("RestConnection","Received: ",l),l),l=>{throw Oh("RestConnection",`${e} failed with error: `,l,"url: ",o,"request:",n),l})}_o(e,s,n,i,r,o){return this.ao(e,s,n,i,r)}lo(e,s,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ur,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((i,r)=>e[r]=i),n&&n.headers.forEach((i,r)=>e[r]=i)}ho(e,s){const n=L$[e];return`${this.oo}/v1/${s}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,s,n,i){return new Promise((r,o)=>{const a=new XC;a.setWithCredentials(!0),a.listenOnce(GC.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Nu.NO_ERROR:const u=a.getResponseJson();ie("Connection","XHR received:",JSON.stringify(u)),r(u);break;case Nu.TIMEOUT:ie("Connection",'RPC "'+e+'" timed out'),o(new Q(D.DEADLINE_EXCEEDED,"Request time out"));break;case Nu.HTTP_ERROR:const c=a.getStatus();if(ie("Connection",'RPC "'+e+'" failed with status:',c,"response text:",a.getResponseText()),c>0){let d=a.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const p=function(b){const _=b.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(_)>=0?_:D.UNKNOWN}(f.status);o(new Q(p,f.message))}else o(new Q(D.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Q(D.UNAVAILABLE,"Connection failed."));break;default:fe()}}finally{ie("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(i);a.send(s,"POST",l,n,15)})}wo(e,s,n){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=WC(),o=KC(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new YC({})),this.lo(a.initMessageHeaders,s,n),a.encodeInitMessageHeaders=!0;const l=i.join("");ie("Connection","Creating WebChannel: "+l,a);const u=r.createWebChannel(l,a);let c=!1,d=!1;const f=new x$({Hr:b=>{d?ie("Connection","Not sending because WebChannel is closed:",b):(c||(ie("Connection","Opening WebChannel transport."),u.open(),c=!0),ie("Connection","WebChannel sending:",b),u.send(b))},Jr:()=>u.close()}),p=(b,_,A)=>{b.listen(_,C=>{try{A(C)}catch(P){setTimeout(()=>{throw P},0)}})};return p(u,Ba.EventType.OPEN,()=>{d||ie("Connection","WebChannel transport opened.")}),p(u,Ba.EventType.CLOSE,()=>{d||(d=!0,ie("Connection","WebChannel transport closed"),f.io())}),p(u,Ba.EventType.ERROR,b=>{d||(d=!0,Oh("Connection","WebChannel transport errored:",b),f.io(new Q(D.UNAVAILABLE,"The operation could not be completed")))}),p(u,Ba.EventType.MESSAGE,b=>{var _;if(!d){const A=b.data[0];Ke(!!A);const C=A,P=C.error||((_=C[0])===null||_===void 0?void 0:_.error);if(P){ie("Connection","WebChannel received error:",P);const M=P.status;let R=function(W){const ce=nt[W];if(ce!==void 0)return Db(ce)}(M),z=P.message;R===void 0&&(R=D.INTERNAL,z="Unknown error status: "+M+" with message "+P.message),d=!0,f.io(new Q(R,z)),u.close()}else ie("Connection","WebChannel received:",A),f.ro(A)}}),p(o,QC.STAT_EVENT,b=>{b.stat===xm.PROXY?ie("Connection","Detected buffering proxy"):b.stat===xm.NOPROXY&&ie("Connection","Detected no buffering proxy")}),setTimeout(()=>{f.so()},0),f}}function Mu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(t){return new GD(t,!0)}class zb{constructor(e,s,n=1e3,i=1.5,r=6e4){this.Hs=e,this.timerId=s,this.mo=n,this.yo=i,this.po=r,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const s=Math.floor(this.Io+this.bo()),n=Math.max(0,Date.now()-this.Eo),i=Math.max(0,s-n);i>0&&ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${s} ms, last attempt: ${n} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){this.To!==null&&(this.To.skipDelay(),this.To=null)}cancel(){this.To!==null&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,s,n,i,r,o,a,l){this.Hs=e,this.vo=n,this.Vo=i,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new zb(e,s)}No(){return this.state===1||this.state===5||this.ko()}ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Oo()}async stop(){this.No()&&await this.close(0)}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&this.Do===null&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(e,s){this.Lo(),this.qo(),this.xo.cancel(),this.So++,e!==4?this.xo.reset():s&&s.code===D.RESOURCE_EXHAUSTED?(nn(s.toString()),nn("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):s&&s.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Uo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(s)}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),s=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.So===s&&this.Go(n,i)},n=>{e(()=>{const i=new Q(D.UNKNOWN,"Fetching auth token failed: "+n.message);return this.Qo(i)})})}Go(e,s){const n=this.Ko(this.So);this.stream=this.jo(e,s),this.stream.Yr(()=>{n(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{n(()=>this.Qo(i))}),this.stream.onMessage(i=>{n(()=>this.onMessage(i))})}Oo(){this.state=5,this.xo.Ro(async()=>{this.state=0,this.start()})}Qo(e){return ie("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return s=>{this.Hs.enqueueAndForget(()=>this.So===e?s():(ie("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class F$ extends qb{constructor(e,s,n,i,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,n,i,o),this.yt=r}jo(e,s){return this.connection.wo("Listen",e,s)}onMessage(e){this.xo.reset();const s=XD(this.yt,e),n=function(i){if(!("targetChange"in i))return me.min();const r=i.targetChange;return r.targetIds&&r.targetIds.length?me.min():r.readTime?Os(r.readTime):me.min()}(e);return this.listener.Wo(s,n)}zo(e){const s={};s.database=Fh(this.yt),s.addTarget=function(i,r){let o;const a=r.target;return o=Mh(a)?{documents:e$(i,a)}:{query:t$(i,a)},o.targetId=r.targetId,r.resumeToken.approximateByteSize()>0?o.resumeToken=Lb(i,r.resumeToken):r.snapshotVersion.compareTo(me.min())>0&&(o.readTime=zl(i,r.snapshotVersion.toTimestamp())),o}(this.yt,e);const n=n$(this.yt,e);n&&(s.labels=n),this.Bo(s)}Ho(e){const s={};s.database=Fh(this.yt),s.removeTarget=e,this.Bo(s)}}class U$ extends qb{constructor(e,s,n,i,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,n,i,o),this.yt=r,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,s){return this.connection.wo("Write",e,s)}onMessage(e){if(Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const s=ZD(e.writeResults,e.commitTime),n=Os(e.commitTime);return this.listener.Zo(n,s)}return Ke(!e.writeResults||e.writeResults.length===0),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Fh(this.yt),this.Bo(e)}Xo(e){const s={streamToken:this.lastStreamToken,writes:e.map(n=>JD(this.yt,n))};this.Bo(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B$ extends class{}{constructor(e,s,n,i){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=n,this.yt=i,this.nu=!1}su(){if(this.nu)throw new Q(D.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,s,n){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,r])=>this.connection.ao(e,s,n,i,r)).catch(i=>{throw i.name==="FirebaseError"?(i.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(D.UNKNOWN,i.toString())})}_o(e,s,n,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection._o(e,s,n,r,o,i)).catch(r=>{throw r.name==="FirebaseError"?(r.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Q(D.UNKNOWN,r.toString())})}terminate(){this.nu=!0}}class j${constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){this.iu===0&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){this.state==="Online"?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,e==="Online"&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(nn(s),this.ou=!1):ie("OnlineStateTracker",s)}lu(){this.ru!==null&&(this.ru.cancel(),this.ru=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H${constructor(e,s,n,i,r){this.localStore=e,this.datastore=s,this.asyncQueue=n,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=r,this.mu.Ur(o=>{n.enqueueAndForget(async()=>{Di(this)&&(ie("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=ge(a);l._u.add(4),await va(l),l.gu.set("Unknown"),l._u.delete(4),await Fc(l)}(this))})}),this.gu=new j$(n,i)}}async function Fc(t){if(Di(t))for(const e of t.wu)await e(!0)}async function va(t){for(const e of t.wu)await e(!1)}function Wb(t,e){const s=ge(t);s.du.has(e.targetId)||(s.du.set(e.targetId,e),_f(s)?vf(s):Hr(s).ko()&&yf(s,e))}function Kb(t,e){const s=ge(t),n=Hr(s);s.du.delete(e),n.ko()&&Gb(s,e),s.du.size===0&&(n.ko()?n.Fo():Di(s)&&s.gu.set("Unknown"))}function yf(t,e){t.yu.Ot(e.targetId),Hr(t).zo(e)}function Gb(t,e){t.yu.Ot(e),Hr(t).Ho(e)}function vf(t){t.yu=new zD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>t.du.get(e)||null}),Hr(t).start(),t.gu.uu()}function _f(t){return Di(t)&&!Hr(t).No()&&t.du.size>0}function Di(t){return ge(t)._u.size===0}function Qb(t){t.yu=void 0}async function z$(t){t.du.forEach((e,s)=>{yf(t,e)})}async function q$(t,e){Qb(t),_f(t)?(t.gu.hu(e),vf(t)):t.gu.set("Unknown")}async function W$(t,e,s){if(t.gu.set("Online"),e instanceof Rb&&e.state===2&&e.cause)try{await async function(n,i){const r=i.cause;for(const o of i.targetIds)n.du.has(o)&&(await n.remoteSyncer.rejectListen(o,r),n.du.delete(o),n.yu.removeTarget(o))}(t,e)}catch(n){ie("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await ql(t,n)}else if(e instanceof ul?t.yu.Kt(e):e instanceof Mb?t.yu.Jt(e):t.yu.jt(e),!s.isEqual(me.min()))try{const n=await Hb(t.localStore);s.compareTo(n)>=0&&await function(i,r){const o=i.yu.Zt(r);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=i.du.get(l);u&&i.du.set(l,u.withResumeToken(a.resumeToken,r))}}),o.targetMismatches.forEach(a=>{const l=i.du.get(a);if(!l)return;i.du.set(a,l.withResumeToken(Rt.EMPTY_BYTE_STRING,l.snapshotVersion)),Gb(i,a);const u=new fi(l.target,a,1,l.sequenceNumber);yf(i,u)}),i.remoteSyncer.applyRemoteEvent(o)}(t,s)}catch(n){ie("RemoteStore","Failed to raise snapshot:",n),await ql(t,n)}}async function ql(t,e,s){if(!ma(e))throw e;t._u.add(1),await va(t),t.gu.set("Offline"),s||(s=()=>Hb(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie("RemoteStore","Retrying IndexedDB access"),await s(),t._u.delete(1),await Fc(t)})}function Yb(t,e){return e().catch(s=>ql(t,s,e))}async function Uc(t){const e=ge(t),s=Rn(e);let n=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;K$(e);)try{const i=await O$(e.localStore,n);if(i===null){e.fu.length===0&&s.Fo();break}n=i.batchId,G$(e,i)}catch(i){await ql(e,i)}Xb(e)&&Jb(e)}function K$(t){return Di(t)&&t.fu.length<10}function G$(t,e){t.fu.push(e);const s=Rn(t);s.ko()&&s.Yo&&s.Xo(e.mutations)}function Xb(t){return Di(t)&&!Rn(t).No()&&t.fu.length>0}function Jb(t){Rn(t).start()}async function Q$(t){Rn(t).eu()}async function Y$(t){const e=Rn(t);for(const s of t.fu)e.Xo(s.mutations)}async function X$(t,e,s){const n=t.fu.shift(),i=ff.from(n,e,s);await Yb(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Uc(t)}async function J$(t,e){e&&Rn(t).Yo&&await async function(s,n){if(i=n.code,FD(i)&&i!==D.ABORTED){const r=s.fu.shift();Rn(s).Mo(),await Yb(s,()=>s.remoteSyncer.rejectFailedWrite(r.batchId,n)),await Uc(s)}var i}(t,e),Xb(t)&&Jb(t)}async function ag(t,e){const s=ge(t);s.asyncQueue.verifyOperationInProgress(),ie("RemoteStore","RemoteStore received new credentials");const n=Di(s);s._u.add(3),await va(s),n&&s.gu.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s._u.delete(3),await Fc(s)}async function Z$(t,e){const s=ge(t);e?(s._u.delete(2),await Fc(s)):e||(s._u.add(2),await va(s),s.gu.set("Unknown"))}function Hr(t){return t.pu||(t.pu=function(e,s,n){const i=ge(e);return i.su(),new F$(s,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,n)}(t.datastore,t.asyncQueue,{Yr:z$.bind(null,t),Zr:q$.bind(null,t),Wo:W$.bind(null,t)}),t.wu.push(async e=>{e?(t.pu.Mo(),_f(t)?vf(t):t.gu.set("Unknown")):(await t.pu.stop(),Qb(t))})),t.pu}function Rn(t){return t.Iu||(t.Iu=function(e,s,n){const i=ge(e);return i.su(),new U$(s,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,n)}(t.datastore,t.asyncQueue,{Yr:Q$.bind(null,t),Zr:J$.bind(null,t),tu:Y$.bind(null,t),Zo:X$.bind(null,t)}),t.wu.push(async e=>{e?(t.Iu.Mo(),await Uc(t)):(await t.Iu.stop(),t.fu.length>0&&(ie("RemoteStore",`Stopping write stream with ${t.fu.length} pending writes`),t.fu=[]))})),t.Iu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,s,n,i,r){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new Ys,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,s,n,i,r){const o=Date.now()+n,a=new bf(e,s,o,i,r);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wf(t,e){if(nn("AsyncQueue",`${e}: ${t}`),ma(t))return new Q(D.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.comparator=e?(s,n)=>e(s,n)||re.comparator(s.key,n.key):(s,n)=>re.comparator(s.key,n.key),this.keyedMap=oo(),this.sortedSet=new ht(this.comparator)}static emptySet(e){return new or(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((s,n)=>(e(s),!1))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof or)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;s.hasNext();){const i=s.getNext().key,r=n.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(s=>{e.push(s.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const n=new or;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=s,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(){this.Tu=new ht(re.comparator)}track(e){const s=e.doc.key,n=this.Tu.get(s);n?e.type!==0&&n.type===3?this.Tu=this.Tu.insert(s,e):e.type===3&&n.type!==1?this.Tu=this.Tu.insert(s,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.Tu=this.Tu.insert(s,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.Tu=this.Tu.insert(s,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.Tu=this.Tu.remove(s):e.type===1&&n.type===2?this.Tu=this.Tu.insert(s,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.Tu=this.Tu.insert(s,{type:2,doc:e.doc}):fe():this.Tu=this.Tu.insert(s,e)}Eu(){const e=[];return this.Tu.inorderTraversal((s,n)=>{e.push(n)}),e}}class Er{constructor(e,s,n,i,r,o,a,l,u){this.query=e,this.docs=s,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,s,n,i,r){const o=[];return s.forEach(a=>{o.push({type:0,doc:a})}),new Er(e,s,or.emptySet(s),o,n,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,n=e.docChanges;if(s.length!==n.length)return!1;for(let i=0;i<s.length;i++)if(s[i].type!==n[i].type||!s[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(){this.Au=void 0,this.listeners=[]}}class tO{constructor(){this.queries=new jr(e=>vb(e),Mc),this.onlineState="Unknown",this.Ru=new Set}}async function Zb(t,e){const s=ge(t),n=e.query;let i=!1,r=s.queries.get(n);if(r||(i=!0,r=new eO),i)try{r.Au=await s.onListen(n)}catch(o){const a=wf(o,`Initialization of query '${Lh(e.query)}' failed`);return void e.onError(a)}s.queries.set(n,r),r.listeners.push(e),e.bu(s.onlineState),r.Au&&e.Pu(r.Au)&&Ef(s)}async function e0(t,e){const s=ge(t),n=e.query;let i=!1;const r=s.queries.get(n);if(r){const o=r.listeners.indexOf(e);o>=0&&(r.listeners.splice(o,1),i=r.listeners.length===0)}if(i)return s.queries.delete(n),s.onUnlisten(n)}function sO(t,e){const s=ge(t);let n=!1;for(const i of e){const r=i.query,o=s.queries.get(r);if(o){for(const a of o.listeners)a.Pu(i)&&(n=!0);o.Au=i}}n&&Ef(s)}function nO(t,e,s){const n=ge(t),i=n.queries.get(e);if(i)for(const r of i.listeners)r.onError(s);n.queries.delete(e)}function Ef(t){t.Ru.forEach(e=>{e.next()})}class t0{constructor(e,s,n){this.query=e,this.vu=s,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=n||{}}Pu(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Er(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),s=!0):this.Cu(e,this.onlineState)&&(this.xu(e),s=!0),this.Su=e,s}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let s=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),s=!0),s}Cu(e,s){if(!e.fromCache)return!0;const n=s!=="Offline";return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}Du(e){if(e.docChanges.length>0)return!0;const s=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}xu(e){e=Er.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e){this.key=e}}class n0{constructor(e){this.key=e}}class iO{constructor(e,s){this.query=e,this.qu=s,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Se(),this.mutatedKeys=Se(),this.Gu=_b(e),this.Qu=new or(this.Gu)}get ju(){return this.qu}Wu(e,s){const n=s?s.zu:new lg,i=s?s.Qu:this.Qu;let r=s?s.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,d)=>{const f=i.get(c),p=uf(this.query,d)?d:null,b=!!f&&this.mutatedKeys.has(f.key),_=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let A=!1;f&&p?f.data.isEqual(p.data)?b!==_&&(n.track({type:3,doc:p}),A=!0):this.Hu(f,p)||(n.track({type:2,doc:p}),A=!0,(l&&this.Gu(p,l)>0||u&&this.Gu(p,u)<0)&&(a=!0)):!f&&p?(n.track({type:0,doc:p}),A=!0):f&&!p&&(n.track({type:1,doc:f}),A=!0,(l||u)&&(a=!0)),A&&(p?(o=o.add(p),r=_?r.add(c):r.delete(c)):(o=o.delete(c),r=r.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),r=r.delete(c.key),n.track({type:1,doc:c})}return{Qu:o,zu:n,$i:a,mutatedKeys:r}}Hu(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,n){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const r=e.zu.Eu();r.sort((u,c)=>function(d,f){const p=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe()}};return p(d)-p(f)}(u.type,c.type)||this.Gu(u.doc,c.doc)),this.Ju(n);const o=s?this.Yu():[],a=this.Ku.size===0&&this.current?1:0,l=a!==this.Uu;return this.Uu=a,r.length!==0||l?{snapshot:new Er(this.query,e.Qu,i,r,e.mutatedKeys,a===0,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new lg,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(s=>this.qu=this.qu.add(s)),e.modifiedDocuments.forEach(s=>{}),e.removedDocuments.forEach(s=>this.qu=this.qu.delete(s)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Se(),this.Qu.forEach(n=>{this.Zu(n.key)&&(this.Ku=this.Ku.add(n.key))});const s=[];return e.forEach(n=>{this.Ku.has(n)||s.push(new n0(n))}),this.Ku.forEach(n=>{e.has(n)||s.push(new s0(n))}),s}tc(e){this.qu=e.Hi,this.Ku=Se();const s=this.Wu(e.documents);return this.applyChanges(s,!0)}ec(){return Er.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,this.Uu===0,this.hasCachedResults)}}class rO{constructor(e,s,n){this.query=e,this.targetId=s,this.view=n}}class oO{constructor(e){this.key=e,this.nc=!1}}class aO{constructor(e,s,n,i,r,o){this.localStore=e,this.remoteStore=s,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new jr(a=>vb(a),Mc),this.rc=new Map,this.oc=new Set,this.uc=new ht(re.comparator),this.cc=new Map,this.ac=new pf,this.hc={},this.lc=new Map,this.fc=wr.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return this.dc===!0}}async function lO(t,e){const s=vO(t);let n,i;const r=s.ic.get(e);if(r)n=r.targetId,s.sharedClientState.addLocalQueryTarget(n),i=r.view.ec();else{const o=await N$(s.localStore,rn(e));s.isPrimaryClient&&Wb(s.remoteStore,o);const a=s.sharedClientState.addLocalQueryTarget(o.targetId);n=o.targetId,i=await cO(s,e,n,a==="current",o.resumeToken)}return i}async function cO(t,e,s,n,i){t._c=(d,f,p)=>async function(b,_,A,C){let P=_.view.Wu(A);P.$i&&(P=await ig(b.localStore,_.query,!1).then(({documents:z})=>_.view.Wu(z,P)));const M=C&&C.targetChanges.get(_.targetId),R=_.view.applyChanges(P,b.isPrimaryClient,M);return ug(b,_.targetId,R.Xu),R.snapshot}(t,d,f,p);const r=await ig(t.localStore,e,!0),o=new iO(e,r.Hi),a=o.Wu(r.documents),l=ya.createSynthesizedTargetChangeForCurrentChange(s,n&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);ug(t,s,u.Xu);const c=new rO(e,s,o);return t.ic.set(e,c),t.rc.has(s)?t.rc.get(s).push(e):t.rc.set(s,[e]),u.snapshot}async function uO(t,e){const s=ge(t),n=s.ic.get(e),i=s.rc.get(n.targetId);if(i.length>1)return s.rc.set(n.targetId,i.filter(r=>!Mc(r,e))),void s.ic.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(n.targetId),s.sharedClientState.isActiveQueryTarget(n.targetId)||await Uh(s.localStore,n.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(n.targetId),Kb(s.remoteStore,n.targetId),Bh(s,n.targetId)}).catch(pa)):(Bh(s,n.targetId),await Uh(s.localStore,n.targetId,!0))}async function hO(t,e,s){const n=_O(t);try{const i=await function(r,o){const a=ge(r),l=lt.now(),u=o.reduce((f,p)=>f.add(p.key),Se());let c,d;return a.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=on(),b=Se();return a.Gi.getEntries(f,u).next(_=>{p=_,p.forEach((A,C)=>{C.isValidDocument()||(b=b.add(A))})}).next(()=>a.localDocuments.getOverlayedDocuments(f,p)).next(_=>{c=_;const A=[];for(const C of o){const P=LD(C,c.get(C.key).overlayedDocument);P!=null&&A.push(new jn(C.key,P,gb(P.value.mapValue),rs.exists(!0)))}return a.mutationQueue.addMutationBatch(f,l,A,o)}).next(_=>{d=_;const A=_.applyToLocalDocumentSet(c,b);return a.documentOverlayCache.saveOverlays(f,_.batchId,A)})}).then(()=>({batchId:d.batchId,changes:Ob(c)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(r,o,a){let l=r.hc[r.currentUser.toKey()];l||(l=new ht(Ve)),l=l.insert(o,a),r.hc[r.currentUser.toKey()]=l}(n,i.batchId,s),await _a(n,i.changes),await Uc(n.remoteStore)}catch(i){const r=wf(i,"Failed to persist write");s.reject(r)}}async function i0(t,e){const s=ge(t);try{const n=await D$(s.localStore,e);e.targetChanges.forEach((i,r)=>{const o=s.cc.get(r);o&&(Ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.nc=!0:i.modifiedDocuments.size>0?Ke(o.nc):i.removedDocuments.size>0&&(Ke(o.nc),o.nc=!1))}),await _a(s,n,e)}catch(n){await pa(n)}}function cg(t,e,s){const n=ge(t);if(n.isPrimaryClient&&s===0||!n.isPrimaryClient&&s===1){const i=[];n.ic.forEach((r,o)=>{const a=o.view.bu(e);a.snapshot&&i.push(a.snapshot)}),function(r,o){const a=ge(r);a.onlineState=o;let l=!1;a.queries.forEach((u,c)=>{for(const d of c.listeners)d.bu(o)&&(l=!0)}),l&&Ef(a)}(n.eventManager,e),i.length&&n.sc.Wo(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function dO(t,e,s){const n=ge(t);n.sharedClientState.updateQueryState(e,"rejected",s);const i=n.cc.get(e),r=i&&i.key;if(r){let o=new ht(re.comparator);o=o.insert(r,Ct.newNoDocument(r,me.min()));const a=Se().add(r),l=new xc(me.min(),new Map,new ct(Ve),o,a);await i0(n,l),n.uc=n.uc.remove(r),n.cc.delete(e),Tf(n)}else await Uh(n.localStore,e,!1).then(()=>Bh(n,e,s)).catch(pa)}async function fO(t,e){const s=ge(t),n=e.batch.batchId;try{const i=await C$(s.localStore,e);o0(s,n,null),r0(s,n),s.sharedClientState.updateMutationState(n,"acknowledged"),await _a(s,i)}catch(i){await pa(i)}}async function pO(t,e,s){const n=ge(t);try{const i=await function(r,o){const a=ge(r);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(c=>(Ke(c!==null),u=c.keys(),a.mutationQueue.removeMutationBatch(l,c))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(n.localStore,e);o0(n,e,s),r0(n,e),n.sharedClientState.updateMutationState(e,"rejected",s),await _a(n,i)}catch(i){await pa(i)}}function r0(t,e){(t.lc.get(e)||[]).forEach(s=>{s.resolve()}),t.lc.delete(e)}function o0(t,e,s){const n=ge(t);let i=n.hc[n.currentUser.toKey()];if(i){const r=i.get(e);r&&(s?r.reject(s):r.resolve(),i=i.remove(e)),n.hc[n.currentUser.toKey()]=i}}function Bh(t,e,s=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.rc.get(e))t.ic.delete(n),s&&t.sc.wc(n,s);t.rc.delete(e),t.isPrimaryClient&&t.ac.ls(e).forEach(n=>{t.ac.containsKey(n)||a0(t,n)})}function a0(t,e){t.oc.delete(e.path.canonicalString());const s=t.uc.get(e);s!==null&&(Kb(t.remoteStore,s),t.uc=t.uc.remove(e),t.cc.delete(s),Tf(t))}function ug(t,e,s){for(const n of s)n instanceof s0?(t.ac.addReference(n.key,e),mO(t,n)):n instanceof n0?(ie("SyncEngine","Document no longer in limbo: "+n.key),t.ac.removeReference(n.key,e),t.ac.containsKey(n.key)||a0(t,n.key)):fe()}function mO(t,e){const s=e.key,n=s.path.canonicalString();t.uc.get(s)||t.oc.has(n)||(ie("SyncEngine","New document in limbo: "+s),t.oc.add(n),Tf(t))}function Tf(t){for(;t.oc.size>0&&t.uc.size<t.maxConcurrentLimboResolutions;){const e=t.oc.values().next().value;t.oc.delete(e);const s=new re(Ye.fromString(e)),n=t.fc.next();t.cc.set(n,new oO(s)),t.uc=t.uc.insert(s,n),Wb(t.remoteStore,new fi(rn(lf(s.path)),n,2,nf.at))}}async function _a(t,e,s){const n=ge(t),i=[],r=[],o=[];n.ic.isEmpty()||(n.ic.forEach((a,l)=>{o.push(n._c(l,e,s).then(u=>{if((u||s)&&n.isPrimaryClient&&n.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){i.push(u);const c=gf.Ci(l.targetId,u);r.push(c)}}))}),await Promise.all(o),n.sc.Wo(i),await async function(a,l){const u=ge(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>x.forEach(l,d=>x.forEach(d.Si,f=>u.persistence.referenceDelegate.addReference(c,d.targetId,f)).next(()=>x.forEach(d.Di,f=>u.persistence.referenceDelegate.removeReference(c,d.targetId,f)))))}catch(c){if(!ma(c))throw c;ie("LocalStore","Failed to update sequence numbers: "+c)}for(const c of l){const d=c.targetId;if(!c.fromCache){const f=u.qi.get(d),p=f.snapshotVersion,b=f.withLastLimboFreeSnapshotVersion(p);u.qi=u.qi.insert(d,b)}}}(n.localStore,r))}async function gO(t,e){const s=ge(t);if(!s.currentUser.isEqual(e)){ie("SyncEngine","User change. New user:",e.toKey());const n=await jb(s.localStore,e);s.currentUser=e,function(i,r){i.lc.forEach(o=>{o.forEach(a=>{a.reject(new Q(D.CANCELLED,r))})}),i.lc.clear()}(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await _a(s,n.ji)}}function yO(t,e){const s=ge(t),n=s.cc.get(e);if(n&&n.nc)return Se().add(n.key);{let i=Se();const r=s.rc.get(e);if(!r)return i;for(const o of r){const a=s.ic.get(o);i=i.unionWith(a.view.ju)}return i}}function vO(t){const e=ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=i0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dO.bind(null,e),e.sc.Wo=sO.bind(null,e.eventManager),e.sc.wc=nO.bind(null,e.eventManager),e}function _O(t){const e=ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pO.bind(null,e),e}class bO{constructor(){this.synchronizeTabs=!1}async initialize(e){this.yt=Vc(e.databaseInfo.databaseId),this.sharedClientState=this.gc(e),this.persistence=this.yc(e),await this.persistence.start(),this.localStore=this.Ic(e),this.gcScheduler=this.Tc(e,this.localStore),this.indexBackfillerScheduler=this.Ec(e,this.localStore)}Tc(e,s){return null}Ec(e,s){return null}Ic(e){return I$(this.persistence,new A$,e.initialUser,this.yt)}yc(e){return new T$(mf.Bs,this.yt)}gc(e){return new M$}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class wO{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>cg(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=gO.bind(null,this.syncEngine),await Z$(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new tO}createDatastore(e){const s=Vc(e.databaseInfo.databaseId),n=(i=e.databaseInfo,new V$(i));var i;return function(r,o,a,l){return new B$(r,o,a,l)}(e.authCredentials,e.appCheckCredentials,n,s)}createRemoteStore(e){return s=this.localStore,n=this.datastore,i=e.asyncQueue,r=a=>cg(this.syncEngine,a,0),o=og.C()?new og:new R$,new H$(s,n,i,r,o);var s,n,i,r,o}createSyncEngine(e,s){return function(n,i,r,o,a,l,u){const c=new aO(n,i,r,o,a,l);return u&&(c.dc=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}terminate(){return async function(e){const s=ge(e);ie("RemoteStore","RemoteStore shutting down."),s._u.add(5),await va(s),s.mu.shutdown(),s.gu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(t,e,s){if(!s)throw new Q(D.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function EO(t,e,s,n){if(e===!0&&n===!0)throw new Q(D.INVALID_ARGUMENT,`${t} and ${s} cannot be used together.`)}function hg(t){if(!re.isDocumentKey(t))throw new Q(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function dg(t){if(re.isDocumentKey(t))throw new Q(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Bc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe()}function bs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=Bc(t);throw new Q(D.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return t}function TO(t,e){if(e<=0)throw new Q(D.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg=new Map;class pg{constructor(e){var s;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(s=e.ssl)===null||s===void 0||s;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Q(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,EO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,s,n,i){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Q(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Q(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pg(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new JC;switch(s.type){case"gapi":const n=s.client;return new sD(n,s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Q(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const s=fg.get(e);s&&(ie("ComponentProvider","Removing Datastore"),fg.delete(e),s.terminate())}(this),Promise.resolve()}}function kO(t,e,s,n={}){var i;const r=(t=bs(t,jc))._getSettings();if(r.host!=="firestore.googleapis.com"&&r.host!==e&&Oh("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:`${e}:${s}`,ssl:!1})),n.mockUserToken){let o,a;if(typeof n.mockUserToken=="string")o=n.mockUserToken,a=It.MOCK_USER;else{o=Pk(n.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const l=n.mockUserToken.sub||n.mockUserToken.user_id;if(!l)throw new Q(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new It(l)}t._authCredentials=new ZC(new rb(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,s,n){this.converter=s,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $n(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ft(this.firestore,e,this._key)}}class Hn{constructor(e,s,n){this.converter=s,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Hn(this.firestore,e,this._query)}}class $n extends Hn{constructor(e,s,n){super(e,s,lf(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ft(this.firestore,null,new re(e))}withConverter(e){return new $n(this.firestore,e,this._path)}}function Hc(t,e,...s){if(t=yt(t),l0("collection","path",e),t instanceof jc){const n=Ye.fromString(e,...s);return dg(n),new $n(t,null,n)}{if(!(t instanceof Ft||t instanceof $n))throw new Q(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Ye.fromString(e,...s));return dg(n),new $n(t.firestore,null,n)}}function Fs(t,e,...s){if(t=yt(t),arguments.length===1&&(e=ob.R()),l0("doc","path",e),t instanceof jc){const n=Ye.fromString(e,...s);return hg(n),new Ft(t,null,new re(n))}{if(!(t instanceof Ft||t instanceof $n))throw new Q(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Ye.fromString(e,...s));return hg(n),new Ft(t.firestore,t instanceof $n?t.converter:null,new re(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):nn("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,s){this.muted||setTimeout(()=>{this.muted||e(s)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,s,n,i){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=n,this.databaseInfo=i,this.user=It.UNAUTHENTICATED,this.clientId=ob.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async r=>{ie("FirestoreClient","Received user=",r.uid),await this.authCredentialListener(r),this.user=r}),this.appCheckCredentials.start(n,r=>(ie("FirestoreClient","Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Q(D.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ys;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const n=wf(s,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function SO(t,e){t.asyncQueue.verifyOperationInProgress(),ie("FirestoreClient","Initializing OfflineComponentProvider");const s=await t.getConfiguration();await e.initialize(s);let n=s.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await jb(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function IO(t,e){t.asyncQueue.verifyOperationInProgress();const s=await CO(t);ie("FirestoreClient","Initializing OnlineComponentProvider");const n=await t.getConfiguration();await e.initialize(s,n),t.setCredentialChangeListener(i=>ag(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>ag(e.remoteStore,r)),t.onlineComponents=e}async function CO(t){return t.offlineComponents||(ie("FirestoreClient","Using default OfflineComponentProvider"),await SO(t,new bO)),t.offlineComponents}async function u0(t){return t.onlineComponents||(ie("FirestoreClient","Using default OnlineComponentProvider"),await IO(t,new wO)),t.onlineComponents}function DO(t){return u0(t).then(e=>e.syncEngine)}async function h0(t){const e=await u0(t),s=e.eventManager;return s.onListen=lO.bind(null,e.syncEngine),s.onUnlisten=uO.bind(null,e.syncEngine),s}function $O(t,e,s={}){const n=new Ys;return t.asyncQueue.enqueueAndForget(async()=>function(i,r,o,a,l){const u=new c0({next:d=>{r.enqueueAndForget(()=>e0(i,c));const f=d.docs.has(o);!f&&d.fromCache?l.reject(new Q(D.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&d.fromCache&&a&&a.source==="server"?l.reject(new Q(D.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),c=new t0(lf(o.path),u,{includeMetadataChanges:!0,Nu:!0});return Zb(i,c)}(await h0(t),t.asyncQueue,e,s,n)),n.promise}function OO(t,e,s={}){const n=new Ys;return t.asyncQueue.enqueueAndForget(async()=>function(i,r,o,a,l){const u=new c0({next:d=>{r.enqueueAndForget(()=>e0(i,c)),d.fromCache&&a.source==="server"?l.reject(new Q(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),c=new t0(o,u,{includeMetadataChanges:!0,Nu:!0});return Zb(i,c)}(await h0(t),t.asyncQueue,e,s,n)),n.promise}class NO{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new zb(this,"async_queue_retry"),this.Wc=()=>{const s=Mu();s&&ie("AsyncQueue","Visibility state changed to "+s.visibilityState),this.xo.Po()};const e=Mu();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const s=Mu();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const s=new Ys;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(s.resolve,s.reject),s.promise)).then(()=>s.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}async Jc(){if(this.Lc.length!==0){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(e){if(!ma(e))throw e;ie("AsyncQueue","Operation failed with retryable error: "+e)}this.Lc.length>0&&this.xo.Ro(()=>this.Jc())}}Hc(e){const s=this.Bc.then(()=>(this.Gc=!0,e().catch(n=>{this.Kc=n,this.Gc=!1;const i=function(r){let o=r.message||"";return r.stack&&(o=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),o}(n);throw nn("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.Gc=!1,n))));return this.Bc=s,s}enqueueAfterDelay(e,s,n){this.zc(),this.jc.indexOf(e)>-1&&(s=0);const i=bf.createAndSchedule(this,e,s,n,r=>this.Yc(r));return this.Uc.push(i),i}zc(){this.Kc&&fe()}verifyOperationInProgress(){}async Xc(){let e;do e=this.Bc,await e;while(e!==this.Bc)}Zc(e){for(const s of this.Uc)if(s.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((s,n)=>s.targetTimeMs-n.targetTimeMs);for(const s of this.Uc)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const s=this.Uc.indexOf(e);this.Uc.splice(s,1)}}class $i extends jc{constructor(e,s,n,i){super(e,s,n,i),this.type="firestore",this._queue=new NO,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||d0(this),this._firestoreClient.terminate()}}function ss(t,e){const s=typeof t=="object"?t:Av(),n=typeof t=="string"?t:e||"(default)",i=Ad(s,"firestore").getImmediate({identifier:n});if(!i._initialized){const r=$k("firestore");r&&kO(i,...r)}return i}function kf(t){return t._firestoreClient||d0(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function d0(t){var e;const s=t._freezeSettings(),n=function(i,r,o,a){return new dD(i,r,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new AO(t._authCredentials,t._appCheckCredentials,t._queue,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tr(Rt.fromBase64String(e))}catch(s){throw new Q(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new Tr(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new Q(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new Q(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new Q(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO=/^__.*__$/;class MO{constructor(e,s,n){this.data=e,this.fieldMask=s,this.fieldTransforms=n}toMutation(e,s){return this.fieldMask!==null?new jn(e,this.data,this.fieldMask,s,this.fieldTransforms):new ga(e,this.data,s,this.fieldTransforms)}}class f0{constructor(e,s,n){this.data=e,this.fieldMask=s,this.fieldTransforms=n}toMutation(e,s){return new jn(e,this.data,this.fieldMask,s,this.fieldTransforms)}}function p0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe()}}class qc{constructor(e,s,n,i,r,o){this.settings=e,this.databaseId=s,this.yt=n,this.ignoreUndefinedProperties=i,r===void 0&&this.na(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new qc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var s;const n=(s=this.path)===null||s===void 0?void 0:s.child(e),i=this.ia({path:n,oa:!1});return i.ua(e),i}ca(e){var s;const n=(s=this.path)===null||s===void 0?void 0:s.child(e),i=this.ia({path:n,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Wl(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return this.fieldMask.find(s=>e.isPrefixOf(s))!==void 0||this.fieldTransforms.find(s=>e.isPrefixOf(s.field))!==void 0}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(e.length===0)throw this.ha("Document fields must not be empty");if(p0(this.sa)&&PO.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class RO{constructor(e,s,n){this.databaseId=e,this.ignoreUndefinedProperties=s,this.yt=n||Vc(e)}da(e,s,n,i=!1){return new qc({sa:e,methodName:s,fa:n,path:$t.emptyPath(),oa:!1,la:i},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Wc(t){const e=t._freezeSettings(),s=Vc(t._databaseId);return new RO(t._databaseId,!!e.ignoreUndefinedProperties,s)}function m0(t,e,s,n,i,r={}){const o=t.da(r.merge||r.mergeFields?2:0,e,s,i);Sf("Data must be an object, but it was:",o,n);const a=y0(n,o);let l,u;if(r.merge)l=new is(o.fieldMask),u=o.fieldTransforms;else if(r.mergeFields){const c=[];for(const d of r.mergeFields){const f=jh(e,d,s);if(!o.contains(f))throw new Q(D.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);_0(c,f)||c.push(f)}l=new is(c),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new MO(new Kt(a),l,u)}class Kc extends ba{_toFieldTransform(e){if(e.sa!==2)throw e.sa===1?e.ha(`${this._methodName}() can only appear at the top level of your update data`):e.ha(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kc}}function g0(t,e,s){return new qc({sa:3,fa:e.settings.fa,methodName:t._methodName,oa:s},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class LO extends ba{constructor(e,s){super(e),this._a=s}_toFieldTransform(e){const s=g0(this,e,!0),n=this._a.map(r=>Oi(r,s)),i=new _r(n);return new Sb(e.path,i)}isEqual(e){return this===e}}class xO extends ba{constructor(e,s){super(e),this._a=s}_toFieldTransform(e){const s=g0(this,e,!0),n=this._a.map(r=>Oi(r,s)),i=new br(n);return new Sb(e.path,i)}isEqual(e){return this===e}}function VO(t,e,s,n){const i=t.da(1,e,s);Sf("Data must be an object, but it was:",i,n);const r=[],o=Kt.empty();Ci(n,(l,u)=>{const c=If(e,l,s);u=yt(u);const d=i.ca(c);if(u instanceof Kc)r.push(c);else{const f=Oi(u,d);f!=null&&(r.push(c),o.set(c,f))}});const a=new is(r);return new f0(o,a,i.fieldTransforms)}function FO(t,e,s,n,i,r){const o=t.da(1,e,s),a=[jh(e,n,s)],l=[i];if(r.length%2!=0)throw new Q(D.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<r.length;f+=2)a.push(jh(e,r[f])),l.push(r[f+1]);const u=[],c=Kt.empty();for(let f=a.length-1;f>=0;--f)if(!_0(u,a[f])){const p=a[f];let b=l[f];b=yt(b);const _=o.ca(p);if(b instanceof Kc)u.push(p);else{const A=Oi(b,_);A!=null&&(u.push(p),c.set(p,A))}}const d=new is(u);return new f0(c,d,o.fieldTransforms)}function UO(t,e,s,n=!1){return Oi(s,t.da(n?4:3,e))}function Oi(t,e){if(v0(t=yt(t)))return Sf("Unsupported field value:",e,t),y0(t,e);if(t instanceof ba)return function(s,n){if(!p0(n.sa))throw n.ha(`${s._methodName}() can only be used with update() and set()`);if(!n.path)throw n.ha(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(n);i&&n.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.oa&&e.sa!==4)throw e.ha("Nested arrays are not supported");return function(s,n){const i=[];let r=0;for(const o of s){let a=Oi(o,n.aa(r));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),r++}return{arrayValue:{values:i}}}(t,e)}return function(s,n){if((s=yt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return $D(n.yt,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=lt.fromDate(s);return{timestampValue:zl(n.yt,i)}}if(s instanceof lt){const i=new lt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:zl(n.yt,i)}}if(s instanceof Af)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Tr)return{bytesValue:Lb(n.yt,s._byteString)};if(s instanceof Ft){const i=n.databaseId,r=s.firestore._databaseId;if(!r.isEqual(i))throw n.ha(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:df(s.firestore._databaseId||n.databaseId,s._key.path)}}throw n.ha(`Unsupported field value: ${Bc(s)}`)}(t,e)}function y0(t,e){const s={};return ab(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ci(t,(n,i)=>{const r=Oi(i,e.ra(n));r!=null&&(s[n]=r)}),{mapValue:{fields:s}}}function v0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof lt||t instanceof Af||t instanceof Tr||t instanceof Ft||t instanceof ba)}function Sf(t,e,s){if(!v0(s)||!function(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}(s)){const n=Bc(s);throw n==="an object"?e.ha(t+" a custom object"):e.ha(t+" "+n)}}function jh(t,e,s){if((e=yt(e))instanceof zc)return e._internalPath;if(typeof e=="string")return If(t,e);throw Wl("Field path arguments must be of type string or ",t,!1,void 0,s)}const BO=new RegExp("[~\\*/\\[\\]]");function If(t,e,s){if(e.search(BO)>=0)throw Wl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,s);try{return new zc(...e.split("."))._internalPath}catch{throw Wl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,s)}}function Wl(t,e,s,n,i){const r=n&&!n.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;s&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${n}`),o&&(l+=` in document ${i}`),l+=")"),new Q(D.INVALID_ARGUMENT,a+t+l)}function _0(t,e){return t.some(s=>s.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e,s,n,i,r){this._firestore=e,this._userDataWriter=s,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(Gc("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class jO extends b0{data(){return super.data()}}function Gc(t,e){return typeof e=="string"?If(t,e):e instanceof zc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cf{}class Df extends Cf{}function $f(t,e,...s){let n=[];e instanceof Cf&&n.push(e),n=n.concat(s),function(i){const r=i.filter(a=>a instanceof Of).length,o=i.filter(a=>a instanceof Qc).length;if(r>1||r>0&&o>0)throw new Q(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)t=i._apply(t);return t}class Qc extends Df{constructor(e,s,n){super(),this._field=e,this._op=s,this._value=n,this.type="where"}static _create(e,s,n){return new Qc(e,s,n)}_apply(e){const s=this._parse(e);return w0(e._query,s),new Hn(e.firestore,e.converter,Rh(e._query,s))}_parse(e){const s=Wc(e.firestore);return function(i,r,o,a,l,u,c){let d;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Q(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){gg(c,u);const f=[];for(const p of c)f.push(mg(a,i,p));d={arrayValue:{values:f}}}else d=mg(a,i,c)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||gg(c,u),d=UO(o,r,c,u==="in"||u==="not-in");return rt.create(l,u,d)}(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}function Hh(t,e,s){const n=e,i=Gc("where",t);return Qc._create(i,n,s)}class Of extends Cf{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new Of(e,s)}_parse(e){const s=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return s.length===1?s[0]:_s.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:(function(n,i){let r=n;const o=i.getFlattenedFilters();for(const a of o)w0(r,a),r=Rh(r,a)}(e._query,s),new Hn(e.firestore,e.converter,Rh(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Nf extends Df{constructor(e,s){super(),this._field=e,this._direction=s,this.type="orderBy"}static _create(e,s){return new Nf(e,s)}_apply(e){const s=function(n,i,r){if(n.startAt!==null)throw new Q(D.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(n.endAt!==null)throw new Q(D.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new ir(i,r);return function(a,l){if(cf(a)===null){const u=Pc(a);u!==null&&E0(a,u,l.field)}}(n,o),o}(e._query,this._field,this._direction);return new Hn(e.firestore,e.converter,function(n,i){const r=n.explicitOrderBy.concat([i]);return new Br(n.path,n.collectionGroup,r,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}(e._query,s))}}function zO(t,e="asc"){const s=e,n=Gc("orderBy",t);return Nf._create(n,s)}class Pf extends Df{constructor(e,s,n){super(),this.type=e,this._limit=s,this._limitType=n}static _create(e,s,n){return new Pf(e,s,n)}_apply(e){return new Hn(e.firestore,e.converter,Bl(e._query,this._limit,this._limitType))}}function qO(t){return TO("limitToLast",t),Pf._create("limitToLast",t,"L")}function mg(t,e,s){if(typeof(s=yt(s))=="string"){if(s==="")throw new Q(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yb(e)&&s.indexOf("/")!==-1)throw new Q(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const n=e.path.child(Ye.fromString(s));if(!re.isDocumentKey(n))throw new Q(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return jm(t,new re(n))}if(s instanceof Ft)return jm(t,s._key);throw new Q(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bc(s)}.`)}function gg(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new Q(D.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function w0(t,e){if(e.isInequality()){const n=Pc(t),i=e.field;if(n!==null&&!n.isEqual(i))throw new Q(D.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${i.toString()}'`);const r=cf(t);r!==null&&E0(t,i,r)}const s=function(n,i){for(const r of n)for(const o of r.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(n){switch(n){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(s!==null)throw s===e.op?new Q(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}function E0(t,e,s){if(!s.isEqual(e))throw new Q(D.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${s.toString()}' instead.`)}class WO{convertValue(e,s="none"){switch(wi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return it(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(gr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 10:return this.convertObject(e.mapValue,s);default:throw fe()}}convertObject(e,s){const n={};return Ci(e.fields,(i,r)=>{n[i]=this.convertValue(r,s)}),n}convertGeoPoint(e){return new Af(it(e.latitude),it(e.longitude))}convertArray(e,s){return(e.values||[]).map(n=>this.convertValue(n,s))}convertServerTimestamp(e,s){switch(s){case"previous":const n=cb(e);return n==null?null:this.convertValue(n,s);case"estimate":return this.convertTimestamp(jo(e));default:return null}}convertTimestamp(e){const s=Mn(e);return new lt(s.seconds,s.nanos)}convertDocumentKey(e,s){const n=Ye.fromString(e);Ke(Bb(n));const i=new Bo(n.get(1),n.get(3)),r=new re(n.popFirst(5));return i.isEqual(s)||nn(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(t,e,s){let n;return n=t?s&&(s.merge||s.mergeFields)?t.toFirestore(e,s):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class k0 extends b0{constructor(e,s,n,i,r,o){super(e,s,n,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new hl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const n=this._document.data.field(Gc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,s.serverTimestamps)}}}class hl extends k0{data(e={}){return super.data(e)}}class KO{constructor(e,s,n,i){this._firestore=e,this._userDataWriter=s,this._snapshot=i,this.metadata=new ao(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(s=>e.push(s)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach(n=>{e.call(s,new hl(this._firestore,this._userDataWriter,n.key,n,new ao(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new Q(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=function(n,i){if(n._snapshot.oldDocs.isEmpty()){let r=0;return n._snapshot.docChanges.map(o=>{const a=new hl(n._firestore,n._userDataWriter,o.doc.key,o.doc,new ao(n._snapshot.mutatedKeys.has(o.doc.key),n._snapshot.fromCache),n.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:r++}})}{let r=n._snapshot.oldDocs;return n._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const a=new hl(n._firestore,n._userDataWriter,o.doc.key,o.doc,new ao(n._snapshot.mutatedKeys.has(o.doc.key),n._snapshot.fromCache),n.query.converter);let l=-1,u=-1;return o.type!==0&&(l=r.indexOf(o.doc.key),r=r.delete(o.doc.key)),o.type!==1&&(r=r.add(o.doc),u=r.indexOf(o.doc.key)),{type:GO(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}}function GO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(t){t=bs(t,Ft);const e=bs(t.firestore,$i);return $O(kf(e),t._key).then(s=>JO(e,t,s))}class S0 extends WO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tr(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,s)}}function Mf(t){t=bs(t,Hn);const e=bs(t.firestore,$i),s=kf(e),n=new S0(e);return HO(t._query),OO(s,t._query).then(i=>new KO(e,n,t,i))}function QO(t,e,s){t=bs(t,Ft);const n=bs(t.firestore,$i),i=T0(t.converter,e,s);return Yc(n,[m0(Wc(n),"setDoc",t._key,i,t.converter!==null,s).toMutation(t._key,rs.none())])}function wa(t,e,s,...n){t=bs(t,Ft);const i=bs(t.firestore,$i),r=Wc(i);let o;return o=typeof(e=yt(e))=="string"||e instanceof zc?FO(r,"updateDoc",t._key,e,s,n):VO(r,"updateDoc",t._key,e),Yc(i,[o.toMutation(t._key,rs.exists(!0))])}function YO(t){return Yc(bs(t.firestore,$i),[new hf(t._key,rs.none())])}function XO(t,e){const s=bs(t.firestore,$i),n=Fs(t),i=T0(t.converter,e);return Yc(s,[m0(Wc(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,rs.exists(!1))]).then(()=>n)}function Yc(t,e){return function(s,n){const i=new Ys;return s.asyncQueue.enqueueAndForget(async()=>hO(await DO(s),n,i)),i.promise}(kf(t),e)}function JO(t,e,s){const n=s.docs.get(e._key),i=new S0(t);return new k0(t,i,e._key,n,new ao(s.hasPendingWrites,s.fromCache),e.converter)}function ZO(...t){return new LO("arrayUnion",t)}function eN(...t){return new xO("arrayRemove",t)}(function(t,e=!0){(function(s){Ur=s})(Xo),fr(new gi("firestore",(s,{instanceIdentifier:n,options:i})=>{const r=s.getProvider("app").getImmediate(),o=new $i(new eD(s.getProvider("auth-internal")),new iD(s.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new Q(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bo(a.options.projectId,l)}(r,n),r);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),ui(Vm,"3.8.0",t),ui(Vm,"3.8.0","esm2017")})();async function tN(t,e){return await XO(Hc(ss(),t),e)}async function sN(t,e){const s=xr();await NS(s,t,e)}async function at(){const t=xr();await LS(t),At.value=null,pi.push("/")}async function nN(t,e,s){var r;const n=xr(),i=await OS(n,t,e);s.id=(r=n.currentUser)==null?void 0:r.uid,console.log(s),await QO(Fs(ss(),"users",i.user.uid),{email:t,role:"user",player:s})}async function Ru(t){const e=[];return(await Mf($f(Hc(ss(),"users"),zO(t),qO(5)))).forEach(n=>{e.push(n)}),e.map(n=>({...n.data(),id:n.id}))}async function Ks(t){var s;const e=(s=xr().currentUser)==null?void 0:s.uid;e&&await wa(Fs(ss(),"users",e),{player:t})}async function Ea(){var e;const t=(e=xr().currentUser)==null?void 0:e.uid;return t?(await A0(Fs(ss(),"users",t))).data():null}async function iN(t){return(await tN("spaceFleets",t)).id}async function rN(t){await YO(Fs(ss(),"spaceFleets",t))}async function I0(t){const e=await A0(Fs(ss(),"spaceFleets",t));return{...e.data(),id:e.id}}async function C0(t){const e=[];return(await Mf($f(Hc(ss(),"users"),Hh("player.spaceFleet","==",t)))).forEach(n=>{e.push(n)}),e.map(n=>({...n.data(),id:n.id}))}async function oN(t){const e=[];return(await Mf($f(Hc(ss(),"spaceFleets"),Hh("name","<=",t+"~"),Hh("name",">=",t)))).forEach(n=>{e.push(n)}),e.map(n=>({...n.data(),id:n.id}))}async function aN(t,e){await wa(Fs(ss(),"spaceFleets",t),{members:ZO(e)})}async function yg(t,e){await wa(Fs(ss(),"spaceFleets",t),{members:eN(e)})}async function lN(t,e){await wa(Fs(ss(),"spaceFleets",t),{skills:e})}async function cN(t,e){await wa(Fs(ss(),"spaceFleets",t),{fleetInfo:e})}const uN=qe(!0),Lu={bossEnemies:{name:"common superiority",maxlvl:5,tier:1,description:"reduce enemies in a boss fight"},bossDifficulty:{name:"together it's easier",maxlvl:5,tier:1,description:"reduce the difficulty in a boss fight"}},oe={fastAbility:{name:"rocket propulsion",maxlvl:1,tier:1,description:"you can speed up your movement"},slowAbility:{name:"sapr flame",maxlvl:1,tier:1,description:" you can slow down your movement"},bombAbility:{name:"remote detonator",maxlvl:1,tier:1,description:"you can remote ignition the nearest bomb"},shotAbility:{name:"plasma thrower",maxlvl:1,tier:1,description:" you can shoot at enemies"},magnetAbility:{name:"electro magnet",maxlvl:1,tier:2,description:"gives you the magnet effect"},slowEnemyAbility:{name:"snow machine",maxlvl:1,tier:2,description:"gives you the slow enemies effect"},stopTimeAbility:{name:"time machine",maxlvl:1,tier:2,description:"gives you the time stop effect"},growAbility:{name:"growth ray",maxlvl:1,tier:2,description:"gives you the grow effect"},fearAbility:{name:"fear",maxlvl:1,tier:2,description:"the enemies fly away from you"},betterCoin:{name:"golden coin",maxlvl:20,tier:1,description:"the coin give more score"},longerSlowEnemies:{name:"galactic freeze",maxlvl:20,tier:1,description:"the enemy slow effect holds longer"},betterGrowPotion:{name:"alchemist",maxlvl:20,tier:1,description:"while grown you gain more score"},spawnLessEnemy:{name:"cowards",maxlvl:20,tier:1,description:"it takes longer for additional enemies to spawn"},longerStopTime:{name:"time anomaly",maxlvl:20,tier:1,description:"time stands still longer"},scoreMultiplicator:{name:"golden times",maxlvl:20,tier:1,description:"you gain more score over time"},smallerBlackHole:{name:"cute black holes",maxlvl:20,tier:1,description:"black holes are smaller"},slowEnemy:{name:"braking fog",maxlvl:20,tier:1,description:"enemies will slow down"},longerMagnet:{name:"permanent magnet",maxlvl:20,tier:1,description:"the magnet lasts longer"},scorePerEffect:{name:"golden effects",maxlvl:20,tier:2,description:"gives you score per active effect"},strongerSlowEnemies:{name:"super snowflake",maxlvl:20,tier:2,description:"enhances the slow enemies effect"},strongerMagnet:{name:"super Magnet",maxlvl:20,tier:2,description:"enhances the magnet effect"},friendlierDarkhole:{name:"friendlier Darkhole",maxlvl:20,tier:2,description:"weakens the attraction of the black holes"},smallerEnemies:{name:"cute enemies",maxlvl:20,tier:2,description:"makes enemies smaller"},shieldGenerator:{name:"shield generator",maxlvl:5,tier:3,description:"regularly gives you a shield"}},De={moreDamage:{name:"power weapon",maxlvl:20,tier:1,description:"your plasma makes more damage"},biggerProjectile:{name:"big plasma",maxlvl:20,tier:1,description:"your plasma gets bigger"},fasterProjectile:{name:"high frequency",maxlvl:20,tier:1,description:"your plasma gets faster"},fasterReload:{name:"load automatically",maxlvl:20,tier:1,description:"increases your reload speed"},scorePerHit:{name:"goldenGun",maxlvl:20,tier:2,description:"increases the score received from shot enemies"},moreHP:{name:"defense systems",maxlvl:2,tier:10,description:"gives you more HP"},munitionsDepot:{name:"munitions depot",maxlvl:20,tier:2,description:"increases your energyCell storage"},standard:{description:"the standard gun",maxlvl:0},shotgun:{description:"shot 3 plasmas",maxlvl:0},MG:{description:"faster reload",maxlvl:0},aimgun:{description:"plamsa pursues enemies",maxlvl:0},splitgun:{description:"plasma shatters after collision",maxlvl:0},safegun:{description:"throws plasma around the player",maxlvl:0},bazooka:{description:"fires a huge powerful plasma ball",maxlvl:0}},dl={standard:{dmg:1,reload:2,size:5,spheres:1},aimgun:{dmg:1,reload:2.5,size:5,spheres:1},splitgun:{dmg:1,reload:2,size:5,spheres:1},shotgun:{dmg:1,reload:3,size:2,spheres:3},MG:{dmg:1,reload:1,size:5,spheres:1},safegun:{dmg:1,reload:10,size:2,spheres:8},bazooka:{dmg:10,reload:6,size:10,spheres:1}},D0=Object.values(De).filter(t=>!t.maxlvl).length,Gs={increaseScore:{name:"all golden",maxlvl:50,description:"increases overall score gain"},increaseGun:{name:"modern weapons",maxlvl:50,description:"increases all weapon stats"},nerfEnemies:{name:"cute enemies",maxlvl:50,description:`less enemies and
they are slower`},moreItems:{name:"oodles items",maxlvl:50,description:"more items spawn"},nerfBoss:{name:"cute boss",maxlvl:50,description:`reduce boss hp and
slow it down`},longerEffects:{name:"infinite effects",maxlvl:50,description:"all effects last longer"},moreScrap:{name:"scrap collector",maxlvl:50,description:"you get more scrap"},shipStats:{name:"shipStats",maxlvl:50,description:`increases the stats
of your spaceship`},none:{name:"none",maxlvl:0,description:"<3"}},Xc=Object.values(Gs).length,hN=10,dN=10,fN=10,Kl=1e4,mt={energyCell:{name:"energyCell",max:100,maxlvl:3,description:"is needed to use abilities",cost:1,upgradeCost:2e3},lessStartEnemies:{name:"corruption",max:hN,description:"fewer enemies appear at the beginning",cost:10,upgradeCost:1e3},higherDifficultyTimer:{name:"easy mode",max:dN,description:"it takes longer to increase the difficulty",cost:10,upgradeCost:1e3},lowerScoreTimer:{name:"faster gold",max:fN,description:"the score growth is increased faster",cost:10,upgradeCost:1e3},passivSlots:{name:"passivSlots",max:3,description:"allows to use several passive",cost:2e3,upgradeCost:2e3}},$0=5,ar={skill:{name:"research lab",startlvl:0,maxlvl:5,description:"increase your skills max lvl",upgradeCost:5e5},weapon:{name:"weapons lab",startlvl:0,maxlvl:5,description:"increase your weaponupgrades max lvl",upgradeCost:5e5},passiv:{name:"atom lab",startlvl:0,maxlvl:5,description:"increase your passivs max lvl",upgradeCost:5e5},shop:{name:"shop",startlvl:1,maxlvl:5,description:"increase max lvl of shop items",upgradeCost:5e5},hangar:{name:"hangar",startlvl:1,maxlvl:5,description:"you are more likely to get better spaceships",upgradeCost:5e5}},ds={common:{size:30,speed:4,hp:1,scoreMultiplier:1.5,store:80,color:"#A9A9A9"},uncommon:{size:28,speed:4.5,hp:1,scoreMultiplier:2,store:90,color:"#006400"},rare:{size:26,speed:5,hp:2,scoreMultiplier:2.5,store:100,color:"#00008B"},epic:{size:24,speed:5.5,hp:2,scoreMultiplier:3,store:120,color:"#8A2BE2"},legendary:{size:22,speed:6,hp:3,scoreMultiplier:3.5,store:150,color:"#B8860B"}},Gl={darkHole:{name:"harmlessly darkhole",description:`a black hole
only does damage`},growPotion:{name:"heal potion",description:`a grow potion
restores life`},slowSpeed:{name:"cruise control",description:`share four rocket propulsion
and sapr flame automatically
in total chaos mode`},immunity:{name:"immunity",description:`you are immune for 1 second
after a hit`},generator:{name:"generator",description:`buys energy cells
during a round`},autoShot:{name:"autoShot",description:`you automatically
shoot free plasma`}},O0={tier1:{name:"tier1",description:"increase your tier1 skills max lvl",maxlvl:5},tier2:{name:"tier2",description:"increase your tier2 skills max lvl",maxlvl:5},tier3:{name:"tier3",description:"increase your tier3 skills max lvl",maxlvl:5}},N0={tier1:{name:"tier1",description:"increase your tier1 weaponupgrades max lvl",maxlvl:5},tier2:{name:"tier2",description:"increase your tier2 weaponupgrades max lvl",maxlvl:5}},P0={tier1:{name:"tier1",description:"increase your passivs max lvl",maxlvl:5}},M0={tier1:{name:"tier1",description:"you get more scrap",maxlvl:5},tier2:{name:"tier2",description:"Items in the store become cheaper",maxlvl:5}},pN=Object.values(Gl).length;function Ei(t,e){t=t||{},e&&(t.id=t.id||e.uid),t.settings=t.settings||{abilitys:{1:{key:"1",name:""},2:{key:"2",name:""},3:{key:"3",name:""},4:{key:"4",name:""}},moves:{up:"w",down:"s",left:"a",right:"d"},musicVolume:50,effectVolume:50},t.highscore=t.highscore||{normal:0,hardcore:0,totalchaos:0},t.username=t.username||"gast",t.img=t.img||"",t.registeredAt=t.registeredAt||new Date().toJSON(),t.playedGames=t.playedGames||{normal:0,hardcore:0,totalchaos:0},t.defeatedBosses=t.defeatedBosses||{normal:0,hardcore:0,totalchaos:0},t.playMode=t.playMode||"normal",t.playedTime=t.playedTime||0,t.shop=t.shop||{},t.shop.currency=t.shop.currency||0;for(const s of Object.keys(mt))t.shop[s]=t.shop[s]||{amount:0,reBuy:!1,use:!1,lvl:1};t.weaponTree=t.weaponTree||{weaponType:"standard",weaponAvaibleTypes:["standard"],weaponPoints:0,weaponUpgrades:[]};for(const s of Object.entries(De).filter(([n,i])=>i.maxlvl).flatMap(([n,i])=>n))bN(t,s)&&t.weaponTree.weaponUpgrades.push({name:s,lvl:0});t.weaponTree.weaponType=t.weaponTree.weaponType||"standard",t.weaponTree.weaponAvaibleTypes=t.weaponTree.weaponAvaibleTypes||["standard"],t.skillTree=t.skillTree||{skillPoints:0,skills:[]};for(const s of Object.entries(oe).flatMap(([n,i])=>n))wN(t,s)&&t.skillTree.skills.push({name:s,lvl:0});t.passivTree=t.passivTree||{passivType:["none"],passivAvaibleTypes:["none"],passivPoints:0,passivUpgrades:[]};for(const s of Object.keys(Gs))EN(t,s)&&t.passivTree.passivUpgrades.push({name:s,lvl:0});t.spaceport=t.spaceport||{houses:[]},t.spaceport.buildingLicenses=t.spaceport.buildingLicenses||0;for(const s of Object.keys(ar))_N(t,s)&&t.spaceport.houses.push({name:s,lvl:ar[s].startlvl,needScore:0});t.ship=t.ship||{models:[{img:1,rarity:"common",id:0}],selectedModel:{img:1,rarity:"common",id:0},autoSell:!1},t.ship.autoSell=t.ship.autoSell||!1,t.peculiarities=t.peculiarities||{available:[],selected:""},t.daily=t.daily||{day:0,tasks:[],tasksDone:0},t.lvlTree=t.lvlTree||{lvl:1,xp:0},t.lvlTree.lvlSkills=t.lvlTree.lvlSkills||[];for(const s of Object.keys(O0))mN(t,s)&&t.lvlTree.lvlSkills.push({name:s,lvl:0});t.lvlTree.lvlWeaponUpgrade=t.lvlTree.lvlWeaponUpgrade||[];for(const s of Object.keys(N0))gN(t,s)&&t.lvlTree.lvlWeaponUpgrade.push({name:s,lvl:0});t.lvlTree.lvlPassiv=t.lvlTree.lvlPassiv||[];for(const s of Object.keys(P0))yN(t,s)&&t.lvlTree.lvlPassiv.push({name:s,lvl:0});t.lvlTree.lvlShop=t.lvlTree.lvlShop||[];for(const s of Object.keys(M0))vN(t,s)&&t.lvlTree.lvlShop.push({name:s,lvl:0});return t}function mN(t,e){return t.lvlTree.lvlSkills[t.lvlTree.lvlSkills.findIndex(s=>s.name==e)]===void 0}function gN(t,e){return t.lvlTree.lvlWeaponUpgrade[t.lvlTree.lvlWeaponUpgrade.findIndex(s=>s.name==e)]===void 0}function yN(t,e){return t.lvlTree.lvlPassiv[t.lvlTree.lvlPassiv.findIndex(s=>s.name==e)]===void 0}function vN(t,e){return t.lvlTree.lvlShop[t.lvlTree.lvlShop.findIndex(s=>s.name==e)]===void 0}function _N(t,e){return t.spaceport.houses[t.spaceport.houses.findIndex(s=>s.name==e)]===void 0}function bN(t,e){return t.weaponTree.weaponUpgrades[t.weaponTree.weaponUpgrades.findIndex(s=>s.name==e)]===void 0}function wN(t,e){return t.skillTree.skills[t.skillTree.skills.findIndex(s=>s.name==e)]===void 0}function EN(t,e){return t.passivTree.passivUpgrades[t.passivTree.passivUpgrades.findIndex(s=>s.name==e)]===void 0}const Ti=document.createElement("audio"),vg=qe(!1);Ti.setAttribute("id","music");Ti.setAttribute("src","/music/Space.mp3");Ti.setAttribute("autoplay","autoplay");Ti.loop=!0;kr(50);function kr(t=50){Ti&&(Ti.volume=t/5e3)}function TN(){if(!vg.value)try{Ti.play()}catch{return}vg.value=!0}function _g(t=50,e){const s=document.createElement("audio");switch(e.type){case"clearField":s.setAttribute("src","/music/BombSound.mp3");break;default:s.setAttribute("src","/music/CollectItemSound.mp3");break}s.setAttribute("id","itemSound"),s.setAttribute("autoplay","autoplay"),s.volume=t/600,s.play()}function kN(t=50){const e=document.createElement("audio");e.setAttribute("id","plasmaSound"),e.setAttribute("src","/music/PlasmaSound.mp3"),e.setAttribute("autoplay","autoplay"),e.volume=t/600,e.play()}function ot(t=50){const e=document.createElement("audio");e.setAttribute("id","ButtonSound"),e.setAttribute("src","/music/ButtonPressed.mp3"),e.setAttribute("autoplay","autoplay"),e.volume=t/600;try{e.play()}catch{return}}var AN=function(){return Boolean(window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))},zh;typeof window<"u"&&(typeof Promise<"u"?zh=new Promise(function(t){return window.addEventListener("load",t)}):zh={then:function(t){return window.addEventListener("load",t)}});function SN(t,e){e===void 0&&(e={});var s=e.registrationOptions;s===void 0&&(s={}),delete e.registrationOptions;var n=function(i){for(var r=[],o=arguments.length-1;o-- >0;)r[o]=arguments[o+1];e&&e[i]&&e[i].apply(e,r)};"serviceWorker"in navigator&&zh.then(function(){AN()?(IN(t,n,s),navigator.serviceWorker.ready.then(function(i){n("ready",i)}).catch(function(i){return zo(n,i)})):(R0(t,n,s),navigator.serviceWorker.ready.then(function(i){n("ready",i)}).catch(function(i){return zo(n,i)}))})}function zo(t,e){navigator.onLine||t("offline"),t("error",e)}function R0(t,e,s){navigator.serviceWorker.register(t,s).then(function(n){if(e("registered",n),n.waiting){e("updated",n);return}n.onupdatefound=function(){e("updatefound",n);var i=n.installing;i.onstatechange=function(){i.state==="installed"&&(navigator.serviceWorker.controller?e("updated",n):e("cached",n))}}}).catch(function(n){return zo(e,n)})}function IN(t,e,s){fetch(t).then(function(n){n.status===404?(e("error",new Error("Service worker not found at "+t)),bg()):n.headers.get("content-type").indexOf("javascript")===-1?(e("error",new Error("Expected "+t+" to have javascript content-type, but received "+n.headers.get("content-type"))),bg()):R0(t,e,s)}).catch(function(n){return zo(e,n)})}function bg(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()}).catch(function(t){return zo(emit,t)})}const L0=qe(!1);SN(`${{}.BASE_URL}service-worker.js`,{ready(){console.log(`App is being served from cache by a service worker.
For more details, visit https://goo.gl/AFskqB`)},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh."),L0.value=!0},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});const CN="v0.4.1";self.addEventListener("activate",t=>{t.waitUntil((async()=>(await caches.keys()).map(async s=>{if(s!==CN)return console.log("Service Worker: Removing old cache: "+s),await caches.delete(s)}))())});function DN(){navigator.serviceWorker.register(`${{}.BASE_URL}service-worker.js`).then(t=>{t.update()})}const $N=h("span",{class:"visually-hidden"},"Loading...",-1),ON=[$N],NN=Oe({__name:"Spinner",props:{color:{default:"primary"},size:null},setup(t){const e=t,{color:s,size:n}=as(e);return(i,r)=>(g(),y("div",{class:We([E(s)?`text-${E(s)}`:"","spinner-border spinner-border-sm"]),style:Ae({width:E(n),height:E(n)}),role:"status"},ON,6))}}),PN=["href"],MN={class:"d-flex align-items-center justify-content-center h-100"},RN=["disabled"],LN={inheritAttrs:!1},xN=Oe({...LN,__name:"Button",props:{spinnerColor:{default:""},spinnerSize:{default:"1em"},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},href:null,sideButton:{type:Boolean,default:!1},class:{default:"btn btn-primary"}},setup(t){const e=t,{spinnerColor:s,spinnerSize:n}=as(e);return(i,r)=>t.href?(g(),y("a",Rs({key:0,href:t.href},i.$attrs,{style:t.sideButton?"border-left:none; width:100%; padding:none;border-radius: 0 0.5rem 0.5rem 0;border-width: 1px;":"",class:["",t.class]}),[h("div",MN,[Gt(i.$slots,"default",{},void 0,!0)])],16,PN)):(g(),y("button",Rs({key:1},i.$attrs,{disabled:t.loading||t.disabled,style:t.sideButton?"border-left:none; width:100%; padding:none;border-radius: 0 0.5rem 0.5rem 0;border-width: 1px;":"",class:t.class}),[t.loading?(g(),wn(NN,{key:0,color:E(s),class:"me-2",size:E(n)},null,8,["color","size"])):V("",!0),Gt(i.$slots,"default",{},void 0,!0)],16,RN))}});const He=(t,e)=>{const s=t.__vccOpts||t;for(const[n,i]of e)s[n]=i;return s},Ta=He(xN,[["__scopeId","data-v-d1064c2f"]]);const VN=["data-title"],FN=Oe({__name:"Tooltip",props:{tooltip:{default:""},tooltipColor:{default:"black"},tooltipBgColor:{default:"#eee"},direction:{default:"bottom"}},setup(t){const e=t;Fn(u=>({"73bed88d":t.tooltipBgColor,"91107cdc":t.tooltipColor,"013450a3":E(n),"2551fa79":E(i),"0840201d":E(o),f578942c:E(r)}));const{direction:s}=as(e),n=ke(()=>a.value.top),i=ke(()=>a.value.left),r=ke(()=>a.value.right),o=ke(()=>a.value.bottom),a=ke(()=>{switch(s.value){default:case"bottom":return{top:"calc(100% + 0.2rem)",left:"2rem",bottom:"auto",right:"auto"};case"top":return{top:"auto",left:"2rem",bottom:"calc(100% + 0.2rem)",right:"auto"};case"left":return{top:"-2px",left:"auto",bottom:"auto",right:"calc(100% + 0.2rem)"};case"right":return{top:"-2px",left:"calc(100% + 0.2rem)",bottom:"auto",right:"auto"}}}),{tooltip:l}=as(e);return(u,c)=>E(l)?(g(),y("div",{key:0,"data-title":E(l)},[Gt(u.$slots,"default",{},void 0,!0)],8,VN)):Gt(u.$slots,"default",{key:1},void 0,!0)}});const Rf=He(FN,[["__scopeId","data-v-52cc9fc5"]]),UN=["id"],BN={key:0,class:"accordion-header"},jN=["id"],HN=["data-bs-target","aria-controls"],zN={class:"pe-2"},qN=["id","aria-labelledby","data-bs-parent"],WN={class:"accordion-body p-0"};""+JSON.stringify(Math.random()).slice(2);function Jc(t){const e=ke(()=>{let n=100;return n-=(t==null?void 0:t.value)||0,n+"%"}),s=ke(()=>(t==null?void 0:t.value)+"%");return{inputWidth:e,sideWidthComputed:s}}function Ni(t,e){if(!t)return"";if(typeof t=="string")return t;const s=t[e];return typeof s=="string"?s:(s==null?void 0:s.join(`
`))||""}const KN={key:0,class:"error"},GN={inheritAttrs:!1},QN=Oe({...GN,__name:"Error",props:{error:{default:""},errorColor:{default:"red"},name:{default:""}},setup(t){const e=t;Fn(o=>({"580ba908":E(n)}));const{error:s,errorColor:n,name:i}=as(e),r=ke(()=>Ni(s.value,i.value).replaceAll(/\n|<br>/g,`
`));return(o,a)=>E(r).length>0?(g(),y("div",KN,w(E(r)),1)):V("",!0)}});const zr=He(QN,[["__scopeId","data-v-244fce67"]]),YN={key:0,class:"icon"},XN=["value"],JN=["type","maxlength","value"],ZN={inheritAttrs:!1},eP=Oe({...ZN,__name:"Email",props:{modelValue:null,name:{default:""},error:{default:""},errorColor:{default:"red"},labelClass:null,sideWidth:{default:20},sideInputType:null,sideInputClass:null,sideInputMaxLength:null,sideInputVModel:null,placeholder:null,borderColor:null,backgroundColor:{default:"#f8fafc"}},emits:["update:modelValue","update:sideInputVModel"],setup(t,{emit:e}){const s=t;Fn(q=>({bc50eb4a:t.backgroundColor,"392f434a":E(C),"7ad904d6":E(R),a058a63c:E(z)}));const{modelValue:n,error:i,errorColor:r,labelClass:o,sideWidth:a,sideInputType:l,sideInputClass:u,sideInputMaxLength:c,sideInputVModel:d,placeholder:f,borderColor:p,name:b}=as(s),_=qe(!1),A=Go(),C=ke(()=>Ni(i.value,b.value)?r==null?void 0:r.value:p==null?void 0:p.value),P=ke(()=>!!A.icon),M=ke(()=>!!A.button),{inputWidth:R,sideWidthComputed:z}=Jc(a);function W(q){e("update:modelValue",q.target.value)}function ce(q){e("update:sideInputVModel",q.target.value)}return(q,Z)=>(g(),y("div",{class:"input-contain mt-3",style:Ae({backgroundColor:t.backgroundColor})},[E(P)&&(_.value||E(n))?(g(),y("div",YN,[Gt(q.$slots,"icon",{},void 0,!0)])):V("",!0),h("input",Rs(q.$attrs,{class:["form-control shadow-none",{dirty:E(n)}],type:"email",value:E(n),onInput:W,style:[E(M)||E(l)?`border-radius: 0.5rem 0 0 0.5rem; width:${E(R)}`:"",E(P)?"padding-left: 1.5rem;":"padding-left: none;"],onFocus:Z[0]||(Z[0]=de=>_.value=!0),onBlur:Z[1]||(Z[1]=de=>_.value=!1),autocomplete:"off"}),null,16,XN),h("label",{class:We(["text",E(o)])},w(E(f)),3),E(M)?(g(),y("button",{key:1,class:"sideButton",style:Ae(`width:${E(z)}`)},[Gt(q.$slots,"button",{},void 0,!0)],4)):V("",!0),E(l)?(g(),y("input",{key:2,class:We(["sideInput",E(u)]),type:E(l),maxlength:E(c),onInput:ce,value:E(d)},null,42,JN)):V("",!0),j(zr,{error:E(i),"error-color":E(r),name:E(b)},null,8,["error","error-color","name"])],4))}});const x0=He(eP,[["__scopeId","data-v-e21b5ea7"]]);const tP={key:0,class:"icon"},sP=["value"],nP=["type","maxlength","value"],iP={inheritAttrs:!1},rP=Oe({...iP,__name:"Text",props:{modelValue:null,name:{default:""},error:{default:""},errorColor:{default:"red"},labelClass:null,sideWidth:{default:20},sideInputType:null,sideInputClass:null,sideInputMaxLength:null,sideInputVModel:null,placeholder:null,borderColor:null,backgroundColor:{default:"#f8fafc"}},emits:["update:modelValue","update:sideInputVModel"],setup(t,{emit:e}){const s=t;Fn(q=>({"4f87a289":t.backgroundColor,"38c8d710":E(C),"410a07e8":E(R),"9c431ce0":E(z)}));const{modelValue:n,error:i,errorColor:r,labelClass:o,sideWidth:a,sideInputType:l,sideInputClass:u,sideInputMaxLength:c,sideInputVModel:d,placeholder:f,borderColor:p,name:b}=as(s),_=qe(!1),A=Go(),C=ke(()=>Ni(i.value,b.value)?r==null?void 0:r.value:p==null?void 0:p.value),P=ke(()=>!!A.icon),M=ke(()=>!!A.button),{inputWidth:R,sideWidthComputed:z}=Jc(a);function W(q){e("update:modelValue",q.target.value)}function ce(q){e("update:sideInputVModel",q.target.value)}return(q,Z)=>(g(),y("div",{class:"input-contain mt-3",style:Ae({backgroundColor:t.backgroundColor})},[E(P)&&(_.value||E(n))?(g(),y("div",tP,[Gt(q.$slots,"icon",{},void 0,!0)])):V("",!0),h("input",Rs(q.$attrs,{class:["form-control shadow-none",{dirty:E(n)}],type:"text",value:E(n),onInput:W,style:[E(M)||E(l)?`border-radius: 0.5rem 0 0 0.5rem; width:${E(R)}`:"",E(P)?"padding-left: 1.5rem;":"padding-left: none;"],onFocus:Z[0]||(Z[0]=de=>_.value=!0),onBlur:Z[1]||(Z[1]=de=>_.value=!1),autocomplete:"off"}),null,16,sP),h("label",{class:We(["text",E(o)])},w(E(f)),3),E(M)?(g(),y("button",{key:1,class:"sideButton",style:Ae(`width:${E(z)}`)},[Gt(q.$slots,"button",{},void 0,!0)],4)):V("",!0),E(l)?(g(),y("input",{key:2,class:We(["sideInput",E(u)]),type:E(l),maxlength:E(c),onInput:ce,value:E(d)},null,42,nP)):V("",!0),j(zr,{error:E(i),"error-color":E(r),name:E(b)},null,8,["error","error-color","name"])],4))}});const Zc=He(rP,[["__scopeId","data-v-639b2a34"]]),ka=t=>(cn("data-v-aeb7255c"),t=t(),un(),t),oP={key:0,class:"icon"},aP=["type","value"],lP={key:0,xmlns:"http://www.w3.org/2000/svg",width:"70%",height:"70%",fill:"currentColor",class:"bi bi-eye-slash",viewBox:"0 0 16 16"},cP=ka(()=>h("path",{d:"M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z"},null,-1)),uP=ka(()=>h("path",{d:"M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z"},null,-1)),hP=ka(()=>h("path",{d:"M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709zm10.296 8.884-12-12 .708-.708 12 12-.708.708z"},null,-1)),dP=[cP,uP,hP],fP={key:1,xmlns:"http://www.w3.org/2000/svg",width:"70%",height:"70%",fill:"currentColor",class:"bi bi-eye",viewBox:"0 0 16 16"},pP=ka(()=>h("path",{d:"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"},null,-1)),mP=ka(()=>h("path",{d:"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"},null,-1)),gP=[pP,mP],yP={inheritAttrs:!1},vP=Oe({...yP,__name:"Password",props:{modelValue:null,name:{default:""},error:{default:""},errorColor:{default:"red"},labelClass:null,btnClass:null,sideWidth:{default:20},placeholder:null,borderColor:null,backgroundColor:{default:"#f8fafc"}},emits:["update:modelValue","update:sideInputVModel"],setup(t,{emit:e}){const s=t;Fn(R=>({"6a53bdd5":t.backgroundColor,"391129c4":E(_),"76150d1c":E(C),"4a10e9dc":E(P)}));const{modelValue:n,error:i,errorColor:r,labelClass:o,btnClass:a,sideWidth:l,placeholder:u,borderColor:c,name:d}=as(s),f=qe(!1),p=qe(!1),b=Go(),_=ke(()=>Ni(i.value,d.value)?r==null?void 0:r.value:c==null?void 0:c.value),A=ke(()=>!!b.icon),{inputWidth:C,sideWidthComputed:P}=Jc(l);function M(R){e("update:modelValue",R.target.value)}return(R,z)=>(g(),y("div",{class:"input-contain mt-3",style:Ae({backgroundColor:t.backgroundColor})},[E(A)&&(p.value||E(n))?(g(),y("div",oP,[Gt(R.$slots,"default",{},void 0,!0)])):V("",!0),h("input",Rs(R.$attrs,{class:["form-control shadow-none",{dirty:E(n)}],type:f.value?"text":"password",value:E(n),onInput:M,style:[`border-radius: 0.5rem 0 0 0.5rem; width:${E(C)}`,E(A)?"padding-left: 1.5rem;":"padding-left: none;"],onFocus:z[0]||(z[0]=W=>p.value=!0),onBlur:z[1]||(z[1]=W=>p.value=!1),autocomplete:"off"}),null,16,aP),h("label",{class:We(["text",E(o)])},w(E(u)),3),h("button",{type:"button",onClick:z[2]||(z[2]=W=>f.value=!f.value),class:We([E(a),"sideInput"])},[f.value?(g(),y("svg",fP,gP)):(g(),y("svg",lP,dP))],2),j(zr,{error:E(i),"error-color":E(r),name:E(d)},null,8,["error","error-color","name"])],4))}});const qh=He(vP,[["__scopeId","data-v-aeb7255c"]]);const _P=["value"],bP={inheritAttrs:!1},wP=Oe({...bP,__name:"Textarea",props:{modelValue:null,name:{default:""},error:{default:""},errorColor:{default:"red"},labelClass:null,placeholder:null,borderColor:null,backgroundColor:{default:"#f8fafc"}},emits:["update:modelValue"],setup(t,{emit:e}){const s=t;Fn(p=>({"09658090":E(c),c085d202:E(d)}));const{modelValue:n,error:i,errorColor:r,labelClass:o,placeholder:a,borderColor:l,name:u,backgroundColor:c}=as(s),d=ke(()=>Ni(i.value,u.value)?r==null?void 0:r.value:l==null?void 0:l.value);function f(p){e("update:modelValue",p.target.value)}return(p,b)=>(g(),y("div",{class:"input-contain mt-3",style:Ae({backgroundColor:E(c)})},[h("textarea",Rs(p.$attrs,{class:["form-control shadow-none",{dirty:E(n)}],onInput:f,value:E(n),rows:"3"}),null,16,_P),h("label",{class:We(["text",E(o)])},w(E(a)),3),j(zr,{error:E(i),"error-color":E(r),name:E(u)},null,8,["error","error-color","name"])],4))}});const EP=He(wP,[["__scopeId","data-v-63a54ed1"]]),TP={class:"input-contain mt-3"},kP={key:0,class:"icon"},AP=["value","id"],SP=["value","min","max"],IP={inheritAttrs:!1},CP=Oe({...IP,__name:"Range",props:{modelValue:null,controlInput:{type:Boolean,default:!0},name:{default:""},error:{default:""},errorColor:{default:"red"},labelClass:null,btnClass:null,sideWidth:{default:20},sideInputStyle:null,placeholder:null,borderColor:null},emits:["update:modelValue","update:sideInputVModel"],setup(t,{emit:e}){const s=t;Fn(q=>({"7927b810":E(C),"245a0d60":E(M),"267ca33a":E(z),"7a62c9b0":E(R)}));const{modelValue:n,controlInput:i,error:r,errorColor:o,labelClass:a,sideWidth:l,sideInputStyle:u,placeholder:c,borderColor:d,name:f}=as(s);md(()=>{p.value=document.getElementById(b.value)});const p=qe(),b=qe(JSON.stringify(Math.random())),_=qe(!1),A=Go(),C=ke(()=>Ni(r.value,f.value)?o==null?void 0:o.value:d==null?void 0:d.value),P=ke(()=>!!A.icon),M=ke(()=>{let q=100;return q-=(l==null?void 0:l.value)||0,q+"%"}),R=ke(()=>(l==null?void 0:l.value)+"%"),z=ke(()=>{var Me,ze;const q=+((Me=p.value)==null?void 0:Me.min)||0,Z=+((ze=p.value)==null?void 0:ze.max)||100;return(n.value-q)/(Z-q)*100+"%"});function W(q){if(!(p.value.step&&q.target.value*1%p.value.step!=0)){if(i.value){let Z=q.target.value*1;Z>(q.target.max||100)&&(Z=q.target.max*1||100),Z<(q.target.min||0)&&(Z=q.target.min*1||0),isNaN(Z)&&(Z=0),q.target.value=Z}q.target.value?e("update:modelValue",q.target.value*1):e("update:modelValue",q.target.value)}}function ce(q){var Z,de;p.value.step&&(q.target.value=Math.round(q.target.value/((Z=p.value)==null?void 0:Z.step))*((de=p.value)==null?void 0:de.step)),W(q)}return(q,Z)=>{var de,Ie;return g(),y("div",TP,[E(P)&&(_.value||E(n))?(g(),y("div",kP,[Gt(q.$slots,"default",{},void 0,!0)])):V("",!0),h("input",Rs(q.$attrs,{class:"form-control shadow-none",type:"range",value:E(n),onInput:W,id:b.value,style:[`width:${E(M)}`,E(P)?"padding-left: 1.5rem;":"padding-left: none;"],onFocus:Z[0]||(Z[0]=Me=>_.value=!0),onBlur:Z[1]||(Z[1]=Me=>_.value=!1),autocomplete:"off"}),null,16,AP),h("label",{class:We(["text",E(a)])},w(E(c)),3),h("input",{type:"number",class:"sideInput",onInput:W,onBlur:ce,value:E(n),style:Ae(E(u)),min:((de=p.value)==null?void 0:de.min)||0,max:((Ie=p.value)==null?void 0:Ie.max)||100},null,44,SP),j(zr,{error:E(r),"error-color":E(o),name:E(f)},null,8,["error","error-color","name"])])}}});const DP=He(CP,[["__scopeId","data-v-ea3cb565"]]),$P={class:"mt-3 selectInput"},OP={key:0,class:"icon"},NP=["id","value"],PP=["onClick"],MP=["data-text","innerHTML"],RP=["type","maxlength","value"],LP={inheritAttrs:!1},xP=Oe({...LP,__name:"Select",props:{modelValue:null,placeholder:null,backgroundColor:{default:"#f8fafc"},options:null,showAll:{type:Boolean,default:!1},controlInput:{type:Boolean,default:!0},selectOnBlur:{type:Boolean,default:!0},noElementMessage:{default:"not found"},listClass:null,name:{default:""},error:{default:""},errorColor:{default:"red"},labelClass:null,sideWidth:{default:20},sideInputType:null,sideInputClass:null,sideInputMaxLength:null,sideInputVModel:null,borderColor:null,optionProjection:{type:Function,default:t=>t},listItemClass:{type:Function,default:t=>""},matchFromStart:{type:Boolean,default:!1}},emits:["update:modelValue","update:sideInputVModel","onInput","onFocus","selectItem","onBlur"],setup(t,{emit:e}){const s=t;Fn(L=>({"7fc58c66":E(r),e6317056:E(ze),"9062b02a":E(Te),"6b6d4fa6":E(ye),"5abcd3ce":H.value}));const n=V1(),{modelValue:i,backgroundColor:r,showAll:o,selectOnBlur:a,controlInput:l,noElementMessage:u,listClass:c,error:d,errorColor:f,labelClass:p,sideWidth:b,sideInputType:_,sideInputClass:A,sideInputMaxLength:C,sideInputVModel:P,placeholder:M,borderColor:R,optionProjection:z,options:W,matchFromStart:ce,name:q}=as(s),Z=qe(JSON.stringify(Math.random())),de=Go(),Ie=qe(!1),Me=window.document,ze=ke(()=>Ni(d.value,q.value)?f==null?void 0:f.value:R==null?void 0:R.value),dt=ke(()=>!!de.icon),ft=ke(()=>!!de.button),{inputWidth:Te,sideWidthComputed:ye}=Jc(b),be=ke(()=>{var Re,ae;if(o.value)return W.value;let L;ce.value?L=new RegExp("^"+Lt(i.value),"i"):L=new RegExp(Lt(i.value),"i");let X=[];try{X=(Re=W.value)==null?void 0:Re.filter(m=>{var v;return(v=z.value)==null?void 0:v.call(z,m).match(L)}),X.length||(X=X.concat((ae=W.value)==null?void 0:ae.filter(m=>m.match(L))))}catch{X=[]}return X.length>50?X.slice(0,50):X});function tt(L){S(L),e("onInput",{modelValue:i.value,options:be.value})}function Ht(){Ie.value=!0,setTimeout(()=>{var L;H.value=((L=Me.getElementById(Z.value))==null?void 0:L.getBoundingClientRect().width)+"px"},0),e("onFocus",{modelValue:i.value,options:be.value})}function bt(){var L;if(Ie.value=!1,l.value&&!((L=be.value)!=null&&L.some(X=>z.value(X)==i.value))){S("");return}a.value&&(W!=null&&W.value.find(X=>z.value(X)==i.value)?e("selectItem",W==null?void 0:W.value.find(X=>z.value(X)==i.value)):W!=null&&W.value.find(X=>X==i.value)&&e("selectItem",W==null?void 0:W.value.find(X=>X==i.value))),e("onBlur",{modelValue:i.value,options:be.value})}async function Ze(L){var X;await S(z.value(L)),(X=Me.getElementById(Z.value))==null||X.blur(),a||e("selectItem",L)}function Lt(L){return L.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Qt(L){const X=new RegExp(`(${Lt(i.value)})`,"ig");return L.replace(X,"<strong>$1</strong>")}function S(L){typeof L=="string"?e("update:modelValue",L):e("update:modelValue",L.target.value)}function K(L){e("update:sideInputVModel",L.target.value)}const H=qe("");return(L,X)=>{var Re,ae;return g(),y("div",$P,[h("div",{class:"simple-typeahead input-contain",style:Ae({backgroundColor:E(r)})},[E(dt)&&(Ie.value||E(i))?(g(),y("div",OP,[Gt(L.$slots,"icon",{},void 0,!0)])):V("",!0),(H.value=((Re=E(Me).getElementById(Z.value))==null?void 0:Re.getBoundingClientRect().width)+"px",g(),y("input",Rs({key:1},E(n),{id:Z.value,class:["simple-typeahead-input form-control shadow-none",{dirty:E(i)}],style:[E(ft)||E(_)?`border-radius: 0.5rem 0 0 0.5rem; width:${E(Te)}`:"",Ie.value?E(ft)||E(_)?"border-radius: 0.5rem 0 0 0;border-width: 2px ":"border-radius: 0.5rem 0.5rem 0 0;border-width: 2px ":"",E(dt)?"padding-left: 1.5rem;":"padding-left: none;"],type:"text",value:E(z)(E(i))||E(i),onInput:tt,onFocus:Ht,onBlur:bt,autocomplete:"off"}),null,16,NP)),h("label",{class:We(["text",E(p)])},w(E(M)),3),Ie.value?(g(),y("div",{key:2,class:We(["simple-typeahead-list p-0",E(c)]),style:Ae(E(ft)||E(_)?`width:${E(Te)}`:"")},[(g(!0),y(te,null,ve(E(be),(m,v)=>(g(),y("div",{class:We(["simple-typeahead-list-item",t.listItemClass(m)]),key:v,onMousedown:X[0]||(X[0]=ns(()=>{},["prevent"])),onClick:ns(T=>Ze(m),["stop"])},[h("span",{class:"simple-typeahead-list-item-text","data-text":E(z)(m),innerHTML:Qt(E(z)(m))},null,8,MP)],42,PP))),128)),(ae=E(be))!=null&&ae.length?V("",!0):(g(),y("div",{key:0,class:We(["simple-typeahead-list-item",t.listItemClass(E(u))])},w(E(u)),3))],6)):V("",!0),E(ft)?(g(),y("button",{key:3,class:"sideButton",style:Ae(`width:${E(ye)}`)},[Gt(L.$slots,"button",{},void 0,!0)],4)):V("",!0),E(_)?(g(),y("input",{key:4,class:We(["sideInput",E(A)]),type:E(_),maxlength:E(C),onInput:K,value:E(P)},null,42,RP)):V("",!0)],4),j(zr,{error:E(d),"error-color":E(f),name:E(q)},null,8,["error","error-color","name"])])}}});const VP=He(xP,[["__scopeId","data-v-40cde55a"]]);const FP=Oe({components:{Button:Ta,TextInput:Zc},setup(){return{skillDetails:oe}},props:{playerProp:{type:Object,required:!0,size:Number},editAble:Boolean},data(){return{player:{},dataLoad:!1,hardCoreMode:!1,editProfile:!1,img:"",images:["001","002","003","004","005"],message:""}},mounted(){this.player=this.playerProp,this.dataLoad=!0,this.editAble&&kr(this.player.settings.musicVolume)},computed:{registered(){return JSON.parse(this.player.registeredAt)},playTime(){let t=this.player.playedTime,e=" ticks";return t/60>1&&(t/=60,e=" sec"),t/60>1&&(t/=60,e=" min"),t/60>1&&(t/=60,e=" hours"),t.toFixed(1)+e}},methods:{checkUserName(){return this.player.username=="gast"?(this.message="invalid username",!1):(this.message="",!0)},buttonSound(){ot(this.player.settings.effectVolume)},changeImg(t){ot(this.player.settings.effectVolume),this.player.img=t},async toggleEdit(t){if(ot(this.player.settings.effectVolume),this.editProfile=!this.editProfile,t)try{await Ks(this.player)}catch{at()}}}}),UP=""+new URL("../img/avatars/avatar_placeholder.png",import.meta.url).href;const _t=t=>(cn("data-v-bb3bdffb"),t=t(),un(),t),BP={key:0,class:"card card-default text-light"},jP={class:"card-header header row g-0"},HP={key:0,class:"alert alert-danger"},zP={class:"card-body row gx-0"},qP={class:"profile-pic col-4"},WP={key:0},KP=["src"],GP={key:1},QP=_t(()=>h("img",{src:UP,alt:"",style:{height:"20vw",width:"20vw"}},null,-1)),YP=[QP],XP={key:2},JP={class:"modal-dialog"},ZP=_t(()=>h("div",{class:"modal-header"},[h("h5",{class:"modal-title",id:"exampleModalLabel"},"profile picture"),h("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),eM={class:"modal-body"},tM=["onClick"],sM=["src"],nM={class:"modal-footer"},iM=_t(()=>h("br",null,null,-1)),rM=_t(()=>h("br",null,null,-1)),oM=_t(()=>h("br",null,null,-1)),aM={class:"col-8 row"},lM={class:"row g-0"},cM={key:0,class:"col-11"},uM={style:{"font-size":"1.5rem"}},hM={key:1,class:"input-contain col-11 mt-3",style:{height:"5vh"}},dM={class:"col-6 gy-2"},fM=_t(()=>h("br",null,null,-1)),pM=_t(()=>h("br",null,null,-1)),mM=_t(()=>h("br",null,null,-1)),gM=_t(()=>h("br",null,null,-1)),yM=_t(()=>h("br",null,null,-1)),vM=_t(()=>h("br",null,null,-1)),_M={class:"col-6 gy-2 aling-content-start"},bM=_t(()=>h("br",null,null,-1)),wM=_t(()=>h("br",null,null,-1)),EM=_t(()=>h("br",null,null,-1)),TM=_t(()=>h("br",null,null,-1)),kM=_t(()=>h("br",null,null,-1)),AM={class:"card-footer"},SM={class:"features"},IM={class:"row g-0"},CM=_t(()=>h("div",{class:"col-8"},null,-1)),DM={key:0,class:"col-4"},$M={key:0},OM={key:1},NM={key:0},PM=_t(()=>h("div",{class:"footer-header"},[h("a",{class:"text-light",href:"https://discord.gg/G3UHhTaUNf"},"Join us on discord")],-1)),MM=[PM];function RM(t,e,s,n,i,r){const o=Fe("Button"),a=Fe("TextInput");return t.dataLoad?(g(),y("div",BP,[h("div",jP,[t.player.username.length<3||t.player.username=="gast"?(g(),y("div",HP,"invalid username")):V("",!0)]),h("div",zP,[h("div",qP,[t.player.img?(g(),y("div",WP,[h("img",{src:`/img/avatars/char_${t.player.img}.png`,alt:"",style:{height:"20vw",width:"20vw"}},null,8,KP)])):(g(),y("div",GP,YP)),t.editProfile?(g(),y("div",XP,[j(o,{type:"button",onClick:e[0]||(e[0]=l=>t.buttonSound()),class:"btn btn-primary shadow-none","data-bs-toggle":"modal","data-bs-target":"#exampleModal"},{default:Pe(()=>[k(" change profile picture ")]),_:1}),h("div",{class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",onClick:e[3]||(e[3]=l=>t.buttonSound())},[h("div",JP,[h("div",{class:"modal-content",onClick:e[2]||(e[2]=ns(()=>{},["stop"]))},[ZP,h("div",eM,[(g(!0),y(te,null,ve(t.images,l=>(g(),y("div",{key:l,onClick:u=>t.changeImg(l),"data-bs-dismiss":"modal"},[h("img",{src:`/img/avatars/char_${l}.png`,alt:""},null,8,sM)],8,tM))),128))]),h("div",nM,[h("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:e[1]||(e[1]=l=>t.buttonSound())},"close")])])])])])):V("",!0),h("div",null,[k(" registered since: "),iM,k(" "+w(new Date(t.player.registeredAt).toLocaleString())+" ",1),rM,k(" played time: "),oM,k(" "+w(t.playTime),1)])]),h("div",aM,[h("div",lM,[t.editProfile?(g(),y("div",hM,[j(a,{placeholder:"username",minlength:"3",class:"form-control",id:"username",type:"text",modelValue:t.player.username,"onUpdate:modelValue":e[4]||(e[4]=l=>t.player.username=l),autocomplete:"off",style:{"text-shadow":"none"},onChange:e[5]||(e[5]=l=>t.checkUserName()),required:""},null,8,["modelValue"])])):(g(),y("h4",cM,[k(" Username: "),h("u",uM,w(t.player.username),1)]))]),h("div",dM,[h("div",null,[k(" Highscore normal: "),fM,k(" "+w(Math.round(t.player.highscore.normal)),1)]),h("div",null,[k(" Played normal: "),pM,k(" "+w(t.player.playedGames.normal),1)]),h("div",null,[k(" Highscore hardcore: "),mM,k(" "+w(Math.round(t.player.highscore.hardcore)),1)]),h("div",null,[k(" Played hardcore: "),gM,k(" "+w(t.player.playedGames.hardcore),1)]),h("div",null,[k(" Highscore totalchaos: "),yM,k(" "+w(Math.round(t.player.highscore.totalchaos)),1)]),h("div",null,[k(" Played totalchaos: "),vM,k(" "+w(t.player.playedGames.totalchaos),1)])]),h("div",_M,[h("div",null,[k(" Skill Points: "),bM,k(" "+w(t.player.skillTree.skillPoints),1)]),h("div",null,[k(" Weapon number: "),wM,k(" "+w(t.player.weaponTree.weaponAvaibleTypes.length),1)]),h("div",null,[k(" Weapon Points: "),EM,k(" "+w(t.player.weaponTree.weaponPoints),1)]),h("div",null,[k(" Passiv items number: "),TM,k(" "+w(t.player.passivTree.passivAvaibleTypes.length-1),1)]),h("div",null,[k(" Passiv Points: "),kM,k(" "+w(t.player.passivTree.passivPoints),1)])])])]),h("div",AM,[h("div",SM,[h("div",IM,[CM,t.editAble?(g(),y("div",DM,[t.editProfile?V("",!0):(g(),y("div",$M,[j(o,{class:"btn btn-primary shadow-none w-50",onClick:e[6]||(e[6]=l=>t.toggleEdit(!1))},{default:Pe(()=>[k("edit profile")]),_:1})])),t.editProfile?(g(),y("div",OM,[j(o,{class:"btn btn-success shadow-none w-50",onClick:e[7]||(e[7]=l=>t.toggleEdit(!0)),disabled:t.player.username.length<3||t.player.username=="gast"},{default:Pe(()=>[k(" save profile ")]),_:1},8,["disabled"])])):V("",!0)])):V("",!0)])]),t.editAble?(g(),y("div",NM,MM)):V("",!0)])])):V("",!0)}const Lf=He(FP,[["render",RM],["__scopeId","data-v-bb3bdffb"]]),LM=Oe({components:{PlayerCard:Lf},setup(){return{newVersion:L0}},data(){return{dataLoad:!1,user:At,player:{},hardCoreMode:!1,editProfile:!1,img:"",images:["001","002","003","004","005"]}},computed:{registered(){return JSON.parse(this.player.registeredAt)}},async mounted(){if(this.user){try{let t=await Ea();t&&(this.player=t.player)}catch{at()}this.player=Ei(this.player,this.user)}this.buttonSound(),this.dataLoad=!0},methods:{async reload(){await DN(),this.$router.go(0)},changeImg(t){this.player.img=t},async toggleEdit(t){if(this.editProfile=!this.editProfile,this.buttonSound(),t)try{await Ks(this.player)}catch{at()}},buttonSound(){ot(this.player.settings.effectVolume)}}});const xM={key:0,class:"w-75 mt-5",style:{"margin-left":"12.5vw"}};function VM(t,e,s,n,i,r){const o=Fe("PlayerCard");return t.dataLoad?(g(),y("div",xM,[j(o,{playerProp:t.player,editAble:!0},null,8,["playerProp"])])):V("",!0)}const FM=He(LM,[["render",VM],["__scopeId","data-v-688bc2f8"]]),UM={class:"home"},BM=Oe({__name:"Home",setup(t){return(e,s)=>(g(),y("div",UM,[j(FM)]))}});function Wt(t,e){return typeof e=="number"?[t[0]+e,t[1]+e]:[t[0]+e[0],t[1]+e[1]]}function za(t,e){return[t[0]+e,t[1]+e]}function qt(t,e){return typeof e=="number"?[t[0]-e,t[1]-e]:[t[0]-e[0],t[1]-e[1]]}function wg(t,e){return[t[0]-e[0],t[1]-e[1]]}function Ar(t,e){let s=qt(t,e);return s=Xt(s),s}function xs(t,e){return typeof e=="number"?[t[0]*e,t[1]*e]:[t[0]*e[0],t[1]*e[1]]}function jM(t,e){return typeof e=="number"?[t[0]/e,t[1]/e]:[t[0]/e[0],t[1]/e[1]]}function Xt(t){return ii(t)!=0?jM(t,ii(t)):[0,0]}function ii(t){return Math.sqrt(t[0]**2+t[1]**2)}function Ql(t){return t[0]**2+t[1]**2}function ri(t,e){const s=[...t];return e/=180/Math.PI,s[0]=t[0]*Math.cos(e)-t[1]*Math.sin(e),s[1]=t[0]*Math.sin(e)+t[1]*Math.cos(e),s}function lo(t,e){return t.lvlTree.lvlSkills.find(s=>s.name==e).lvl}function Gi(t,e){return t.lvlTree.lvlWeaponUpgrade.find(s=>s.name==e).lvl}function Qi(t,e){return t.lvlTree.lvlPassiv.find(s=>s.name==e).lvl}function Yi(t,e){return t.lvlTree.lvlShop.find(s=>s.name==e).lvl}function Wh(t,e){return t.skillTree.skills.find(s=>s.name==e).lvl}function Ot(t,e){return t.spaceport.houses.find(s=>s.name==e).lvl}function Kh(t,e){return t.weaponTree.weaponUpgrades[t.weaponTree.weaponUpgrades.findIndex(s=>s.name==e)].lvl}function ki(t,e){return t.passivTree.passivUpgrades[t.passivTree.passivUpgrades.findIndex(s=>s.name==e)].lvl}function $e(t){return Math.floor(Math.random()*t)}function xu(t,e,s){return t.size*=e,t.vector=qt(t.vector,t.size*s/4),t}function Y(t,e){return e=="in"?(t+100)/100:e=="de"?1-1*(1-Math.pow(2,-.015*t)):1}function an(t,e,s){if(e=="inner"){if(t.vector[0]>s.borderRight-t.size)return"right";if(t.vector[0]<s.borderLeft+1)return"left";if(t.vector[1]<s.borderUp-2)return"up";if(t.vector[1]>s.borderDown-(t.size+6))return"down"}if(e=="outer"){if(t.vector[0]>s.borderRight)return"right";if(t.vector[0]<s.borderLeft-1-t.size)return"left";if(t.vector[1]<s.borderUp-1-t.size)return"up";if(t.vector[1]>s.borderDown)return"down"}return!1}function qa(t){return Math.round(t*2)/2}function V0(t,e){if(t.ship.selectedModel!=e){switch(e.rarity){case"common":t.shop.currency+=10;break;case"uncommon":t.shop.currency+=20;break;case"rare":t.shop.currency+=30;break;case"epic":t.shop.currency+=40;break;case"legendary":t.shop.currency+=50;break}t.shop.currency>Kl&&(t.shop.currency=Kl),t.ship.models=t.ship.models.filter(s=>s.id!=e.id)}return t}function F0(t,e,s){let n="",i="",r=0,o=$e(100);const a={common:1,uncommon:2,rare:3,epic:4,legendary:5};for(;o<30+Ot(t,"hangar")*3&&r<e;)s++,r++,o=$e(100);switch(s){case 0:break;case 1:n="common";break;case 2:n="uncommon";break;case 3:n="rare";break;case 4:n="epic";break;case 5:n="legendary";break}if(s&&t.ship.models.length<$0){i=`you have received a ${n} spaceship`;const l={id:Math.random(),img:$e(18)+1+"",rarity:n};t.ship.models.push(l),t.ship.autoSell&&s<=a[t.ship.autoSell]&&(t=V0(t,l))}return{player:t,receiveMessage:i}}function xi(t,e){t.shop.currency-=e;for(const s of t.daily.tasks)s.type=="payCurrency"&&s.need>0&&(s.need-=e,s.need<=0&&(t.daily.tasksDone++,t=xf(t,100)));return t}function xf(t,e){return t.lvlTree.xp+=e,t.lvlTree.xp>=t.lvlTree.lvl*100&&(t.lvlTree.lvl++,t.lvlTree.xp=0),t}function HM(t,e,s,n,i,r){const o=[];let a;switch(s){case 0:a=[0,-1];break;case 180:a=[0,1];break;case 270:a=[-1,0];break;case 90:a=[1,0];break;case 45:a=[1,-1];break;case 315:a=[-1,-1];break;case 225:a=[-1,1];break;case 135:a=[1,1];break;default:a=[1,0]}const l=dl[t.weaponTree.weaponType].reload*1e3*Y(i.fasterReload*1.5,"de")*(t.passivTree.passivType.includes("increaseGun")?Y(r.increaseGun/2,"de"):1),u=dl[t.weaponTree.weaponType].size+Y(Y(i.biggerProjectile*10,"in")*10,"in")*e*(t.passivTree.passivType.includes("increaseGun")?Y(r.increaseGun/2,"in"):1),c=dl[t.weaponTree.weaponType].dmg+i.moreDamage*(t.passivTree.passivType.includes("increaseGun")?Y(r.increaseGun/2,"in"):1);switch(t.weaponTree.weaponType){case"standard":case"aimgun":case"splitgun":case"MG":case"bazooka":o.push({moveVector:a,vector:n.vector,size:u,imgsrc:"/img/char/plasma.png",damage:c,aim:t.weaponTree.weaponType=="aimgun"?!0:null});break;case"safegun":for(let d=0;d<8;d++)o.push({moveVector:ri(a,360/8*d),vector:n.vector,size:u,imgsrc:"/img/char/plasma.png",damage:c});break;case"shotgun":for(let d=0;d<3;d++)o.push({moveVector:ri(a,15*(d-1)),vector:n.vector,size:u,imgsrc:"/img/char/plasma.png",damage:c});break}return{shotCoolDownDuration:l,plasmas:o}}function fl(t,e,s,n,i){let r=0;const o=[0,0];let a="",l="",u=0;u++;let c=[0,0],d="";switch($e(3)){case 0:r=25*e*Y(n.smallerEnemies/2,"de");break;case 1:r=30*e*Y(n.smallerEnemies/2,"de");break;case 2:r=35*e*Y(n.smallerEnemies/2,"de");break}switch($e(4)){case 0:o[1]=s.borderUp-r,c=[(Math.random()-.5)*2,1];break;case 1:o[1]=s.borderDown,c=[(Math.random()-.5)*2,-1];break;case 2:o[0]=s.borderRight,c=[-1,(Math.random()-.5)*2];break;case 3:o[0]=s.borderLeft-r,c=[1,(Math.random()-.5)*2];break}switch(c=Xt(c),o[0]||(o[0]=$e(s.borderRight-s.borderLeft)+s.borderLeft),o[1]||(o[1]=$e(s.borderDown-s.borderUp)+s.borderUp),$e(6)){case 0:a="curve",l="/img/char/enemy_space_debris1.gif";break;case 1:a="aimbot",l="/img/char/enemy_komet.gif";break;case 2:a="chasebot",l="/img/char/enemy_gasman.gif",u=450;break;case 3:a="circle",l="/img/char/enemy_rino_fish_spin.gif";break;case 4:a="random",l="/img/char/enemy_blue-nebula.gif",u=900;break;case 5:a="spiral",l="/img/char/enemy_satenna.gif",u=100;break}switch($e(2)){case 0:d="left";break;case 1:d="right";break}return a=="aimbot"&&(c=Ar(i.vector,o)),t.push({speed:1,vector:o,size:r,id:JSON.stringify(Math.random()),type:a,imgsrc:l,spawnMoveVector:c,moveVector:c,timer:u,circle:!1,circleRadius:Math.random()*.02+.01,circleDir:d,isGrow:!1,isMagnet:!1,isFear:!1}),t}function Eg(t,e,s,n,i,r){return t=fl(t,s,n,i,r),t.filter(o=>o!=e)}function zM(t,e,s,n,i,r,o,a){if(t)return;let l="";const u=[0,0];let c=20*e,d="",f=6;switch(r&&(f=7),o&&(f-=2),$e(f)+(o?2:0)){case 0:l="coin",c=($e(25)+20)*e,d="/img/items/coin/coin.gif";break;case 1:l="growPotion",c=($e(25)+20)*e,d="/img/items/potion/potion.gif";break;case 2:l="clearField",d="/img/items/bomb/bomb.gif";break;case 3:l="magnet",d="/img/items/magnet/magnet.png",c=($e(25)+20)*e;break;case 4:l="slowEnemies",d="/img/items/snowflake/snowflake.gif",c=($e(25)+20)*e;break;case 5:l="stopTime",d="/img/items/clock/clock.png",c=($e(25)+20)*e;break;case 6:l="blackHole",c=20*Y(Wh(s,"smallerBlackHole"),"de")*e,d="/img/items/darkhole/darkhole.png";break}do u[0]=$e(i.borderRight-i.borderLeft-c)+i.borderLeft,u[1]=$e(i.borderDown-i.borderUp-c)+i.borderUp;while(ii(qt(u,a.vector))<200*e);return n.push({type:l,imgsrc:d,vector:u,size:c,timer:450}),n}function qM(t,e,s,n,i,r,o){for(const a of t){if(a.aim){const l=[...s];o.hP&&l.push(o),l.sort((u,c)=>Ql(qt(u.vector,a.vector))-Ql(qt(c.vector,a.vector))),a.moveVector=Wt(a.moveVector,Ar(l[0].vector,a.vector))}a.moveVector=xs(Xt(a.moveVector),(7+Kh(n,"fasterProjectile")/2)*i*(n.passivTree.passivType.includes("increaseGun")?Y(ki(n,"increaseGun")/3,"in"):1)),a.vector=Wt(a.vector,a.moveVector),an(a,"outer",r)&&(t=Tg(t,a))}for(const a of e)a.moveVector=xs(Xt(a.moveVector),5*i),a.vector=Wt(a.vector,a.moveVector),an(a,"outer",r)&&(t=Tg(t,a));return{plasmas:t,enemyPlasmas:e}}function Tg(t,e){return t.filter(s=>s!=e)}function WM(t,e,s,n,i,r,o){switch(o.moveVector=[0,0],(e.ArrowLeft||e[t.settings.moves.left])&&(o.moveVector[0]=KM(o,s)),(e.ArrowRight||e[t.settings.moves.right])&&(o.moveVector[0]=GM(o,s)),(e.ArrowUp||e[t.settings.moves.up])&&(o.moveVector[1]=QM(o,s)),(e.ArrowDown||e[t.settings.moves.down])&&(o.moveVector[1]=YM(o,s)),o.moveVector=xs(Xt(o.moveVector),o.speed*i*r),o.vector=Wt(o.vector,o.moveVector),o.moveVector[0]>0&&(n=90),o.moveVector[0]<0&&(n=270),o.moveVector[1]>0&&(n=180),o.moveVector[1]<0&&(n=0),o.moveVector[0]>0&&o.moveVector[1]>0&&(n=135),o.moveVector[0]<0&&o.moveVector[1]>0&&(n=225),o.moveVector[0]>0&&o.moveVector[1]<0&&(n=45),o.moveVector[0]<0&&o.moveVector[1]<0&&(n=315),an(o,"inner",s)){case"right":o.vector[0]=s.borderRight-o.size;break;case"left":o.vector[0]=s.borderLeft+1;break;case"up":o.vector[1]=s.borderUp-2;break;case"down":o.vector[1]=s.borderDown-(o.size+6);break}return{player:t,lastDirection:n}}function KM(t,e){return an(t,"inner",e)?0:-1}function GM(t,e){return an(t,"inner",e)?0:t.moveVector[0]==0?1:0}function QM(t,e){return an(t,"inner",e)?0:-1}function YM(t,e){return an(t,"inner",e)?0:t.moveVector[1]==0?1:0}function XM(t,e,s,n,i,r,o,a){for(const l of t)l.isFear?l.vector=ZM(l,s,n,i,o,a):(l.type=="spiral"&&(l.vector=tR(l,e,s,n,i,o)||l.vector),l.type=="circle"&&(l.moveVector=sR(l,e)),l.type=="curve"&&(l.moveVector=eR(l)),l.type=="chasebot"?l.vector=JM(l,s,n,i,o,a):l.vector=Wt(l.vector,xs(Xt(l.moveVector),e*Y(o.slowEnemy,"de")*n*(i?.75-o.strongerSlowEnemies/150:1)*(s.passivTree.passivType.includes("nerfEnemies")?Y(ki(s,"nerfEnemies")/4,"de"):1)*l.speed))),an(l,"outer",r)&&(t=Eg(t,l,n,r,o,a)),(l.type=="chasebot"||l.type=="random")&&(l.timer?l.timer--:t=Eg(t,l,n,r,o,a));return t}function JM(t,e,s,n,i,r){return Wt(t.vector,xs(Ar(r.vector,t.vector),2*s*(n?.75-i.strongerSlowEnemies/150:1)*(e.passivTree.passivType.includes("nerfEnemies")?Y(ki(e,"nerfEnemies")/4,"de"):1)*t.speed))}function ZM(t,e,s,n,i,r){return qt(t.vector,xs(Ar(r.vector,t.vector),2*s*(n?.75-i.strongerSlowEnemies/150:1)*(e.passivTree.passivType.includes("nerfEnemies")?Y(ki(e,"nerfEnemies")/4,"de"):1)*t.speed))}function eR(t){return t.moveVector[t.moveVector.findIndex(e=>e!=1)]>0?t.moveVector[t.moveVector.findIndex(e=>e!=1)]+=.02*Math.random():t.moveVector[t.moveVector.findIndex(e=>e!=1)]-=.02*Math.random(),t.moveVector}function tR(t,e,s,n,i,r){if(t.timer>0)t.timer--;else return t.moveVector=U0(t,2)||t.moveVector,t.moveVector=Xt(t.moveVector),Wt(t.vector,xs(t.spawnMoveVector,e*Y(r.slowEnemy,"de")*n*(s.passivTree.passivType.includes("nerfEnemies")?Y(ki(s,"nerfEnemies")/4,"de"):1)*.4*(i?.75-r.strongerSlowEnemies/150:1)*t.speed))}function sR(t,e){return t.timer>5e3?(t.timer+=3*Math.random(),t.moveVector=t.spawnMoveVector):(t.timer+=$e(3)+e+2,t.timer>1e3&&(t.circle=!0)),t.circle&&(t.moveVector=U0(t,1)||t.moveVector),t.moveVector}function U0(t,e){const s=xs(ri(t.moveVector,90),t.circleRadius*e);if(t.circleDir=="left")return Wt(t.moveVector,s);if(t.circleDir=="right")return qt(t.moveVector,s)}const pl={0:{type:"collectItems",need:50},1:{type:"deadEnemies",need:100},2:{type:"getScore",need:1e5},3:{type:"payCurrency",need:1e3},4:{type:"playNormal",need:5},5:{type:"playHardcore",need:5},6:{type:"playTotalchaos",need:5},7:{type:"useAbilities",need:100},8:{type:"useShopItems",need:10},9:{type:"getSpaceShips",need:5}};function kg(t){switch(t){case 0:return'You can press "enter" to start a round';case 1:return"Don't forget the skilltree";case 2:return"In the skill tree you can hover over buttons for info";case 3:return"You can unlock new items with the bosses";case 4:return"Read the guide";case 5:return"Press the gear wheel for settings";case 6:return"Use google chrome for the best experience";default:return"You are nice"}}const nR=Oe({components:{TextInput:Zc,SelectInput:VP,RangeInput:DP,Button:Ta},setup(){return{currentUser:At,findSkill:Wh,skillDetails:oe,weaponAmount:D0,passivAmount:Xc,peculiarityAmout:pN,shopDetails:mt,percent:Y}},data(){return{dataLoad:!1,user:At,message:"",receiveMessages:[],messageType:"",startButtonText:"start",cancelButtonText:"",middlex:window.innerWidth/2,generalSize:(window.innerWidth/1920+window.innerHeight/955)/2,field:{borderRight:0,borderLeft:0,borderUp:0,borderDown:0},production:uN.value,specialScores:[],tip:"",tipsNumber:7,enemiesSpawn:!0,enemiesMove:!0,enemiesType:"",itemSpawn:!0,immunity:!1,player:{},maxEnergyCell:0,playerInfo:{vector:[0,0],moveVector:[0,0],size:20,originalSize:20,speed:5,hP:1},effects:{grow:{active:!1,duration:0},magnet:{active:!1,duration:0},stopTime:{active:!1,duration:0},slowEnemies:{active:!1,duration:0}},counters:{},bossFight:!1,lastDirection:0,plasmas:[],coolDowns:{bombAbility:0,shotAbility:0,slowAbility:0,fastAbility:0,magnetAbility:0,slowEnemyAbility:0,stopTimeAbility:0,growAbility:0,fearAbility:0},skillObject:{},passivObject:{},weaponObject:{},fleetSkillObject:{},multiplicator:1,shield:0,maxShield:1,bossEnemy:{},enemyPlasmas:[],highscoreMultiplier:{normal:25e3,hardcore:2500,totalchaos:25e3},settingsInput:{},hardCoreMode:!1,gameStarted:!1,spawnBadItems:!0,startingEnemies:4,difficulty:2,scoreMultiplier:2,score:0,scorePerTick:0,difficultyTimer:1200,scoreTimer:1200,lastScore:0,gameloopCounter:0,gameloopCounter2:0,gameloopLastCounter:0,countgpsID:0,gps:60,items:[],pressedKeys:{},enemies:[],fleetMembers:[],fleet:{}}},computed:{scoreScaling(){return 1.01**(this.player.lvlTree.lvl-1)*1.1**this.player.daily.tasksDone},haveShotAbility(){return()=>Object.values(this.player.settings.abilitys).some(t=>t.name=="shotAbility")},fleetlvl(){let t=0;for(let e of this.fleetMembers)for(let s of["normal","hardcore","totalchaos"])t+=e.defeatedBosses[s];return t>50&&(t=50),t},spawnEnemyTimer(){return Math.round(900*Y(this.skillObject.spawnLessEnemy,"in")*(this.player.passivTree.passivType.includes("nerfEnemies")?Y(this.passivObject.nerfEnemies/4,"in"):1))},usedAbilitys(){let t=[];for(let e=1;e<5;e++)this.settingsInput.abilitys[e].name&&t.push(this.settingsInput.abilitys[e].name);return t},availableAbilitys(){let t=[];return this.player.skillTree.skills.forEach(e=>{oe[e.name].maxlvl==1&&e.lvl==1&&t.push(e.name)}),t},checkSettings(){let t=!0;return[...new Set(Object.values(this.settingsInput.moves).concat(Object.values(this.settingsInput.abilitys).filter(e=>e.key&&e.name).map(e=>e.key)))].filter(e=>e).length<4+this.usedAbilitys.length&&(t=!1),t}},async mounted(){if(document.onkeyup=t=>{t.code=="Enter"&&!this.gameStarted&&this.start()},window.onresize=()=>{this.changeDisplaySize()},setInterval(async()=>{this.gameStarted&&await this.gameloop()},1e3/60),this.changeDisplaySize(),this.user)try{let t=await Ea();t&&(this.player=t.player)}catch{at()}this.player.spaceFleet&&await this.loadFleet(),this.player=Ei(this.player,this.user),this.daily(),this.settingsInput=JSON.parse(JSON.stringify(this.player.settings)),kr(this.player.settings.musicVolume),this.buttonSound(),this.bossFight=!1,this.tip=kg($e(this.tipsNumber)),this.skillObject=this.player.skillTree.skills.reduce((t,e)=>({...t,[e.name]:e.lvl}),{}),this.passivObject=this.player.passivTree.passivUpgrades.reduce((t,e)=>({...t,[e.name]:e.lvl}),{}),this.weaponObject=this.player.weaponTree.weaponUpgrades.reduce((t,e)=>({...t,[e.name]:e.lvl}),{}),this.fleet.fleetInfo&&(this.fleetSkillObject=this.fleet.skills.reduce((t,e)=>({...t,[e.name]:e.lvl}),{})),this.playerInfo={vector:[0,0],moveVector:[0,0],size:ds[this.player.ship.selectedModel.rarity].size*Y(this.passivObject.shipStats/5,"de"),originalSize:ds[this.player.ship.selectedModel.rarity].size*Y(this.passivObject.shipStats/5,"de"),speed:ds[this.player.ship.selectedModel.rarity].speed*Y(this.passivObject.shipStats/5,"in"),hP:ds[this.player.ship.selectedModel.rarity].hp},this.playerInfo.size*=this.generalSize,this.playerStartPosition(),this.counters=Object.values(pl).reduce((t,e)=>({...t,[e.type]:0}),{}),this.maxEnergyCell=Math.round(ds[this.player.ship.selectedModel.rarity].store*Y(this.passivObject.shipStats/5,"in")),this.dataLoad=!0},methods:{taskNeed(t){return t.need>0?Math.round(t.need):"finished"},daily(){let t=parseInt(new Date().toISOString().replace("-","").split("T")[0].replace("-",""));if(this.player.daily.day<t){this.player.daily.day=t,this.player.daily.tasksDone=0;let e=Object.values(pl);this.player.daily.tasks=[];for(let s=0;s<3;s++)this.player.daily.tasks.push(e.splice($e(e.length-1),1)[0])}},handleTasks(){for(let t of this.player.daily.tasks)t.need>0&&(t.need-=this.counters[t.type],t.need<=0&&(this.player.daily.tasksDone++,this.player=xf(this.player,100)));this.counters=Object.values(pl).reduce((t,e)=>({...t,[e.type]:0}),{})},unDoChanges(){ot(this.player.settings.effectVolume),this.settingsInput=JSON.parse(JSON.stringify(this.player.settings)),this.changeVolume(this.player.settings.musicVolume)},changeVolume(t){kr(t)},async saveSettings(){this.buttonSound(),this.player.settings=JSON.parse(JSON.stringify(this.settingsInput));try{await Ks(this.player)}catch{at()}},async loadFleet(){this.fleetMembers=[];let t;if(this.player.spaceFleet&&(this.fleet=await I0(this.player.spaceFleet),!this.fleet.fleetInfo||!this.fleet.members.includes(this.user.uid))){this.player.spaceFleet="",this.fleet={members:[],fleetInfo:{founder:"",img:"",name:"",info:"",public:!1},skills:[{name:"bossEnemies",lvl:0},{name:"bossDifficulty",lvl:0}]};return}t=await C0(this.player.spaceFleet);let e=[];for(let s of t)e.push(s);this.fleetMembers=e.filter(s=>this.fleet.members.includes(s.id)).map(s=>s.player)},async gameloop(){this.player.playedTime++,this.multiplicator=1,this.handlePlayerAbilities(),this.increaseScore(),this.colisionHandling(),this.despawnItems(),this.effects.stopTime.active||this.gameloopCounter2++,this.gameloopCounter++,this.bossFight?(this.handleBossEnemyMovement(),this.gameloopCounter%90==0&&this.bossEnemyAbilitys()):(this.gameloopCounter%this.difficultyTimer==0&&(this.difficulty+=.5),this.gameloopCounter%this.scoreTimer==0&&(this.scoreMultiplier+=.5),this.gameloopCounter%this.spawnEnemyTimer==0&&fl(this.enemies,this.generalSize,this.field,this.skillObject,this.playerInfo)),(this.player.playMode=="totalchaos"&&!this.bossFight||this.bossEnemy.type=="totalchaos")&&this.gameloopCounter%60==0&&this.handleTotalchaos(),this.gameloopCounter2%60==0&&this.growBlackHole(),this.player.passivTree.passivType.includes("moreItems")?this.gameloopCounter2%Math.round(120*Y(this.passivObject.moreItems,"de"))==0&&(this.spawnItems(this.spawnBadItems),this.spawnBadItems=!this.spawnBadItems):this.gameloopCounter2%120==0&&this.spawnItems(!0),this.player.peculiarities.selected=="generator"&&this.gameloopCounter2%600==0&&this.player.shop.currency>=mt.energyCell.cost&&this.player.shop.energyCell.amount<this.maxEnergyCell+this.weaponObject.munitionsDepot&&(this.player.shop.currency-=mt.energyCell.cost,this.player.shop.energyCell.amount++),this.player.peculiarities.selected=="autoShot"&&this.haveShotAbility&&this.coolDowns.shotAbility==0&&this.shotAbility(!1),this.handlePlayerMovement(),this.handlePlasmaMovement(),this.handleEnemyMovement(),this.reduceDuartion(),this.handleEnemyRandom(),await this.handleBossEnemyDead()},start(){if(!this.gameStarted){if(this.gameStarted=!0,this.buttonSound(),this.playerInfo.hP=ds[this.player.ship.selectedModel.rarity].hp+this.weaponObject.moreHP,this.bossFight)this.bossEnemyPreparations();else{switch(this.player.playMode){case"normal":this.counters.playNormal++,this.startingEnemies=6;break;case"hardcore":this.counters.playHardcore++,this.startingEnemies=50;break;case"totalchaos":this.counters.playTotalchaos++,this.startingEnemies=6;break}this.player.playedGames[this.player.playMode]++,this.difficulty=2;for(let t of["lessStartEnemies","higherDifficultyTimer","lowerScoreTimer"])if(this.player.shop[t].use&&this.player.shop[t].amount>0)switch(this.counters.useShopItems++,this.player.shop[t].amount--,t){case"lessStartEnemies":this.startingEnemies-=this.player.shop.lessStartEnemies.lvl;break;case"higherDifficultyTimer":this.difficultyTimer=1200+90*this.player.shop.higherDifficultyTimer.lvl;break;case"lowerScoreTimer":this.scoreTimer=1200-90*this.player.shop.lowerScoreTimer.lvl;break}}this.reset(),this.scoreMultiplier=ds[this.player.ship.selectedModel.rarity].scoreMultiplier,this.playerInfo.speed=5,this.gameloopLastCounter=0,this.gameloopCounter=0,this.score=0,this.playerStartPosition(),this.enemies=[],this.items=[],this.plasmas=[],this.enemyPlasmas=[],this.specialScores=[],this.message="",this.receiveMessages=[],this.startButtonText="start",this.cancelButtonText="",window.onkeyup=t=>{this.pressedKeys[t.key]=!1},window.onkeydown=t=>{this.pressedKeys[t.key]=!0};for(let t=0;t<this.startingEnemies;t++)fl(this.enemies,this.generalSize,this.field,this.skillObject,this.playerInfo);this.skillObject.shieldGenerator&&(this.shield=this.maxShield),clearTimeout(this.countgpsID),this.countgps()}},reset(){this.effects={grow:{active:!1,duration:0},magnet:{active:!1,duration:0},stopTime:{active:!1,duration:0},slowEnemies:{active:!1,duration:0}},this.coolDowns={bombAbility:0,shotAbility:0,fastAbility:0,slowAbility:0,magnetAbility:0,slowEnemyAbility:0,stopTimeAbility:0,growAbility:0,fearAbility:0}},handleTotalchaos(){switch(this.playerInfo.speed=5,$e(4)){case 0:this.chaosItems();break;case 1:this.chaosPlayerSpeed();break;case 2:this.chaosEffect();break;case 3:this.chaosBuffEnemy();break}},chaosItems(){for(let t=0;t<5;t++)this.spawnItems(!0)},chaosPlayerSpeed(){switch($e(2)){case 0:if(this.player.peculiarities.selected=="slowSpeed"&&Object.values(this.player.settings.abilitys).map(t=>t.name).includes("fastAbility"))break;this.playerInfo.speed*=.5;break;case 1:if(this.player.peculiarities.selected=="slowSpeed"&&Object.values(this.player.settings.abilitys).map(t=>t.name).includes("slowAbility"))break;this.playerInfo.speed*=2;break}},chaosEffect(){switch($e(4)){case 0:this.effects.magnet={active:!0,duration:1e3};break;case 1:this.effects.grow={active:!0,duration:1e3};break;case 2:this.effects.slowEnemies={active:!0,duration:1e3};break;case 3:this.effects.stopTime={active:!0,duration:1e3};break}},chaosBuffEnemy(){for(let t of this.enemies)switch($e(4)){case 0:t.isGrow||(t=xu(t,1.5,this.generalSize)),t.isGrow=!0;break;case 1:t.isMagnet=!0;break;case 2:t.speed=1.25;break;case 3:t.speed=.75;break}},increaseScore(){this.lastScore=this.score,this.effects.grow.active?(this.playerInfo.size=this.playerInfo.originalSize*2*this.generalSize,this.score+=this.scoreMultiplier*this.scoreScaling*Y(this.skillObject.scoreMultiplicator,"in")*1.2*Y(this.skillObject.betterGrowPotion,"in")*(this.player.passivTree.passivType.includes("increaseScore")?Y(this.passivObject.increaseScore/1.5,"in"):1)):(this.playerInfo.size=this.playerInfo.originalSize*this.generalSize,this.score+=this.scoreMultiplier*this.scoreScaling*Y(this.skillObject.scoreMultiplicator,"in")*(this.player.passivTree.passivType.includes("increaseScore")?Y(this.passivObject.increaseScore/1.5,"in"):1));let t=0;for(let e of Object.values(this.effects))e.active&&t++;this.score+=this.skillObject.scorePerEffect*t*.15,this.scorePerTick=this.score-this.lastScore},countgps(){this.countgpsID=setTimeout(()=>{this.gps=(this.gameloopCounter-this.gameloopLastCounter)*2,this.gps>60&&(this.gps=60),this.gameloopLastCounter=this.gameloopCounter,this.countgps()},500)},cancel(){this.buttonSound(),this.bossEnemy={},this.bossFight=!1,this.startButtonText="start",this.cancelButtonText="",this.message=""},async gameOver(t,e){if(this.bossFight)this.score=0,this.startButtonText="try again",this.cancelButtonText="cancel";else for(let s of["lessStartEnemies","higherDifficultyTimer","lowerScoreTimer"])this.player.shop[s].use&&this.player.shop[s].reBuy&&this.player.shop.currency>=mt[s].cost&&this.player.shop[s].amount<mt[s].max&&(this.player.shop.currency-=mt[s].cost,this.counters.payCurrency+=mt[s].cost,this.player.shop[s].amount++);if(this.counters.getScore=this.score,this.player.shop.currency+=1*Y(this.passivObject.moreScrap,"in")*Y(Yi(this.player,"tier1")*5,"in")*this.counters.deadEnemies,this.player.shop.energyCell.reBuy)for(;this.player.shop.currency>=mt.energyCell.cost&&this.player.shop.energyCell.amount<this.maxEnergyCell+this.weaponObject.munitionsDepot;)this.player.shop.currency-=mt.energyCell.cost,this.player.shop.energyCell.amount++;for(let s of this.player.spaceport.houses)s.needScore&&(s.needScore-=Math.round(this.score),s.needScore<=0&&(s.needScore=0,s.lvl++,this.receiveMessages.push(`${ar[s.name].name} was finished`)));this.handleTasks(),this.gameStarted=!1,this.tip=kg($e(this.tipsNumber)),this.reset(),this.message=t,this.messageType=e,this.newModel(),this.score>this.player.highscore[this.player.playMode]&&(this.player.highscore[this.player.playMode]=this.score),this.setSkillPoints(),this.player.shop.currency=Math.round(this.player.shop.currency);try{await Ks(this.player)}catch{at()}},newModel(){if(this.score<1e4)return;this.counters.getSpaceShips++;let t=2+Math.floor(this.score/333333);t>5&&(t=5);let e=F0(this.player,t,0);this.player=e.player,e.receiveMessage&&this.receiveMessages.push(e.receiveMessage)},setSkillPoints(){this.player.skillTree.skillPoints<Math.floor(this.player.highscore.normal/1e3)&&(this.receiveMessages.push(`you get ${Math.floor(this.player.highscore.normal/1e3)-this.player.skillTree.skillPoints} skillpoints`),this.player.skillTree.skillPoints=Math.floor(this.player.highscore.normal/1e3)),this.player.weaponTree.weaponPoints<Math.floor(this.player.highscore.hardcore/500)&&(this.receiveMessages.push(`you get ${Math.floor(this.player.highscore.hardcore/500)-this.player.weaponTree.weaponPoints} weaponpoints`),this.player.weaponTree.weaponPoints=Math.floor(this.player.highscore.hardcore/500)),this.player.passivTree.passivPoints<Math.floor(this.player.highscore.totalchaos/2e3)&&(this.receiveMessages.push(`you get ${Math.floor(this.player.highscore.totalchaos/2e3)-this.player.passivTree.passivPoints} passivpoints`),this.player.passivTree.passivPoints=Math.floor(this.player.highscore.totalchaos/2e3))},bossAvailable(t){return Wh(this.player,"shotAbility")?this.haveShotAbility?this.bossEnemy.type==t?"cancel":this.player.highscore[t]>=Math.round(this.highscoreMultiplier[t]*(this.player.defeatedBosses[t]+1)*Y(this.fleetlvl,"de"))?"Boss fight available":`You need ${Math.round(this.highscoreMultiplier[t]*(this.player.defeatedBosses[t]+1)*Y(this.fleetlvl,"de"))} highscore`:`select ${oe.shotAbility.name}`:`skill ${oe.shotAbility.name}`},startBossFight(t){var e;if(this.bossEnemy.type==t){this.cancel();return}if(!this.skillObject.shotAbility){this.$router.push("/skillTree");return}if(!this.haveShotAbility){(e=document.getElementById("settingsBtn"))==null||e.click();return}this.player.highscore[t]<this.highscoreMultiplier[t]*(this.player.defeatedBosses[t]+1)*Y(this.fleetlvl,"de")||(this.buttonSound(),this.bossEnemy.type=t,this.bossFight=!0)},bossEnemyPreparations(){switch(this.bossEnemy.size=50*this.generalSize,this.bossEnemy.imgsrc="/img/boss/bossEnemy.gif",this.bossEnemy.moveVector=Xt([(Math.random()-.5)*2,(Math.random()-.5)*2]),this.bossEnemy.type){case"normal":this.bossEnemy.maxHP=Math.round(60*this.bossLifeMultiplier()),this.startingEnemies=Math.round(4+this.player.defeatedBosses[this.bossEnemy.type]),this.difficulty=qa(2+this.player.defeatedBosses[this.bossEnemy.type]);break;case"hardcore":this.bossEnemy.maxHP=Math.round(30*this.bossLifeMultiplier()),this.startingEnemies=Math.round(50+this.player.defeatedBosses[this.bossEnemy.type]),this.difficulty=qa(2);break;case"totalchaos":this.bossEnemy.maxHP=Math.round(60*this.bossLifeMultiplier()),this.startingEnemies=Math.round(4+this.player.defeatedBosses[this.bossEnemy.type]),this.difficulty=qa(2+this.player.defeatedBosses[this.bossEnemy.type])}this.fleet.fleetInfo&&(this.startingEnemies-=this.fleetSkillObject.bossEnemies,this.startingEnemies=Math.round(this.startingEnemies*Y(this.fleetlvl,"de")),this.startingEnemies<1&&(this.startingEnemies=1),this.difficulty-=this.fleetSkillObject.bossDifficulty,this.difficulty=qa(this.difficulty*Y(this.fleetlvl,"de")),this.difficulty<2&&(this.difficulty=2)),this.bossEnemy.hP=this.bossEnemy.maxHP,this.bossEnemy.speed=5;do this.bossEnemy.vector=[$e(this.field.borderRight-this.field.borderLeft-this.bossEnemy.size)+this.field.borderLeft,$e(this.field.borderDown-this.field.borderUp-this.bossEnemy.size)+this.field.borderUp];while(ii(qt(this.bossEnemy.vector,this.playerInfo.vector))<250*this.generalSize)},bossLifeMultiplier(){return(this.player.defeatedBosses[this.bossEnemy.type]+1)*Y(this.player.defeatedBosses[this.bossEnemy.type]+1*20,"in")*(this.player.passivTree.passivType.includes("nerfBoss")?Y(this.passivObject.nerfBoss/2,"de"):1)},bossEnemyAbilitys(){switch(this.bossEnemy.speed=5,$e(4)){case 0:this.bossEnemyAbilityShot();break;case 1:this.bossEnemyAbilityMove();break;case 2:switch(this.bossEnemy.type){case"normal":this.bossEnemyAbilityBuffEnemies();break;case"hardcore":this.bossAbilitySpawnItems();break}break;case 3:this.bossEnemyAbilitySpeedUp();break}},bossEnemyAbilityShot(){switch(this.bossEnemy.type){case"normal":for(let t=0;t<7;t++)this.enemyPlasmas.push({moveVector:Xt(ri(this.bossEnemy.moveVector,180/7*t+90)),vector:Wt(this.bossEnemy.vector,this.bossEnemy.size/2),size:20*this.generalSize,imgsrc:"/img/char/enemy_plasma.png",damage:1});break;case"hardcore":for(let t=0;t<3;t++)this.enemyPlasmas.push({moveVector:Xt(ri(this.bossEnemy.moveVector,90*(t+1))),vector:Wt(this.bossEnemy.vector,this.bossEnemy.size/2),size:20*this.generalSize,imgsrc:"/img/char/enemy_plasma.png",damage:1});break;case"totalchaos":for(let t=0;t<5;t++)this.enemyPlasmas.push({moveVector:Xt(ri(this.bossEnemy.moveVector,180/5*t+90)),vector:Wt(this.bossEnemy.vector,this.bossEnemy.size/2),size:20*this.generalSize,imgsrc:"/img/char/enemy_plasma.png",damage:1});break}},bossEnemyAbilityMove(){switch(this.bossEnemy.type){case"normal":case"hardcore":this.bossEnemy.moveVector=Ar(this.playerInfo.vector,this.bossEnemy.vector);break;case"totalchaos":do this.bossEnemy.vector=[$e(this.field.borderRight-this.field.borderLeft-this.bossEnemy.size)+this.field.borderLeft,$e(this.field.borderDown-this.field.borderUp-this.bossEnemy.size)+this.field.borderUp];while(ii(qt(this.bossEnemy.vector,this.playerInfo.vector))<250*this.generalSize);break}},bossEnemyAbilitySpeedUp(){this.bossEnemy.speed=7.5},bossEnemyAbilityBuffEnemies(){for(let t of this.enemies)t.isGrow||(t=xu(t,1.5,this.generalSize)),t.isGrow=!0,t.isMagnet=!0},bossAbilitySpawnItems(){for(let t=0;t<5;t++)this.spawnItems(!1)},handleBossEnemyMovement(){switch(this.bossEnemy.moveVector=xs(Xt(this.bossEnemy.moveVector),this.bossEnemy.speed*this.generalSize*Y(this.fleetlvl/20,"de")*(this.player.passivTree.passivType.includes("nerfBoss")?Y(this.passivObject.nerfBoss/2,"de"):1)),this.bossEnemy.vector=Wt(this.bossEnemy.vector,this.bossEnemy.moveVector),an(this.bossEnemy,"inner",this.field)){case"left":case"right":this.bossEnemy.moveVector[0]*=-1;break;case"up":case"down":this.bossEnemy.moveVector[1]*=-1;break}},async handleBossEnemyDead(){if(this.bossEnemy.hP<=0){let t=Object.entries(De).filter(([i,r])=>!r.maxlvl).flatMap(([i,r])=>i),e=Object.keys(this.passivObject),s=Object.keys(Gl),n;switch(this.player.defeatedBosses[this.bossEnemy.type]++,this.bossEnemy.type){case"normal":t=t.filter(i=>this.player.weaponTree.weaponAvaibleTypes.every(r=>i!=r)),t.length>0&&(n=t[$e(t.length-1)],this.player.weaponTree.weaponAvaibleTypes.push(n),this.receiveMessages.push(`you have unlocked the ${n}`));break;case"hardcore":e=e.filter(i=>this.player.passivTree.passivAvaibleTypes.every(r=>i!=r)),e.length>0&&(n=e[$e(e.length-1)],this.player.passivTree.passivAvaibleTypes.push(n),this.receiveMessages.push(`you have unlocked the ${Gs[n].name}`));break;case"totalchaos":s=s.filter(i=>this.player.peculiarities.available.every(r=>i!=r)),s.length>0&&(n=s[$e(s.length-1)],this.player.peculiarities.available.push(n),this.receiveMessages.push(`you have unlocked the ${Gl[n].name}`));break}this.bossEnemy={},await this.gameOver("You have killed the boss","alert alert-success"),this.startButtonText="start",this.cancelButtonText="",this.bossFight=!1}},async bossColision(){this.collisionsCheck(this.bossEnemy,this.playerInfo)&&await this.gameOver("you got killed by the boss","alert alert-danger");for(let t of this.plasmas)this.collisionsCheck(this.bossEnemy,t)&&(this.bossEnemy.hP-=t.damage,this.deletePlasma(t))},async plasmaColision(t,e){if(t){for(let s of this.plasmas)this.gravity(t,s,4,.5),this.collisionsCheck(t,s)&&this.deletePlasma(s);return}if(e){for(let s of[...this.plasmas])if(this.collisionsCheck(e,s)){switch(this.player.weaponTree.weaponType){case"aimgun":case"safegun":this.deletePlasma(s);break}if(s.split){for(let i=0;i<5;i++){let r=s.moveVector;this.plasmas.push({moveVector:ri(r,360/5*i),vector:s.vector,size:s.size,imgsrc:s.imgsrc,damage:s.damage})}this.deletePlasma(s)}else s.damage--,s.damage<=0&&this.deletePlasma(s);this.respawnEnemy(e);let n=50*this.scoreScaling*this.scoreMultiplier*(this.player.passivTree.passivType.includes("increaseScore")?Y(this.passivObject.increaseScore/1.5,"in"):1)*Y(this.weaponObject.scorePerHit,"in");this.score+=n,this.bossFight||this.specialScores.push({vector:e.vector,score:n,duration:1e3})}return}for(let s of this.enemyPlasmas)if(this.collisionsCheck(this.playerInfo,s)){this.handleDamage(1,"you got killed by plasma"),this.deletePlasma(s);return}},async handleDamage(t,e){if(!this.immunity&&(this.player.peculiarities.selected=="immunity"&&(this.immunity=!0,setTimeout(()=>{this.immunity=!1},1e3)),this.shield&&(this.handleShield(),t--),t>0&&(this.playerInfo.hP-=t),this.playerInfo.hP<=0)){await this.gameOver(e,"alert alert-danger");return}},handleShield(){this.shield--,setTimeout(()=>{this.shield<this.maxShield&&this.shield++},1e4*Y(this.skillObject.shieldGenerator*5,"de"))},blackHoleColision(t){this.gravity(t,this.playerInfo,3,1-this.skillObject.friendlierDarkhole/100),this.collisionsCheck(t,this.playerInfo)&&this.touchBlackHole();for(let e of this.enemies)this.gravity(t,e,3,1),this.collisionsCheck(t,e)&&this.respawnEnemy(e);for(let e of this.items)e.type!="blackHole"&&(this.gravity(t,e,3,1-this.skillObject.friendlierDarkhole/100),this.collisionsCheck(t,e)&&this.despawnItem(e));this.plasmaColision(t,!1)},enemyItemColision(t){if(t.type=="growPotion")for(let e of this.enemies)this.collisionsCheck(e,t)&&(e.isGrow||(this.despawnItem(t),e=xu(e,2,this.generalSize)),e.isGrow=!0);if(t.type=="magnet")for(let e of this.enemies)this.collisionsCheck(e,t)&&(e.isMagnet||(this.despawnItem(t),e.isMagnet=!0))},async enemyColision(){for(let t of this.enemies)this.plasmaColision(!1,t),this.effects.magnet.active&&this.gravity(this.playerInfo,t,2,-.3-this.skillObject.strongerMagnet/100),t.isMagnet&&this.gravity(t,this.playerInfo,2,.7),this.collisionsCheck(t,this.playerInfo)&&(this.handleDamage(1,"you got killed by an enemy"),this.respawnEnemy(t))},playerItemColision(t){switch(_g(this.player.settings.effectVolume,t),this.counters.collectItems++,this.items=this.items.filter(e=>e!=t),t.type){case"coin":this.collectCoin(t);break;case"clearField":this.collectClearField();break;case"magnet":this.collectMagnet(t);break;case"stopTime":this.collectStopTime(t);break;case"slowEnemies":this.collectSlowEnemies(t);break;case"growPotion":this.collectGrowPotion(t);break}},colisionHandling(){this.bossFight&&this.bossColision(),this.plasmaColision();for(let t of this.items)t.type=="blackHole"?this.blackHoleColision(t):this.effects.magnet.active&&this.gravity(this.playerInfo,t,2,1+this.skillObject.strongerMagnet/100),this.enemyItemColision(t),this.collisionsCheck(t,this.playerInfo)&&this.playerItemColision(t);this.enemyColision()},collisionsCheck(t,e){return Ql(wg(za(t.vector,t.size/2),za(e.vector,e.size/2)))<(t.size/2+e.size/2)**2},spawnItems(t){this.items=zM(this.effects.stopTime.active,this.generalSize,this.player,this.items,this.field,t,this.bossFight,this.playerInfo)||this.items},collectCoin(t){let e=this.scoreMultiplier*this.scoreScaling*15*t.size*Y(this.skillObject.betterCoin,"in")/this.generalSize*(this.player.passivTree.passivType.includes("increaseScore")?Y(this.passivObject.increaseScore,"in")/1.5:1);this.score+=e,this.specialScores.push({vector:t.vector,score:e,duration:1e3})},collectGrowPotion(t){this.effects.grow.active||(this.playerInfo.vector=qt(this.playerInfo.vector,this.playerInfo.size*this.generalSize/2)),this.effects.grow={active:!0,duration:this.effects.grow.duration+=250*t.size/this.generalSize*Y(this.passivObject.longerEffects/3,"in")},this.player.peculiarities.selected=="growPotion"&&this.playerInfo.hP<ds[this.player.ship.selectedModel.rarity].hp+this.weaponObject.moreHP&&this.playerInfo.hP++},collectMagnet(t){this.effects.magnet={active:!0,duration:this.effects.magnet.duration+=250*t.size*Y(this.skillObject.longerMagnet,"in")/this.generalSize*Y(this.passivObject.longerEffects/3,"in")}},collectStopTime(t){this.effects.stopTime={active:!0,duration:this.effects.stopTime.duration+=75*t.size*Y(this.skillObject.longerStopTime,"in")/this.generalSize*Y(this.passivObject.longerEffects/3,"in")}},collectSlowEnemies(t){this.effects.slowEnemies={active:!0,duration:this.effects.slowEnemies.duration+=250*t.size*Y(this.skillObject.longerSlowEnemies,"in")/this.generalSize*Y(this.passivObject.longerEffects/3,"in")}},reduceDuartion(){for(let t of this.specialScores)t.duration-=1e3/60;this.specialScores=this.specialScores.filter(t=>t.duration>0),this.effects.stopTime.active?this.effects.stopTime.duration-=1e3/60:this.effects.stopTime.duration=0,this.effects.stopTime.duration<=0&&(this.effects.stopTime.active=!1,this.effects.stopTime.duration=0);for(let t of["bombAbility","magnetAbility","slowEnemyAbility","stopTimeAbility","growAbility","shotAbility","fearAbility"])this.coolDowns[t]>0?this.coolDowns[t]-=1e3/60:this.coolDowns[t]=0,this.coolDowns[t]<0&&(this.coolDowns[t]=0);if(!this.effects.stopTime.active)for(let t of Object.values(this.effects))t.active?t.duration-=1e3/60:t.duration=0,t.active&&t.duration<=0&&(this.effects.grow.active&&this.effects.grow.duration<=0&&(this.playerInfo.size=this.playerInfo.originalSize*this.generalSize,this.playerInfo.vector=Wt(this.playerInfo.vector,this.playerInfo.size/2)),t.duration=0,t.active=!1)},collectClearField(){for(let t of[...this.enemies])this.respawnEnemy(t)},async touchBlackHole(){this.player.peculiarities.selected=="darkHole"?this.handleDamage(1,"you got sucked in"):await this.gameOver("you got sucked in","alert alert-danger")},growBlackHole(){if(!this.effects.stopTime.active)for(let t of this.items)t.type=="blackHole"&&(t.size+=20*Y(this.skillObject.smallerBlackHole,"de")*this.generalSize,t.vector=qt(t.vector,20*Y(this.skillObject.smallerBlackHole,"de")*this.generalSize/2))},despawnItems(){if(!this.effects.stopTime.active)for(let t of this.items)t.timer--,t.timer<0&&this.despawnItem(t)},despawnItem(t){this.items=this.items.filter(e=>e!=t)},handleEnemyMovement(){this.enemiesMove&&(this.effects.stopTime.active||(this.enemies=XM(this.enemies,this.difficulty,this.player,this.generalSize,this.effects.stopTime.active,this.field,this.skillObject,this.playerInfo)))},respawnEnemy(t){this.enemies=this.enemies.filter(e=>e!=t),this.counters.deadEnemies++,this.player.shop.currency>Kl&&(this.player.shop.currency=Kl),fl(this.enemies,this.generalSize,this.field,this.skillObject,this.playerInfo)},handleEnemyRandom(){if(!this.effects.stopTime.active)for(let t of this.enemies)t.type=="random"&&t.timer%120==0&&(t.moveVector=Xt([(Math.random()-.5)*2,(Math.random()-.5)*2]))},handlePlayerMovement(){const t=WM(this.player,this.pressedKeys,this.field,this.lastDirection,this.generalSize,this.multiplicator,this.playerInfo);this.player=t.player,this.lastDirection=t.lastDirection},handlePlayerAbilities(){for(let t=1;t<5;t++)if(this.player.settings.abilitys[t].name&&this.pressedKeys[this.player.settings.abilitys[t].key]&&this.skillObject[this.player.settings.abilitys[t].name]){if(this.player.shop.energyCell.amount<oe[this.player.settings.abilitys[t].name].tier||this.coolDowns[this.player.settings.abilitys[t].name]>0)continue;switch(this.player.settings.abilitys[t].name){case"fastAbility":if(this.player.peculiarities.selected=="slowSpeed"&&this.player.playMode=="totalchaos")break;this.multiplicator*=2;break;case"slowAbility":if(this.player.peculiarities.selected=="slowSpeed"&&this.player.playMode=="totalchaos")break;this.multiplicator*=.5;break;case"bombAbility":this.bombAbility();break;case"shotAbility":this.shotAbility(!0);break;case"magnetAbility":this.magnetAbility(),this.player.shop.energyCell.amount-=oe[this.player.settings.abilitys[t].name].tier;break;case"growAbility":this.growAbility(),this.player.shop.energyCell.amount-=oe[this.player.settings.abilitys[t].name].tier;break;case"slowEnemyAbility":this.slowEnemyAbility(),this.player.shop.energyCell.amount-=oe[this.player.settings.abilitys[t].name].tier;break;case"stopTimeAbility":this.stopTimeAbility(),this.player.shop.energyCell.amount-=oe[this.player.settings.abilitys[t].name].tier;break;case"fearAbility":this.fearAbility(),this.player.shop.energyCell.amount-=oe[this.player.settings.abilitys[t].name].tier}}},fearAbility(){this.counters.useAbilities++,this.coolDowns.fearAbility=1e4,this.enemies.forEach(t=>t.isFear=!0)},magnetAbility(){this.counters.useAbilities++,this.coolDowns.magnetAbility=1e4,this.effects.magnet={active:!0,duration:this.effects.magnet.duration+=2500*Y(this.passivObject.longerEffects/3,"in")}},growAbility(){this.counters.useAbilities++,this.coolDowns.growAbility=1e4,this.effects.grow.active||(this.playerInfo.vector=qt(this.playerInfo.vector,this.playerInfo.size*this.generalSize/2)),this.effects.grow={active:!0,duration:this.effects.slowEnemies.duration+=2500*Y(this.passivObject.longerEffects/3,"in")}},slowEnemyAbility(){this.counters.useAbilities++,this.coolDowns.slowEnemyAbility=1e4,this.effects.slowEnemies={active:!0,duration:this.effects.slowEnemies.duration+=2500*Y(this.passivObject.longerEffects/3,"in")}},stopTimeAbility(){this.counters.useAbilities++,this.coolDowns.stopTimeAbility=1e4,this.effects.stopTime={active:!0,duration:this.effects.stopTime.duration+=700*Y(this.passivObject.longerEffects/3,"in")}},bombAbility(){let t=[...this.items].filter(e=>e.type=="clearField");t.length&&(this.counters.useAbilities++,this.coolDowns.bombAbility=1e3,this.player.shop.energyCell.amount-=oe.bombAbility.tier,t.length&&(t.sort((e,s)=>ii(qt(e.vector,this.playerInfo.vector))-ii(qt(s.vector,this.playerInfo.vector))),_g(this.player.settings.effectVolume,t[0]),this.items=this.items.filter(e=>e!=t[0]),this.collectClearField()))},shotAbility(t){if(this.player.playMode=="hardcore"&&!this.bossFight)return;this.counters.useAbilities++,t&&(this.player.shop.energyCell.amount-=oe.shotAbility.tier),kN(this.player.settings.effectVolume);let e=HM(this.player,this.generalSize,this.lastDirection,this.playerInfo,this.weaponObject,this.passivObject);this.coolDowns.shotAbility=e.shotCoolDownDuration;for(let s of e.plasmas)this.plasmas.push(s)},handlePlasmaMovement(){const t=qM(this.plasmas,this.enemyPlasmas,this.enemies,this.player,this.generalSize,this.field,this.bossEnemy);this.plasmas=t.plasmas,this.enemyPlasmas=t.enemyPlasmas},deletePlasma(t){this.plasmas=this.plasmas.filter(e=>e!=t),this.enemyPlasmas=this.enemyPlasmas.filter(e=>e!=t)},gravity(t,e,s,n){this.effects.stopTime.active||Ql(wg(za(t.vector,t.size/2),za(e.vector,e.size/2)))*this.generalSize<((t.size+e.size)*s)**2&&(e.vector=Wt(e.vector,xs(Ar(t.vector,e.vector),n*this.generalSize)))},changeDisplaySize(){this.generalSize=(window.innerWidth/1920+window.innerHeight/955)/2,this.playerInfo.size=this.playerInfo.originalSize*this.generalSize,this.middlex=window.innerWidth/2,this.field.borderLeft=0,this.field.borderUp=0,this.field.borderRight=Math.round(window.innerWidth*.75),this.field.borderDown=Math.round(window.innerHeight*.8)},playerStartPosition(){this.playerInfo.vector=[this.field.borderRight/2,this.field.borderDown/2]},changePlayMode(t){t!=this.player.playMode&&(this.buttonSound(),this.player.playMode=t)},buttonSound(){ot(this.player.settings.effectVolume)}}}),eu="data:image/gif;base64,R0lGODlhGQAZAMIGAAAAAA4EANZzA/6yMfnDPf/pYP///////yH/C05FVFNDQVBFMi4wAwEAAAAh/hFDcmVhdGVkIHdpdGggR0lNUAAh+QQJCgAHACwAAAAAGQAZAAADqHi6G/6BybmEvYJqJ0ghIDE8WiMMhGEU7HdFmtWqLStasBQIhUrXLQJOx/OxBkikxzZsDHqrGwbVGghyh07vk+wqmbBdiuZVhoK4HbRg9S4/S+FVXD0l33DmXHu0U2cfehxvbX8sNHFpfGwneEaJe38ihj4raFcKjTZ/lTVCWAGGIXg1VqCLNqOeTSakQIIUFmevUlhEX6usGzsooyMOJRMYF8G7ELYMCQAh+QQJCgAHACwAAAAAGQAZAAADsni6G/6BybmEvYJqPLB4WmMY1mAOBHFFGlEYRYemRUF0HwW8senWQJsFMNnBBKjaLSkUECUuGPNW+uEkgtHt1zsxOyxF1tBxLU8pa64y8gnRZheYMXar3Er5WtxO3ml5MXsHdX5IQTZ6YYQ1SGZMQDRzFSmOiVxKNZNiJpaZkUCbnEuYaaEWRQJUkIBNTwwAqjKQQSpOFCWdM2mdgxIBSLknGIsUD8HEDiETHqjLxhDKGgkAIfkECQoABwAsAAAAABkAGQAAA4p4uhvuLMooag0zL0EKGZc2EUZJCKCAiQtAmmjIKkFXFEMus0Fp4DmdatYrFVC5TwXA8x2DhJOAKSr+kAPPsmnEaqdczyCalVI1gRtQ/D1narcc28yzyaPtejzryVftfB10f3tqfmhRH2M3Sis8WIsgjiwAHFodkjMbgmNSkzOQO5oKFqKjBw8QIgkAIfkECQoABwAsAAAAABkAGQAAA2x4uhvuLMooqp24iUHIEECGBURhEqA4kaaZqhHbvnBTGLhB10eQ44QQT+H7BYfEn+GIDNxyu5rMJRxOUVXeNQoLCDoerso7KH+y0o1ZLCKv0V31h53xWirwsRyP7MnPfXZ3eSp3AgF9RA+IIgkAIfkECQoABwAsAAAAABkAGQAAA4t4uhvuLMooag0zL0HGsJgmEUZREN0XigpAlqcnrGxQlMQJskpgwANTqsLzlTy52AdQ+6E6uSFTZCsMclelYKoJoLIoLTfjhZ6isvGkDEYva9+oMA03545vKopj+lnzXXE3fnR6J4M4hYF9fkMCPAdePzg7kC5+WjQsJEJDmiwcMheQFBYzpBEPECIJACH5BAkKAAcALAAAAAAZABkAAAOseLob/oHJuYS9gmonSCHgYDlaIwyEYRQsaxBCpFmt2hbqG1NAl6+1nwgw6aVsgyQuV7AQJZ3lzWUjiDKMk/TIvMF2lcHtV/V8RDLFyeMhA81WsFr8WXbrZ/lBC/x5WXFpe0dUQC1waFldNlOIegJujWZ5gpB+UyiHIxJcgFZJk3FYDAApXqCHV0+ka1ONqhQBFpmSV4ISshaTZ7YlCg8oIKIkvlkYFsWxEMQUCQAh+QQJCgAHACwAAAAAGQAZAAADtXi6G/6BybmEvYJqJ0gh4GA5WiMMhGEULGsQQqRZrdoW6htTQJevtZ8IIAH0UraBEpcrWIyMQId5c9kIIlJjQEU2b7DdwXi6/a6eT9ZIRn2YP1YaG2P3uO9za75mB7hAcXtyfWRIVkCDanVsAl82VXyMZGeJcmmLAVAHjoI3bnIjUZ1AIUqYdFoKRilgp3siApsLd5hVhE8UUie2l7Eyuhe2WL8lCg8oIHQxwMYKGBfOuhCqEwkAIfkEAQoABwAsAAAAABkAGQAAA6h4uhv+gcm5hL2CaidIISAxPFojDIRhFOx3RZrVqi0rWrAUCIVK1y0CTsfzsQZIpMc2bAx6qxsG1RoIcodO75PsKpmwXYrmVYaCuB20YPUuP0vhVVw9Jd9w5lx7tFNnH3ocb21/LDRxaXxsJ3hGiXt/IoY+K2hXCo02f5U1QlgBhiF4NVagizajnk0mpECCFBZnr1JYRF+rrBs7KKMjDiUTGBfBuxC2DAkAOw==";const Je=t=>(cn("data-v-abfb34bd"),t=t(),un(),t),iR={id:"test",style:{height:"92vh",width:"100vw:"}},rR={key:0,style:{color:"#18191a"}},oR=Je(()=>h("div",{class:"col-1"},null,-1)),aR={class:"row g-0",style:{height:"5vh",position:"relative"}},lR={key:0,class:"col-3"},cR=Je(()=>h("img",{src:eu,alt:"coin"},null,-1)),uR=Je(()=>h("img",{src:eu,alt:"coin"},null,-1)),hR={key:1,class:"col-4"},dR={class:"col-2"},fR={class:"col-3"},pR={class:"col-1"},mR={key:2,class:"col-3"},gR=Je(()=>h("img",{src:eu,alt:"coin"},null,-1)),yR={id:"scoreSpan"},vR=Je(()=>h("img",{src:eu,alt:"coin"},null,-1)),_R={key:3,class:"col-3"},bR={key:4},wR={key:5},ER={key:6},TR={class:"d-flex justify-content-between"},kR={key:0,class:"col-1",style:{"margin-top":"12vh",color:"white"}},AR={class:"mt-4"},SR={class:"mt-5"},IR={style:{color:"white"}},CR=Je(()=>h("div",{class:"mt-5"},"general info",-1)),DR={class:"mt-4"},$R={class:"mt-4"},OR={key:1,class:"col-1",style:{"margin-top":"12vh",color:"white"}},NR=Je(()=>h("div",null,"durations",-1)),PR=Je(()=>h("br",null,null,-1)),MR=Je(()=>h("br",null,null,-1)),RR=Je(()=>h("br",null,null,-1)),LR=Je(()=>h("br",null,null,-1)),xR=["src"],VR=["src"],FR=["src"],UR=["src"],BR=["src"],jR=["src"],HR={key:2,class:"alert alert-success"},zR=Je(()=>h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"5vw",height:"5vw",fill:"grey",class:"bi bi-gear-fill",viewBox:"0 0 16 16"},[h("path",{d:"M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"})],-1)),qR=[zR],WR={key:4,class:"container"},KR=Je(()=>h("br",null,null,-1)),GR=Je(()=>h("br",null,null,-1)),QR=Je(()=>h("br",null,null,-1)),YR=Je(()=>h("br",null,null,-1)),XR=Je(()=>h("br",null,null,-1)),JR={key:5,class:"btn shadow-none"},ZR=Je(()=>h("a",null,"you have unlocked all weapons",-1)),eL=[ZR],tL={key:7,class:"btn shadow-none"},sL=Je(()=>h("a",null,"you have unlocked all passivs",-1)),nL=[sL],iL={key:9,class:"btn shadow-none"},rL=Je(()=>h("a",null,"you have unlocked all peculiarities",-1)),oL=[rL],aL={class:"col-1",style:{"margin-top":"12vh",color:"white"}},lL={key:0},cL=Je(()=>h("br",null,null,-1)),uL={class:"mt-3"},hL={key:0,style:{color:"white"}},dL={key:1,style:{color:"white"}},fL={key:2,class:"d-flex justify-content-center"},pL=Je(()=>h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2vw",height:"2vw",fill:"currentColor",class:"bi bi-heart-fill",viewBox:"0 0 16 16"},[h("path",{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"})],-1)),mL=[pL],gL=Je(()=>h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2vw",height:"2vw",fill:"currentColor",class:"bi bi-shield-fill",viewBox:"0 0 16 16"},[h("path",{d:"M5.072.56C6.157.265 7.31 0 8 0s1.843.265 2.928.56c1.11.3 2.229.655 2.887.87a1.54 1.54 0 0 1 1.044 1.262c.596 4.477-.787 7.795-2.465 9.99a11.775 11.775 0 0 1-2.517 2.453 7.159 7.159 0 0 1-1.048.625c-.28.132-.581.24-.829.24s-.548-.108-.829-.24a7.158 7.158 0 0 1-1.048-.625 11.777 11.777 0 0 1-2.517-2.453C1.928 10.487.545 7.169 1.141 2.692A1.54 1.54 0 0 1 2.185 1.43 62.456 62.456 0 0 1 5.072.56z"})],-1)),yL=[gL],vL={class:"modal-content"},_L={class:"modal-body",style:{"background-color":"grey"}},bL={class:"row"},wL={key:0},EL=["onClick","data-title"],TL={class:"row justify-content-end mt-1"};function kL(t,e,s,n,i,r){const o=Fe("RangeInput"),a=Fe("SelectInput"),l=Fe("TextInput"),u=Fe("Button");return g(),y("div",iR,[t.dataLoad?(g(),y("div",rR,[oR,h("div",aR,[t.bossEnemy.type?(g(),y("div",hR)):(g(),y("div",lR,[cR,k(" Score: "+w(t.score>1e6?Math.round(t.score/1e3)+"k":Math.round(t.score))+"+"+w((t.scorePerTick*60).toFixed(0))+"/s ",1),uR])),h("div",dR," Enemies:"+w(t.enemies.length)+w(t.bossFight?"":`(${((t.spawnEnemyTimer-t.gameloopCounter%t.spawnEnemyTimer)/60).toFixed(1)}s)`),1),h("div",fR," difficulty:"+w(t.difficulty)+w(t.bossFight?"":`(${((t.difficultyTimer-t.gameloopCounter%t.difficultyTimer)/60).toFixed(1)}s)`),1),h("div",pR,"gps:"+w(Math.round(t.gps)),1),t.bossEnemy.type?(g(),y("div",_R)):(g(),y("div",mR,[gR,k(" Highscore: "),h("span",yR,w(t.player.highscore[t.player.playMode]>1e6?Math.round(t.player.highscore[t.player.playMode]/1e3)+"k":Math.round(t.player.highscore[t.player.playMode])),1),vR])),t.bossFight&&!t.bossEnemy.size?(g(),y("div",bR,"Boss Fight")):V("",!0),t.bossFight&&t.bossEnemy.size?(g(),y("div",wR,"Boss HP:"+w(Math.ceil(t.bossEnemy.hP)),1)):V("",!0),!t.bossFight&&!t.bossEnemy.size?(g(),y("div",ER,w(t.player.playMode),1)):V("",!0)]),h("div",null,[h("div",TR,[!t.gameStarted&&t.currentUser?(g(),y("div",kR,[h("div",null,"lvl:"+w(t.player.lvlTree.lvl),1),h("div",AR,"xp:"+w(t.player.lvlTree.xp)+"/"+w(t.player.lvlTree.lvl*100),1),h("div",SR,"tasks("+w(t.player.daily.tasksDone)+"/3)",1),(g(!0),y(te,null,ve(t.player.daily.tasks,c=>(g(),y("div",{key:c.type,class:"mt-4",style:Ae({color:c.need>0?"red":"green"})},[h("div",null,w(c.type),1),h("div",null,w(t.taskNeed(c)),1)],4))),128)),h("div",IR,[CR,h("div",DR,"scrap:"+w(t.player.shop.currency),1),h("div",$R,"hanger:"+w(t.player.ship.models.length)+"/"+w(5),1)])])):(g(),y("div",OR,[NR,h("div",{class:"mt-4",style:Ae({color:t.effects.magnet.active?"green":"red"})},[k(" Magnet: "),PR,k(" "+w((t.effects.magnet.duration/1e3).toFixed(1)),1)],4),h("div",{class:"mt-4",style:Ae({color:t.effects.grow.active?"green":"red"})},[k(" Grow: "),MR,k(" "+w((t.effects.grow.duration/1e3).toFixed(1)),1)],4),h("div",{class:"mt-4",style:Ae({color:t.effects.slowEnemies.active?"green":"red"})},[k(" Slow enemies: "),RR,k(" "+w((t.effects.slowEnemies.duration/1e3).toFixed(1)),1)],4),h("div",{class:"mt-4",style:Ae({color:t.effects.stopTime.active?"green":"red"})},[k(" Stop time: "),LR,k(" "+w((t.effects.stopTime.duration/1e3).toFixed(1)),1)],4)])),h("div",{class:We(["game",{noneCursor:t.gameStarted}])},[h("div",{style:Ae([{left:t.playerInfo.vector[0]+"px",top:t.playerInfo.vector[1]+"px",width:t.playerInfo.size+"px",height:t.playerInfo.size+"px",transform:`rotate(${t.lastDirection}deg)`},{position:"absolute"}])},[h("img",{src:`/img/char/playership${t.player.ship.selectedModel.img}.png`,alt:"",style:Ae({width:t.playerInfo.size+"px",height:t.playerInfo.size+"px"})},null,12,xR)],4),t.bossEnemy.size?(g(),y("div",{key:0,style:Ae([{left:t.bossEnemy.vector[0]+"px",top:t.bossEnemy.vector[1]+"px",width:t.bossEnemy.size+"px",height:t.bossEnemy.size+"px"},{position:"absolute"}])},[h("img",{src:t.bossEnemy.imgsrc,alt:"bossEnemy",style:Ae({width:t.bossEnemy.size+"px",height:t.bossEnemy.size+"px"})},null,12,VR)],4)):V("",!0),(g(!0),y(te,null,ve(t.plasmas,c=>(g(),y("div",{key:JSON.stringify(c),style:Ae([{left:c.vector[0]+"px",top:c.vector[1]+"px",width:c.size+"px",height:c.size+"px"},{position:"absolute"}])},[h("img",{src:c.imgsrc,alt:"plasma",style:Ae({width:c.size+"px",height:c.size+"px"})},null,12,FR)],4))),128)),(g(!0),y(te,null,ve(t.enemyPlasmas,c=>(g(),y("div",{key:JSON.stringify(c),style:Ae([{left:c.vector[0]+"px",top:c.vector[1]+"px",width:c.size+"px",height:c.size+"px"},{position:"absolute"}])},[h("img",{src:c.imgsrc,alt:"plasma",style:Ae({width:c.size+"px",height:c.size+"px"})},null,12,UR)],4))),128)),(g(!0),y(te,null,ve(t.enemies,c=>(g(),y("div",{key:c.id,style:Ae([{left:c.vector[0]+"px",top:c.vector[1]+"px",width:c.size+"px",height:c.size+"px"},{position:"absolute"}])},[h("img",{src:c.imgsrc,alt:"enemy",style:Ae({width:c.size+"px",height:c.size+"px"})},null,12,BR)],4))),128)),(g(!0),y(te,null,ve(t.items,c=>(g(),y("div",{key:JSON.stringify(c),style:Ae([{left:c.vector[0]+"px",top:c.vector[1]+"px",backgroundColor:c.imgsrc},{position:"absolute"}])},[h("img",{src:c.imgsrc,alt:"",style:Ae({width:c.size+"px",height:c.size+"px"})},null,12,jR)],4))),128)),(g(!0),y(te,null,ve(t.specialScores,c=>(g(),y("div",{key:JSON.stringify(c),style:Ae([{left:c.vector[0]+"px",top:c.vector[1]+"px"},{position:"absolute",color:"green"}])}," +"+w(Math.round(c.score)),5))),128)),t.message?(g(),y("div",{key:1,class:We(t.messageType)},w(t.message),3)):V("",!0),t.receiveMessages.length?(g(),y("div",HR,[(g(!0),y(te,null,ve(t.receiveMessages,c=>(g(),y("div",{key:c},w(c),1))),128))])):V("",!0),t.gameStarted?V("",!0):(g(),y("button",{key:3,class:"btn shadow-none",style:{position:"absolute",left:"90%",top:"4% color:grey"},onClick:e[0]||(e[0]=c=>t.buttonSound()),id:"settingsBtn","data-bs-toggle":"modal","data-bs-target":"#settings"},qR)),t.gameStarted?V("",!0):(g(),y("div",WR,[h("button",{"keydown.enter.prevent":"",class:"btn shadow-none",onClick:e[1]||(e[1]=c=>t.start())},[h("a",null,w(t.startButtonText),1)]),t.cancelButtonText?(g(),y("button",{key:0,"keydown.enter.prevent":"",class:"btn shadow-none",onClick:e[2]||(e[2]=c=>t.cancel())},[h("a",null,w(t.cancelButtonText),1)])):V("",!0),KR,t.cancelButtonText?V("",!0):(g(),y("button",{key:1,class:"btn shadow-none","keydown.enter":"",onClick:e[3]||(e[3]=c=>t.changePlayMode("normal"))},[h("a",null,[k(" normal: "),GR,k(" "+w(t.player.playMode=="normal"?"ON":"OFF"),1)])])),t.cancelButtonText?V("",!0):(g(),y("button",{key:2,class:"btn shadow-none","keydown.enter":"",onClick:e[4]||(e[4]=c=>t.changePlayMode("hardcore"))},[h("a",null,[k(" hardcore: "),QR,k(" "+w(t.player.playMode=="hardcore"?"ON":"OFF"),1)])])),t.cancelButtonText?V("",!0):(g(),y("button",{key:3,class:"btn shadow-none","keydown.enter":"",onClick:e[5]||(e[5]=c=>t.changePlayMode("totalchaos"))},[h("a",null,[k(" total chaos: "),YR,k(" "+w(t.player.playMode=="totalchaos"?" ON":" OFF"),1)])])),XR,t.player.weaponTree.weaponAvaibleTypes.length<t.weaponAmount&&!t.cancelButtonText?(g(),y("button",{key:4,class:"btn shadow-none","keydown.enter.prevent":"",onClick:e[6]||(e[6]=c=>t.startBossFight("normal"))},[h("a",null,w(t.bossAvailable("normal")),1)])):V("",!0),t.player.weaponTree.weaponAvaibleTypes.length>=t.weaponAmount&&!t.cancelButtonText?(g(),y("button",JR,eL)):V("",!0),t.player.passivTree.passivAvaibleTypes.length<t.passivAmount&&!t.cancelButtonText?(g(),y("button",{key:6,class:"btn shadow-none","keydown.enter.prevent":"",onClick:e[7]||(e[7]=c=>t.startBossFight("hardcore"))},[h("a",null,w(t.bossAvailable("hardcore")),1)])):V("",!0),t.player.passivTree.passivAvaibleTypes.length>=t.passivAmount&&!t.cancelButtonText?(g(),y("button",tL,nL)):V("",!0),t.player.peculiarities.available.length<t.peculiarityAmout&&!t.cancelButtonText?(g(),y("button",{key:8,class:"btn shadow-none","keydown.enter.prevent":"",onClick:e[8]||(e[8]=c=>t.startBossFight("totalchaos"))},[h("a",null,w(t.bossAvailable("totalchaos")),1)])):V("",!0),t.player.peculiarities.available.length>=t.peculiarityAmout&&!t.cancelButtonText?(g(),y("button",iL,oL)):V("",!0)]))],2),h("div",aL,[h("div",null,"cooldowns ("+w(t.player.shop.energyCell.amount)+")",1),(g(!0),y(te,null,ve(t.player.settings.abilitys,c=>(g(),y("div",{class:"mt-4",key:JSON.stringify(c),style:Ae({color:t.coolDowns[c.name]==0&&t.player.shop.energyCell.amount>t.skillDetails[c.name].tier?"green":"red"})},[c.name?(g(),y("div",lL,[k(w(t.skillDetails[c.name].name)+": ",1),cL,k(" "+w((t.coolDowns[c.name]/1e3).toFixed(1)),1)])):V("",!0)],4))),128))])])]),h("div",uL,[!t.user&&!t.gameStarted?(g(),y("div",hL,"Log in to use all features.")):V("",!0),t.user&&!t.gameStarted?(g(),y("div",dL,w(t.tip),1)):V("",!0),t.gameStarted?(g(),y("div",fL,[(g(!0),y(te,null,ve(t.playerInfo.hP,c=>(g(),y("div",{key:c,style:{color:"red"}},mL))),128)),(g(!0),y(te,null,ve(t.shield,c=>(g(),y("div",{key:c,style:{color:"grey"}},yL))),128))])):V("",!0)]),h("div",{class:"modal fade",id:"settings",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",onOnclick:e[15]||(e[15]=c=>t.unDoChanges()),style:{"margin-top":"11vh"}},[h("div",{class:"modal-dialog",onClick:e[14]||(e[14]=ns(()=>{},["stop"]))},[h("div",vL,[h("div",_L,[h("div",null,[j(o,{placeholder:"music volume",modelValue:t.settingsInput.musicVolume,"onUpdate:modelValue":e[9]||(e[9]=c=>t.settingsInput.musicVolume=c),style:{"background-color":"darkgrey"},labelClass:"bg-darkgrey","side-input-style":"background-color: darkgrey",onChange:e[10]||(e[10]=c=>t.changeVolume(t.settingsInput.musicVolume))},null,8,["modelValue"])]),h("div",null,[j(o,{placeholder:"effect volume",modelValue:t.settingsInput.effectVolume,"onUpdate:modelValue":e[11]||(e[11]=c=>t.settingsInput.effectVolume=c),style:{"background-color":"darkgrey"},"side-input-style":"background-color: darkgrey",labelClass:"bg-darkgrey"},null,8,["modelValue"])]),(g(),y(te,null,ve(4,c=>h("div",{class:"row mt-1",key:c},[h("div",null,[j(a,{placeholder:`ability ${c}`,options:t.availableAbilitys.filter(d=>!t.usedAbilitys.includes(d)||d==t.settingsInput.abilitys[c].name),modelValue:t.settingsInput.abilitys[c].name,"onUpdate:modelValue":d=>t.settingsInput.abilitys[c].name=d,style:{"background-color":"darkgrey"},labelClass:"bg-darkgrey",optionProjection:d=>{var f;return(f=t.skillDetails[d])==null?void 0:f.name},selectedProjection:d=>{var f;return(f=t.skillDetails[d])==null?void 0:f.name},selectOnBlur:!0,onSelectItem:d=>t.settingsInput.abilitys[c].name=d,"side-input-max-length":"1",sideInputClass:"bg-darkgrey",sideInputVModel:t.settingsInput.abilitys[c].key,"side-input-type":"text","side-input-on-input":()=>{this.value=this.value.replace(/[^a-z0-9]/g,"").replace(/(\..*)\./g,"$1")},"onUpdate:sideInputVModel":d=>{t.settingsInput.abilitys[c].key=d},noElementMessage:"no element found"},null,8,["placeholder","options","modelValue","onUpdate:modelValue","optionProjection","selectedProjection","onSelectItem","sideInputVModel","side-input-on-input","onUpdate:sideInputVModel"])])])),64)),h("div",bL,[(g(),y(te,null,ve(["up","down","left","right"],c=>h("div",{key:c,class:"col-6"},[j(l,{placeholder:`move ${c}`,modelValue:t.settingsInput.moves[c],"onUpdate:modelValue":d=>t.settingsInput.moves[c]=d,style:{"background-color":"darkgrey"},labelClass:"bg-darkgrey",maxlength:"1",oninput:"this.value = this.value.replace(/[^a-z0-9]/g, '').replace(/(\\..*)\\./g, '$1');"},null,8,["placeholder","modelValue","onUpdate:modelValue"])])),64))]),t.currentUser?(g(),y("div",wL,[(g(),y(te,null,ve(["lessStartEnemies","higherDifficultyTimer","lowerScoreTimer"],c=>h("div",{key:c,class:"mt-1"},[h("label",{class:"form-check-label w-100 rounded-bottom unselectable py-1 pointer",style:Ae([{color:"black"},{backgroundColor:t.player.shop[c].use?"green":"red"}]),onClick:d=>{t.player.shop[c].use=!t.player.shop[c].use,t.buttonSound()},"data-title":t.shopDetails[c].description}," use "+w(t.shopDetails[c].name),13,EL)])),64))])):V("",!0),h("div",TL,[j(u,{"data-bs-dismiss":"modal",class:"btn btn-danger mx-2 col-4",onClick:e[12]||(e[12]=ns(c=>t.unDoChanges(),["stop"]))},{default:Pe(()=>[k("cancel")]),_:1}),j(u,{class:"btn btn-success col-3",disabled:!t.checkSettings,onClick:e[13]||(e[13]=ns(c=>t.saveSettings(),["stop"])),"data-bs-dismiss":"modal"},{default:Pe(()=>[k("save")]),_:1},8,["disabled"])])])])])],32)])):V("",!0)])}const AL=He(nR,[["render",kL],["__scopeId","data-v-abfb34bd"]]),SL=Oe({data(){return{}},components:{game:AL}});const IL={class:"d-flex justify-content-center"},CL={class:"p-0",id:"game"};function DL(t,e,s,n,i,r){const o=Fe("game");return g(),y("div",IL,[h("div",CL,[j(o)])])}const $L=He(SL,[["render",DL],["__scopeId","data-v-19de2a73"]]),OL=Oe({components:{PlayerCard:Lf},props:{player:{type:Object,required:!0},bestPlayers:{type:[],required:!0},title:String,highscore:String},data(){return{choosenPlayerLoad:!1,choosenPlayer:{}}},methods:{closeChoosePlayer(){this.choosenPlayerLoad=!1,this.buttonSound()},choosePlayer(t){this.buttonSound(),this.choosenPlayer=Ei(t),this.choosenPlayerLoad=!0},buttonSound(){ot(this.player.settings.effectVolume)}}}),NL=""+new URL("../img/crowns/gold.png",import.meta.url).href,PL=""+new URL("../img/crowns/silver.png",import.meta.url).href,ML=""+new URL("../img/crowns/bronze.png",import.meta.url).href;const Aa=t=>(cn("data-v-ca223ebb"),t=t(),un(),t),RL=Aa(()=>h("div",{class:"d-flex",style:{"margin-top":"15vh"}},null,-1)),LL=Aa(()=>h("div",null,[h("u",{style:{"font-size":"6vw"}},"ranking")],-1)),xL={style:{"font-size":"4vw"}},VL={class:"row g-0"},FL={class:"col-12 row g-0 pointer"},UL=["data-bs-target"],BL=Aa(()=>h("img",{src:NL,alt:"",style:{width:"5vw"},class:"col-12"},null,-1)),jL=[BL],HL=["data-bs-target"],zL=["data-bs-target"],qL={class:"col-12 row g-0 justify-content-between"},WL={class:"col-4 pointer"},KL=["data-bs-target"],GL=Aa(()=>h("img",{src:PL,alt:"",style:{width:"5vw"},class:"col-12"},null,-1)),QL=[GL],YL=["data-bs-target"],XL=["data-bs-target"],JL={class:"col-4 pointer"},ZL=["data-bs-target"],e2=Aa(()=>h("img",{src:ML,alt:"",style:{width:"5vw"},class:"col-12"},null,-1)),t2=[e2],s2=["data-bs-target"],n2=["data-bs-target"],i2=["onClick","data-bs-target"],r2=["id"],o2={class:"modal-content"},a2={key:0};function l2(t,e,s,n,i,r){var a,l,u,c,d,f;const o=Fe("PlayerCard");return g(),y(te,null,[RL,LL,h("div",null,[h("u",xL,w(t.title),1)]),h("div",VL,[h("div",FL,[h("div",{onClick:e[0]||(e[0]=p=>{var b;return t.choosePlayer((b=t.bestPlayers[0])==null?void 0:b.player)}),"data-bs-toggle":"modal","data-bs-target":`#playerCard${t.title}`},jL,8,UL),h("div",{onClick:e[1]||(e[1]=p=>{var b;return t.choosePlayer((b=t.bestPlayers[0])==null?void 0:b.player)}),"data-bs-toggle":"modal","data-bs-target":`#playerCard${t.title}`},w((a=t.bestPlayers[0])==null?void 0:a.player.username),9,HL),h("div",{onClick:e[2]||(e[2]=p=>{var b;return t.choosePlayer((b=t.bestPlayers[0])==null?void 0:b.player)}),"data-bs-toggle":"modal","data-bs-target":`#playerCard${t.title}`},w(Math.round((l=t.bestPlayers[0])==null?void 0:l.player.highscore[t.highscore])),9,zL)]),h("div",qL,[h("div",WL,[h("div",{onClick:e[3]||(e[3]=p=>{var b;return t.choosePlayer((b=t.bestPlayers[1])==null?void 0:b.player)}),"data-bs-toggle":"modal","data-bs-target":`#playerCard${t.title}`},QL,8,KL),h("div",{onClick:e[4]||(e[4]=p=>{var b;return t.choosePlayer((b=t.bestPlayers[1])==null?void 0:b.player)}),"data-bs-toggle":"modal","data-bs-target":`#playerCard${t.title}`},w((u=t.bestPlayers[1])==null?void 0:u.player.username),9,YL),h("div",{onClick:e[5]||(e[5]=p=>{var b;return t.choosePlayer((b=t.bestPlayers[1])==null?void 0:b.player)}),"data-bs-toggle":"modal","data-bs-target":`#playerCard${t.title}`},w(Math.round((c=t.bestPlayers[1])==null?void 0:c.player.highscore[t.highscore])),9,XL)]),h("div",JL,[h("div",{onClick:e[6]||(e[6]=p=>{var b;return t.choosePlayer((b=t.bestPlayers[2])==null?void 0:b.player)}),"data-bs-toggle":"modal","data-bs-target":`#playerCard${t.title}`},t2,8,ZL),h("div",{onClick:e[7]||(e[7]=p=>{var b;return t.choosePlayer((b=t.bestPlayers[2])==null?void 0:b.player)}),"data-bs-toggle":"modal","data-bs-target":`#playerCard${t.title}`},w((d=t.bestPlayers[2])==null?void 0:d.player.username),9,s2),h("div",{onClick:e[8]||(e[8]=p=>{var b;return t.choosePlayer((b=t.bestPlayers[2])==null?void 0:b.player)}),"data-bs-toggle":"modal","data-bs-target":`#playerCard${t.title}`},w(Math.round((f=t.bestPlayers[2])==null?void 0:f.player.highscore[t.highscore])),9,n2)]),(g(!0),y(te,null,ve(t.bestPlayers,(p,b)=>(g(),y("div",{class:"col-12 row g-0 pointer",key:p.id},[b>2?(g(),y("div",{key:0,onClick:_=>t.choosePlayer(p==null?void 0:p.player),"data-bs-toggle":"modal","data-bs-target":`#playerCard${t.title}`,class:"mt-2"},w(p==null?void 0:p.player.username)+" : "+w(Math.round(p==null?void 0:p.player.highscore[t.highscore])),9,i2)):V("",!0)]))),128))]),h("div",{style:{"margin-top":"15vh"},class:"modal fade",id:`playerCard${t.title}`,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",onClick:e[10]||(e[10]=p=>t.closeChoosePlayer())},[h("div",{class:"modal-dialog modal-xl",onClick:e[9]||(e[9]=ns(()=>{},["stop"]))},[h("div",o2,[t.choosenPlayerLoad?(g(),y("div",a2,[j(o,{playerProp:t.choosenPlayer,editAble:!1},null,8,["playerProp"])])):V("",!0)])])],8,r2)])],64)}const c2=He(OL,[["render",l2],["__scopeId","data-v-ca223ebb"]]),u2=Oe({data(){return{user:At,player:{},view:"hardcore",bestPlayersNormal:[],bestPlayersHardcore:[],bestPlayersTotalchaos:[]}},async mounted(){let t=await Ru("player.highscore.normal");if(t&&(this.bestPlayersNormal=t.reverse()),t=await Ru("player.highscore.hardcore"),t&&(this.bestPlayersHardcore=t.reverse()),t=await Ru("player.highscore.totalchaos"),t&&(this.bestPlayersTotalchaos=t.reverse()),this.user)try{let e=await Ea();e&&(this.player=e.player)}catch{at()}this.player=Ei(this.player,this.user),this.buttonSound()},methods:{buttonSound(){ot(this.player.settings.effectVolume)}},components:{ScoreCard:c2}}),h2={id:"carouselExampleControls",class:"carousel slide","data-bs-ride":"carousel","data-bs-interval":"false"},d2={class:"carousel-inner"},f2={class:"carousel-item active"},p2={class:"carousel-item"},m2={class:"carousel-item"},g2=h("span",{"aria-hidden":"true"},[h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",fill:"currentColor",class:"bi bi-arrow-left-circle-fill",viewBox:"0 0 16 16"},[h("path",{d:"M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"})])],-1),y2=h("span",{class:"visually-hidden"},"Previous",-1),v2=[g2,y2],_2=h("span",{"aria-hidden":"true"},[h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",fill:"currentColor",class:"bi bi-arrow-right-circle-fill",viewBox:"0 0 16 16"},[h("path",{d:"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z"})])],-1),b2=h("span",{class:"visually-hidden"},"Next",-1),w2=[_2,b2];function E2(t,e,s,n,i,r){const o=Fe("ScoreCard");return g(),y("div",h2,[h("div",d2,[h("div",f2,[j(o,{bestPlayers:t.bestPlayersNormal,player:t.player,title:"normal",highscore:"normal"},null,8,["bestPlayers","player"])]),h("div",p2,[j(o,{bestPlayers:t.bestPlayersHardcore,player:t.player,title:"hardcore",highscore:"hardcore"},null,8,["bestPlayers","player"])]),h("div",m2,[j(o,{bestPlayers:t.bestPlayersTotalchaos,player:t.player,title:"totalchaos",highscore:"totalchaos"},null,8,["bestPlayers","player"])])]),h("button",{onClick:e[0]||(e[0]=a=>t.buttonSound()),class:"carousel-control-prev",type:"button","data-bs-target":"#carouselExampleControls","data-bs-slide":"prev",style:{"margin-top":"15vh"}},v2),h("button",{onClick:e[1]||(e[1]=a=>t.buttonSound()),class:"carousel-control-next",type:"button","data-bs-target":"#carouselExampleControls","data-bs-slide":"next",style:{"margin-top":"15vh"}},w2)])}const T2=He(u2,[["render",E2]]),tu=t=>(cn("data-v-7a502462"),t=t(),un(),t),k2={class:"container d-flex align-items-stretch justify-content-center flex-column",style:{height:"calc(100vh - 200px)"}},A2={class:"card card-default w-75",style:{"margin-left":"12.5%"}},S2={class:"card-header header"},I2={key:0,class:"alert alert-danger"},C2=tu(()=>h("h1",null,"Join a starship crew.",-1)),D2={class:"card-body"},$2={key:0,class:"m-4 alert alert-danger text-center"},O2={key:1,class:"container"},N2=["disabled"],P2={key:0},M2={key:2,class:"loader"},R2=tu(()=>h("div",{class:"inner one"},null,-1)),L2=tu(()=>h("div",{class:"inner two"},null,-1)),x2=tu(()=>h("div",{class:"inner three"},null,-1)),V2=[R2,L2,x2],F2=Oe({__name:"Register",setup(t){const e=qe(""),s=qe(""),n=qe(""),i=qe(""),r=qe(""),o=qe(!1),a=qe({});ot(50);async function l(){if(r.value="",e.value!==s.value){r.value="The passwords do not match";return}o.value=!0;try{a.value.username=i.value,a.value.registeredAt=new Date().toJSON(),await nN(n.value,s.value,a.value),pi.push("/home")}catch{ot(50),r.value="Unfortunately, the account could not be registered"}finally{o.value=!1}}return(u,c)=>(g(),y("div",k2,[h("div",A2,[h("div",S2,[i.value=="gast"?(g(),y("div",I2,"invalid username")):V("",!0),C2]),h("div",D2,[h("form",{onSubmit:c[4]||(c[4]=ns(d=>l(),["prevent"])),autocomplete:"off"},[r.value?(g(),y("div",$2,w(r.value),1)):V("",!0),h("div",null,[j(E(Zc),{placeholder:"username",modelValue:i.value,"onUpdate:modelValue":c[0]||(c[0]=d=>i.value=d),required:""},null,8,["modelValue"])]),h("div",null,[j(E(x0),{placeholder:"email",modelValue:n.value,"onUpdate:modelValue":c[1]||(c[1]=d=>n.value=d),required:""},null,8,["modelValue"])]),h("div",null,[j(E(qh),{placeholder:"password",modelValue:s.value,"onUpdate:modelValue":c[2]||(c[2]=d=>s.value=d),minlength:"6",required:""},null,8,["modelValue"])]),h("div",null,[j(E(qh),{placeholder:"confirm",modelValue:e.value,"onUpdate:modelValue":c[3]||(c[3]=d=>e.value=d),minlength:"6",required:""},null,8,["modelValue"])]),o.value?V("",!0):(g(),y("div",O2,[h("button",{class:"btn",type:"submit",disabled:i.value.length<3||i.value=="gast"},[o.value?V("",!0):(g(),y("a",P2,"register"))],8,N2)])),o.value?(g(),y("div",M2,V2)):V("",!0)],32)])])]))}});const U2=He(F2,[["__scopeId","data-v-7a502462"]]),fn=t=>(cn("data-v-67ac67a7"),t=t(),un(),t),B2={class:"landing"},j2=fn(()=>h("div",{style:{margin:"4%"}},[h("h1",null,"Landing 111 - THE GAME")],-1)),H2={class:"card card-default w-75",style:{"margin-left":"12.5%"}},z2=fn(()=>h("div",{class:"card-header header"},[h("h2",null,"Landing 111")],-1)),q2={class:"card-body"},W2=fn(()=>h("div",{style:{margin:"2%"}}," Landing 111 is a browser game in which you are the captain of your own ship and you against hordes of non-terrestrial competitors have to enforce. Play alone against everyone or join one Space Fleet and conquer the universe together. ",-1)),K2={class:"row align-items-end"},G2=fn(()=>h("div",null,"No account yet? Register for free!",-1)),Q2=fn(()=>h("div",{class:"container"},[h("button",{class:"btn",type:"submit"},[h("a",null,"Register for free!")])],-1)),Y2=[G2,Q2],X2={key:0,class:"m-4 alert alert-danger text-center"},J2={class:"container"},Z2={key:0},ex={key:0,class:"btn",type:"submit",style:{"margin-left":"0px"}},tx={key:0},sx={key:1,class:"loader"},nx=fn(()=>h("div",{class:"inner one"},null,-1)),ix=fn(()=>h("div",{class:"inner two"},null,-1)),rx=fn(()=>h("div",{class:"inner three"},null,-1)),ox=[nx,ix,rx],ax=fn(()=>h("div",{class:"footer"},[h("div",{class:"footer-header"},[h("a",{href:"https://discord.gg/G3UHhTaUNf"},"Join us on discord")])],-1)),lx=Oe({__name:"Landing",setup(t){const e=qe(""),s=qe(""),n=qe(!1),i=qe(!1);At&&pi.push("/home"),ot(50);async function r(){n.value=!1,i.value=!0;try{await sN(s.value,e.value),s.value="",e.value="",pi.push("/home")}catch(a){await at,n.value=!0,console.error({"couldn't login":a})}finally{e.value="",i.value=!1}}function o(){pi.push("/register")}return(a,l)=>(g(),y("div",B2,[j2,h("div",H2,[z2,h("div",q2,[W2,h("div",K2,[h("form",{onSubmit:l[0]||(l[0]=ns(u=>o(),["prevent"])),autocomplete:"off",class:"col-6"},Y2,32),h("form",{onSubmit:l[3]||(l[3]=ns(u=>r(),["prevent"])),autocomplete:"off",class:"col-6"},[n.value?(g(),y("div",X2,"Username or password is not correct")):V("",!0),h("div",J2,[h("div",null,[j(E(x0),{placeholder:"email",modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=u=>s.value=u),required:""},null,8,["modelValue"])]),h("div",null,[j(E(qh),{placeholder:"password",modelValue:e.value,"onUpdate:modelValue":l[2]||(l[2]=u=>e.value=u),minlength:"6",required:""},null,8,["modelValue"])]),i.value?V("",!0):(g(),y("div",Z2,[i.value?V("",!0):(g(),y("button",ex,[i.value?V("",!0):(g(),y("a",tx,"enter your ship."))]))]))]),i.value?(g(),y("div",sx,ox)):V("",!0)],32)])])]),ax]))}});const cx=He(lx,[["__scopeId","data-v-67ac67a7"]]),ux=Oe({setup(){return{fleetSkillDetails:Lu}},components:{PlayerCard:Lf,TextInput:Zc,TextareaInput:EP},data(){return{error:"",edit:!1,searchedFleets:[],user:At,player:{},choosenPlayer:{},choosenPlayerLoad:!1,searchInput:"",nameInput:"",infoInput:"",publicInput:!1,fleetFounder:{},fleetMembers:[],fleet:{members:[],fleetInfo:{founder:"",img:"",name:"",info:"",public:!1},skills:[{name:"bossEnemies",lvl:0},{name:"bossDifficulty",lvl:0}]}}},async mounted(){let t;if(this.user){try{t=await Ea(),t&&(this.player=t.player,this.player=Ei(this.player,this.user),kr(this.player.settings.musicVolume),this.buttonSound())}catch{at()}this.loadFleet()}else this.$router.go(-1)},computed:{fleetGames(){let t=0;for(let e of this.fleetMembers.map(s=>s.player))for(let s of["normal","hardcore","totalchaos"])t+=e.playedGames[s];return t},fleetScore(){let t=0;for(let e of this.fleetMembers.map(s=>s.player))for(let s of["normal","hardcore","totalchaos"])t+=e.highscore[s];return t},fleetlvl(){let t=0;for(let e of this.fleetMembers.map(s=>s.player))for(let s of["normal","hardcore","totalchaos"])t+=e.defeatedBosses[s];return t},avgFleetScore(){let t=0;for(let s of this.fleetMembers.map(n=>n.player))for(let n of["normal","hardcore","totalchaos"])t+=s.highscore[n];let e=0;for(let s of this.fleetMembers.map(n=>n.player))e+=3;return t/e||0},usedSkillpoints(){let t=0;for(let e of this.fleet.skills)t+=e.lvl*Lu[e.name].tier;return t}},methods:{amountPoints(){return Math.floor(this.fleetScore/1e6)},lvlSkill(t){var e;this.fleet.id&&((e=this.user)==null?void 0:e.uid)==this.fleet.fleetInfo.founder&&(this.amountPoints()-this.usedSkillpoints<Lu[t.name].tier||(t.lvl++,lN(this.fleet.id,this.fleet.skills)))},closeChoosePlayer(){this.choosenPlayerLoad=!1,this.buttonSound()},choosePlayer(t){this.buttonSound(),this.choosenPlayer=Ei(t),this.choosenPlayerLoad=!0},deleteMember(t){if(this.buttonSound(),!!this.fleet.id){try{yg(this.fleet.id,t.id)}catch{at()}this.fleet.members=this.fleet.members.filter(e=>e!=t.id),this.fleetMembers=this.fleetMembers.filter(e=>e.id!=t.id)}},async editSave(){if(this.buttonSound(),!!this.fleet.id){if(this.edit)try{cN(this.fleet.id,this.fleet.fleetInfo)}catch{at()}this.edit=!this.edit}},async loadFleet(){this.fleetMembers=[];let t;if(this.player.spaceFleet&&(this.fleet=await I0(this.player.spaceFleet),!this.fleet.fleetInfo||!this.fleet.members.includes(this.user.uid))){this.player.spaceFleet="",this.fleet={members:[],fleetInfo:{founder:"",img:"",name:"",info:"",public:!1},skills:[{name:"bossEnemies",lvl:0},{name:"bossDifficulty",lvl:0}]},await Ks(this.player),this.$router.go(0);return}t=await C0(this.player.spaceFleet);let e=[];for(let s of t)e.push(s);this.fleetMembers=e.filter(s=>this.fleet.members.includes(s.id)),this.fleetFounder=this.fleetMembers.find(s=>s.id==this.fleet.fleetInfo.founder).player},async createFleet(){if(!this.user)return;this.buttonSound();let t=await iN({fleetInfo:{founder:this.user.uid,img:"",name:this.nameInput,info:this.infoInput,public:this.publicInput},members:[this.user.uid],skills:[{name:"bossEnemies",lvl:0},{name:"bossDifficulty",lvl:0}]});t&&(this.player.spaceFleet=t);try{await Ks(this.player),this.loadFleet()}catch{at()}},async searchSpaceFleets(){this.buttonSound();try{let t=await oN(this.searchInput);this.searchedFleets=t}catch{at()}},async joinSpaceFleet(t){if(this.error="",!!this.user&&t.id){this.buttonSound();try{aN(t.id,this.user.uid),this.searchedFleets=[],this.player.spaceFleet=t.id,await Ks(this.player),this.loadFleet()}catch{this.error="fleet is full"}}},async leaveSpaceFleet(){if(this.user&&this.fleet.fleetInfo.founder!=this.user.uid&&this.fleet.id){this.buttonSound();try{yg(this.fleet.id,this.user.uid),this.player.spaceFleet="",await Ks(this.player),this.loadFleet()}catch{at()}}},async deleteSpaceFleet(){if(this.buttonSound(),this.player.spaceFleet)try{await rN(this.player.spaceFleet)}catch{at()}this.player.spaceFleet="";try{this.loadFleet()}catch{at()}},buttonSound(){ot(this.player.settings.effectVolume)}}}),hx=""+new URL("../img/placeholder_wappen_150.png",import.meta.url).href;const Us=t=>(cn("data-v-aa8e6863"),t=t(),un(),t),dx={key:0,class:"alert alert-danger"},fx={class:"d-flex justify-content-center"},px={class:"card",style:{width:"75%","margin-top":"3rem"}},mx={class:"card-header"},gx={key:0,class:"form-inline"},yx={class:"card-body w-100 d-flex justify-content-center"},vx={class:"w-50"},_x={class:"row g-0 mt-1"},bx={class:"col-2"},wx={class:"col-9"},Ex=["onClick"],Tx={key:1,class:"col-1 btn btn-outline-danger",disabled:""},kx={key:0,class:"card-body"},Ax={key:1},Sx={class:"card-body"},Ix={key:0},Cx={key:1},Dx={class:"row"},$x={class:"col-4"},Ox=Us(()=>h("img",{src:hx,alt:"placeholder"},null,-1)),Nx={key:0},Px={key:1},Mx={class:"form-check-label",for:"flexCheckDefault"},Rx={class:"col-4"},Lx=Us(()=>h("div",null,"founder:",-1)),xx={class:"col-4 d-flex flex-column align-items-center"},Vx=Us(()=>h("div",{class:"mb-2"},"members:",-1)),Fx=["onClick"],Ux=["onClick"],Bx=Us(()=>h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-trash",viewBox:"0 0 16 16"},[h("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),h("path",{"fill-rule":"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"})],-1)),jx=[Bx],Hx={key:1},zx={class:"row"},qx={class:"col-3"},Wx=Us(()=>h("i",{class:"bi bi-info-circle"},null,-1)),Kx={class:"col-3"},Gx={class:"col-3"},Qx={class:"col-3"},Yx={key:0,style:{border:"solid black 1px"},class:"mt-4"},Xx=Us(()=>h("div",null,"fleetinfo:",-1)),Jx={key:1},Zx={class:"card-footer d-flex justify-content-between"},eV={key:0,class:"col-3"},tV={key:1,class:"col-3"},sV=Us(()=>h("button",{class:"btn btn-primary shadow-none","data-bs-toggle":"modal","data-bs-target":"#skillModal"},"skills",-1)),nV=[sV],iV={class:"col-3"},rV={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},oV={class:"modal-dialog"},aV={class:"modal-content"},lV=Us(()=>h("div",{class:"modal-header"},[h("h5",{class:"modal-title",id:"exampleModalLabel"},"create fleet")],-1)),cV={class:"modal-body"},uV={class:"form-check",style:{"margin-top":"1rem"}},hV={class:"form-check-label",for:"flexCheckDefault"},dV={class:"modal-footer"},fV={class:"modal fade",id:"skillModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},pV={class:"modal-dialog"},mV={class:"modal-content"},gV=Us(()=>h("div",{class:"modal-header"},[h("h5",{class:"modal-title",id:"exampleModalLabel"},"skill tree")],-1)),yV={class:"modal-body"},vV={"data-title":"you receive 1 point per 1.000.000 fleet score"},_V=["onClick","data-title","line2"],bV=Us(()=>h("br",null,null,-1)),wV={class:"modal-footer"},EV={class:"modal-content"},TV={key:0};function kV(t,e,s,n,i,r){var u,c,d,f,p,b;const o=Fe("TextInput"),a=Fe("TextareaInput"),l=Fe("PlayerCard");return g(),y(te,null,[t.error?(g(),y("div",dx,w(t.error),1)):V("",!0),h("div",fx,[h("div",px,[h("div",mx,[t.player.spaceFleet?V("",!0):(g(),y("form",gx,[h("div",yx,[h("div",vx,[j(o,{labelBorder:!0,placeholder:"search Fleet",modelValue:t.searchInput,"onUpdate:modelValue":e[0]||(e[0]=_=>t.searchInput=_),type:"text",btnText:"Search",btnAction:t.searchSpaceFleets},null,8,["modelValue","btnAction"])])])]))]),(g(!0),y(te,null,ve(t.searchedFleets.filter(_=>_.fleetInfo.public),_=>(g(),y("div",{key:_.id},[h("div",_x,[h("div",bx,w(_.fleetInfo.name),1),h("div",wx,w(_.fleetInfo.info),1),_.members.length<5?(g(),y("button",{key:0,class:"col-1 btn btn-outline-success",onClick:A=>t.joinSpaceFleet(_)},"join",8,Ex)):(g(),y("button",Tx,"full"))])]))),128)),t.player.spaceFleet?(g(),y("div",Ax,[h("div",Sx,[h("div",null,[t.edit?(g(),y("div",Cx,[j(o,{labelBorder:!0,placeholder:"fleetname",modelValue:t.fleet.fleetInfo.name,"onUpdate:modelValue":e[1]||(e[1]=_=>t.fleet.fleetInfo.name=_),type:"text",required:""},null,8,["modelValue"])])):(g(),y("h3",Ix,w((u=t.fleet)==null?void 0:u.fleetInfo.name),1))]),h("div",Dx,[h("div",$x,[Ox,t.edit?(g(),y("div",Px,[h("label",Mx,[gp(h("input",{class:"form-check-input shadow-none","onUpdate:modelValue":e[2]||(e[2]=_=>t.fleet.fleetInfo.public=_),type:"checkbox",value:"",id:"flexCheckDefault"},null,512),[[Mp,t.fleet.fleetInfo.public]]),k(" public ")])])):(g(),y("div",Nx,w(t.fleet.fleetInfo.public?"public":"private"),1))]),h("div",Rx,[Lx,h("div",{onClick:e[3]||(e[3]=_=>t.choosePlayer(t.fleetFounder)),"data-bs-toggle":"modal","data-bs-target":"#playerCard",class:"pointer member"},w((c=t.fleetFounder)==null?void 0:c.username),1)]),h("div",xx,[Vx,(g(!0),y(te,null,ve(t.fleetMembers,_=>(g(),y("div",{key:JSON.stringify(_),class:"d-flex flex-row align-items-center"},[h("div",{onClick:A=>t.choosePlayer(_.player),"data-bs-toggle":"modal","data-bs-target":"#playerCard",class:"pointer p-1 member"},w(_.player.username),9,Fx),t.edit?(g(),y("button",{key:0,class:"btn shadow-none p-0",onClick:A=>t.deleteMember(_)},jx,8,Ux)):(g(),y("div",Hx))]))),128))])]),h("div",zx,[h("div",qx,[Wx,k(" fleetgames: "+w(t.fleetGames),1)]),h("div",Kx,"fleetscore: "+w(Math.round(t.fleetScore)),1),h("div",Gx,"avg score: "+w(Math.round(t.avgFleetScore)),1),h("div",Qx,"fleetlvl: "+w(t.fleetlvl),1)]),t.edit?(g(),y("div",Jx,[j(o,{labelBorder:!0,placeholder:"fleet info",modelValue:t.fleet.fleetInfo.info,"onUpdate:modelValue":e[4]||(e[4]=_=>t.fleet.fleetInfo.info=_),type:"text",required:""},null,8,["modelValue"])])):(g(),y("div",Yx,[Xx,h("div",null,w((d=t.fleet)==null?void 0:d.fleetInfo.info),1)]))])])):(g(),y("div",kx,"you didnt join a fleet yet")),h("div",Zx,[t.player.spaceFleet?(g(),y("div",eV,[((f=t.user)==null?void 0:f.uid)!=t.fleet.fleetInfo.founder?(g(),y("button",{key:0,class:"btn btn-danger shadow-none",onClick:e[5]||(e[5]=_=>t.leaveSpaceFleet())},"leave")):(g(),y("button",{key:1,class:"btn btn-danger shadow-none",onClick:e[6]||(e[6]=_=>t.deleteSpaceFleet())},"delete"))])):V("",!0),t.player.spaceFleet?(g(),y("div",tV,nV)):V("",!0),h("div",iV,[t.player.spaceFleet?V("",!0):(g(),y("button",{key:0,class:"btn btn-primary shadow-none","data-bs-toggle":"modal","data-bs-target":"#exampleModal",onClick:e[7]||(e[7]=_=>t.buttonSound())}," create fleet ")),((p=t.user)==null?void 0:p.uid)==((b=t.fleet)==null?void 0:b.fleetInfo.founder)?(g(),y("button",{key:1,onClick:e[8]||(e[8]=_=>t.editSave()),class:"btn btn-secondary shadow-none"},w(t.edit?"save":"edit"),1)):V("",!0)])]),h("div",rV,[h("div",oV,[h("div",aV,[lV,h("div",cV,[h("div",null,[j(o,{labelBorder:!0,placeholder:"fleetname",modelValue:t.nameInput,"onUpdate:modelValue":e[9]||(e[9]=_=>t.nameInput=_),type:"text",required:""},null,8,["modelValue"])]),h("div",null,[j(a,{labelBorder:!0,placeholder:"Info text",modelValue:t.infoInput,"onUpdate:modelValue":e[10]||(e[10]=_=>t.infoInput=_),type:"textarea",required:""},null,8,["modelValue"])]),h("div",uV,[h("label",hV,[gp(h("input",{class:"form-check-input shadow-none","onUpdate:modelValue":e[11]||(e[11]=_=>t.publicInput=_),type:"checkbox",value:"",id:"flexCheckDefault"},null,512),[[Mp,t.publicInput]]),k(" make fleet public ")])])]),h("div",dV,[h("button",{type:"button",class:"btn btn-secondary shadow-none","data-bs-dismiss":"modal",onClick:e[12]||(e[12]=_=>t.buttonSound())},"Close"),h("button",{type:"button",class:"btn btn-success shadow-none",onClick:e[13]||(e[13]=_=>t.createFleet()),"data-bs-dismiss":"modal"},"create fleet")])])])]),h("div",fV,[h("div",pV,[h("div",mV,[gV,h("div",yV,[h("div",vV,w(t.amountPoints()-t.usedSkillpoints)+"/"+w(t.amountPoints()),1),(g(!0),y(te,null,ve(t.fleet.skills,_=>(g(),y("div",{key:_.name},[h("button",{class:"mt-2 w-100 btn btn-primary align-self-center shadow-none",onClick:A=>t.lvlSkill(_),"data-title":t.fleetSkillDetails[_.name].description,line2:`costs: ${t.fleetSkillDetails[_.name].tier}`},[k(w(t.fleetSkillDetails[_.name].name)+" ",1),bV,k(" lvl: "+w(_.lvl)+"/"+w(t.fleetSkillDetails[_.name].maxlvl),1)],8,_V)]))),128))]),h("div",wV,[h("button",{type:"button",class:"btn btn-secondary shadow-none","data-bs-dismiss":"modal",onClick:e[14]||(e[14]=_=>t.buttonSound())},"Close")])])])]),h("div",{style:{"margin-top":"15vh"},class:"modal fade",id:"playerCard",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",onClick:e[16]||(e[16]=_=>t.closeChoosePlayer())},[h("div",{class:"modal-dialog modal-xl",onClick:e[15]||(e[15]=ns(()=>{},["stop"]))},[h("div",EV,[t.choosenPlayerLoad?(g(),y("div",TV,[j(l,{playerProp:t.choosenPlayer,editAble:!1},null,8,["playerProp"])])):V("",!0)])])])])])],64)}const AV=He(ux,[["render",kV],["__scopeId","data-v-aa8e6863"]]),SV=Oe({setup(){},components:{FleetOptions:AV}}),IV={class:"fleet",style:{"margin-top":"12vh"}};function CV(t,e,s,n,i,r){const o=Fe("FleetOptions");return g(),y("div",IV,[j(o)])}const DV=He(SV,[["render",CV]]),$V=Oe({components:{Button:Ta,Tooltip:Rf},setup(){return{skillDetails:oe,findHouse:Ot,findlvlSkill:lo,findlvlWeaponUpgrade:Gi,findlvlPassiv:Qi}},props:{playerProp:{type:Object,required:!0},pressedKeys:{type:Object,required:!0}},data(){return{player:{},timer:0,user:At,dataLoad:!1}},computed:{tier1Skills(){let t=[];for(let e of this.player.skillTree.skills)oe[e.name].tier==1&&oe[e.name].maxlvl!=1&&t.push(e);return t.sort((e,s)=>e.name<s.name?-1:1).sort((e,s)=>oe[e.name].maxlvl<oe[s.name].maxlvl?-1:1),t},tier1Abilitys(){let t=[];for(let e of this.player.skillTree.skills)oe[e.name].tier==1&&oe[e.name].maxlvl==1&&t.push(e);return t.sort((e,s)=>e.name<s.name?-1:1).sort((e,s)=>oe[e.name].maxlvl<oe[s.name].maxlvl?-1:1),t},tier2Skills(){let t=[];for(let e of this.player.skillTree.skills)oe[e.name].tier==2&&oe[e.name].maxlvl!=1&&t.push(e);return t.sort((e,s)=>e.name<s.name?-1:1).sort((e,s)=>oe[e.name].maxlvl<oe[s.name].maxlvl?-1:1),t},tier2Abilitys(){let t=[];for(let e of this.player.skillTree.skills)oe[e.name].tier==2&&oe[e.name].maxlvl==1&&t.push(e);return t.sort((e,s)=>e.name<s.name?-1:1).sort((e,s)=>oe[e.name].maxlvl<oe[s.name].maxlvl?-1:1),t},tier3Skills(){let t=[];for(let e of this.player.skillTree.skills)oe[e.name].tier==3&&oe[e.name].maxlvl!=1&&t.push(e);return t.sort((e,s)=>e.name<s.name?-1:1).sort((e,s)=>oe[e.name].maxlvl<oe[s.name].maxlvl?-1:1),t},usedSkillPoints(){let t=0;for(let e of this.player.skillTree.skills)t+=e.lvl*oe[e.name].tier;return t}},mounted(){this.player=this.playerProp,this.dataLoad=!0},methods:{lvlSkill(t){let e=1;this.pressedKeys.Shift&&(e=oe[t.name].maxlvl+(oe[t.name].maxlvl>1?(Ot(this.player,"skill")+lo(this.player,"tier"+oe[t.name].tier))*(4-oe[t.name].tier):0));for(let s=0;s<e;s++)if(t.lvl<oe[t.name].maxlvl+(oe[t.name].maxlvl>1?(Ot(this.player,"skill")+lo(this.player,"tier"+oe[t.name].tier))*(4-oe[t.name].tier):0)&&this.player.skillTree.skillPoints-this.usedSkillPoints>=oe[t.name].tier&&(t.lvl++,s==0&&this.buttonSound(),oe[t.name].maxlvl==1)){for(let n=1;n<5;n++)if(!this.player.settings.abilitys[n].name){this.player.settings.abilitys[n].name=t.name;return}}},lvlSkillx8(t){for(let e=0;e<8;e++)t.lvl<oe[t.name].maxlvl+(oe[t.name].maxlvl>1?(Ot(this.player,"skill")+lo(this.player,"tier"+oe[t.name].tier))*(4-oe[t.name].tier):0)&&this.player.skillTree.skillPoints-this.usedSkillPoints>=oe[t.name].tier&&t.lvl++},resetSkillTree(){this.buttonSound(),this.player.skillTree.skillPoints-=this.usedSkillPoints;for(let t of this.player.skillTree.skills)this.player.skillTree.skillPoints+=t.lvl*oe[t.name].tier,t.lvl=0;for(let t=1;t<5;t++)this.player.settings.abilitys[t].name=""},buttonSound(){ot(this.player.settings.effectVolume)}}}),OV={key:0,style:{"margin-top":"6vh",color:"white"}},NV={"data-title":"you get 1 skillpoint per 1000 highscore in normal mode",class:"w-25 d-inline"},PV=h("br",null,null,-1),MV={class:"row g-0 mt-2"},RV=h("div",{class:"col-1"},null,-1),LV={class:"d-flex flex-column col-2 mx-1"},xV=h("br",null,null,-1),VV={class:"d-flex flex-column col-2 mx-1"},FV=h("br",null,null,-1),UV={class:"d-flex flex-column col-2 mx-1"},BV=h("br",null,null,-1),jV={class:"d-flex flex-column col-2 mx-1"},HV=h("br",null,null,-1),zV={class:"d-flex flex-column col-2 mx-1"},qV=h("br",null,null,-1),WV={class:"mt-2"};function KV(t,e,s,n,i,r){const o=Fe("Button"),a=Fe("Tooltip");return t.dataLoad?(g(),y("div",OV,[h("div",null,[h("div",NV,[k(" Research Points: "),PV,k(" "+w(t.player.skillTree.skillPoints-t.usedSkillPoints)+"/"+w(t.player.skillTree.skillPoints),1)])]),h("div",MV,[RV,h("div",LV,[(g(!0),y(te,null,ve(t.tier1Skills,l=>(g(),y("div",{key:l.name},[j(a,{tooltip:t.skillDetails[l.name].description+`
`+(l.lvl<t.skillDetails[l.name].maxlvl+(t.findHouse(t.player,"skill")+t.findlvlSkill(t.player,"tier1"))*3?`costs: ${t.skillDetails[l.name].tier}`:"max lvl")},{default:Pe(()=>[j(o,{class:"mt-2 w-100 btn btn-primary align-self-center shadow-none",onClick:u=>t.lvlSkill(l),onDblclick:u=>t.lvlSkillx8(l)},{default:Pe(()=>[k(w(t.skillDetails[l.name].name)+" ",1),xV,k(" lvl: "+w(l.lvl)+"/"+w(t.skillDetails[l.name].maxlvl+(t.findHouse(t.player,"skill")+t.findlvlSkill(t.player,"tier1"))*3),1)]),_:2},1032,["onClick","onDblclick"])]),_:2},1032,["tooltip"])]))),128))]),h("div",VV,[(g(!0),y(te,null,ve(t.tier1Abilitys,l=>(g(),y("div",{key:l.name},[j(a,{tooltip:t.skillDetails[l.name].description+`
`+(l.lvl<t.skillDetails[l.name].maxlvl?`costs: ${t.skillDetails[l.name].tier}`:"max lvl")},{default:Pe(()=>[j(o,{class:"mt-2 w-100 btn btn-primary align-self-center shadow-none",onClick:u=>t.lvlSkill(l),onDblclick:u=>t.lvlSkillx8(l)},{default:Pe(()=>[k(w(t.skillDetails[l.name].name)+" ",1),FV,k(" lvl: "+w(l.lvl)+"/"+w(t.skillDetails[l.name].maxlvl),1)]),_:2},1032,["onClick","onDblclick"])]),_:2},1032,["tooltip"])]))),128))]),h("div",UV,[(g(!0),y(te,null,ve(t.tier2Skills,l=>(g(),y("div",{key:l.name},[j(a,{tooltip:t.skillDetails[l.name].description+`
`+(l.lvl<t.skillDetails[l.name].maxlvl+(t.findHouse(t.player,"skill")+t.findlvlSkill(t.player,"tier2"))*2?`costs: ${t.skillDetails[l.name].tier}`:"max lvl")},{default:Pe(()=>[j(o,{class:"mt-2 w-100 btn btn-primary align-self-center shadow-none",onClick:u=>t.lvlSkill(l),onDblclick:u=>t.lvlSkillx8(l),disabled:t.usedSkillPoints<100},{default:Pe(()=>[k(w(t.skillDetails[l.name].name)+" ",1),BV,k(" lvl: "+w(l.lvl)+"/"+w(t.skillDetails[l.name].maxlvl+(t.findHouse(t.player,"skill")+t.findlvlSkill(t.player,"tier2"))*2),1)]),_:2},1032,["onClick","onDblclick","disabled"])]),_:2},1032,["tooltip"])]))),128))]),h("div",jV,[(g(!0),y(te,null,ve(t.tier2Abilitys,l=>(g(),y("div",{key:l.name},[j(a,{tooltip:t.skillDetails[l.name].description+`
`+(l.lvl<t.skillDetails[l.name].maxlvl?`costs: ${t.skillDetails[l.name].tier}`:"max lvl")},{default:Pe(()=>[j(o,{class:"mt-2 w-100 btn btn-primary align-self-center shadow-none",onClick:u=>t.lvlSkill(l),onDblclick:u=>t.lvlSkillx8(l),disabled:t.usedSkillPoints<100},{default:Pe(()=>[k(w(t.skillDetails[l.name].name)+" ",1),HV,k(" lvl: "+w(l.lvl)+"/"+w(t.skillDetails[l.name].maxlvl),1)]),_:2},1032,["onClick","onDblclick","disabled"])]),_:2},1032,["tooltip"])]))),128))]),h("div",zV,[(g(!0),y(te,null,ve(t.tier3Skills,l=>(g(),y("div",{key:l.name},[j(a,{tooltip:t.skillDetails[l.name].description+`
`+(l.lvl<t.skillDetails[l.name].maxlvl+(t.findHouse(t.player,"skill")+t.findlvlSkill(t.player,"tier3"))?`costs: ${t.skillDetails[l.name].tier}`:"max lvl")},{default:Pe(()=>[j(o,{class:"mt-2 w-100 btn btn-primary align-self-center shadow-none",onClick:u=>t.lvlSkill(l),onDblclick:u=>t.lvlSkillx8(l),disabled:t.usedSkillPoints<200},{default:Pe(()=>[k(w(t.skillDetails[l.name].name)+" ",1),qV,k(" lvl: "+w(l.lvl)+"/"+w(t.skillDetails[l.name].maxlvl+(t.findHouse(t.player,"skill")+t.findlvlSkill(t.player,"tier3"))),1)]),_:2},1032,["onClick","onDblclick","disabled"])]),_:2},1032,["tooltip"])]))),128))]),h("div",WV,[j(o,{class:"btn btn-danger align-self-center shadow-none",onClick:e[0]||(e[0]=l=>t.resetSkillTree())},{default:Pe(()=>[k("reset Skilltree")]),_:1})])])])):V("",!0)}const GV=He($V,[["render",KV]]),QV=Oe({components:{Button:Ta,Tooltip:Rf},setup(){return{weaponDetails:De,weaponAmount:D0,findHouse:Ot,findlvlWeaponUpgrade:Gi}},data(){return{player:{},user:At,dataLoad:!1}},props:{playerProp:{type:Object,required:!0},pressedKeys:{type:Object,required:!0}},computed:{usedWeaponPoints(){let t=0;for(let e of this.player.weaponTree.weaponUpgrades)t+=e.lvl*De[e.name].tier;return t},tier1Upgrades(){let t=[];for(let e of this.player.weaponTree.weaponUpgrades)De[e.name].tier==1&&De[e.name].maxlvl!=1&&t.push(e);return t.sort((e,s)=>e.name<s.name?-1:1).sort((e,s)=>De[e.name].maxlvl<De[s.name].maxlvl?-1:1),t},tier2Upgrades(){let t=[];for(let e of this.player.weaponTree.weaponUpgrades)De[e.name].tier==2&&De[e.name].maxlvl!=1&&t.push(e);return t.sort((e,s)=>e.name<s.name?-1:1).sort((e,s)=>De[e.name].maxlvl<De[s.name].maxlvl?-1:1),t},tier10Upgrades(){let t=[];for(let e of this.player.weaponTree.weaponUpgrades)De[e.name].tier==10&&De[e.name].maxlvl!=1&&t.push(e);return t.sort((e,s)=>e.name<s.name?-1:1).sort((e,s)=>De[e.name].maxlvl<De[s.name].maxlvl?-1:1),t}},mounted(){this.player=this.playerProp,this.dataLoad=!0},methods:{lvlWeaponUpgrade(t){let e=1;if(De[t.name].tier<10){this.pressedKeys.Shift&&(e=De[t.name].maxlvl+(Ot(this.player,"weapon")+Gi(this.player,"tier"+De[t.name].tier))*2);for(let s=0;s<e;s++)t.lvl<De[t.name].maxlvl+(Ot(this.player,"weapon")+Gi(this.player,"tier"+De[t.name].tier))*2&&this.player.weaponTree.weaponPoints-this.usedWeaponPoints>=De[t.name].tier&&(t.lvl++,s==0&&this.buttonSound())}else{this.pressedKeys.Shift&&(e=De[t.name].maxlvl);for(let s=0;s<e;s++)t.lvl<De[t.name].maxlvl&&this.player.weaponTree.weaponPoints-this.usedWeaponPoints>=De[t.name].tier&&(t.lvl++,s==0&&this.buttonSound())}},lvlWeaponUpgradex8(t){for(let e=0;e<8;e++)De[t.name].tier<10?t.lvl<De[t.name].maxlvl+(Ot(this.player,"weapon")+Gi(this.player,"tier"+De[t.name].tier))*2&&this.player.weaponTree.weaponPoints-this.usedWeaponPoints>=De[t.name].tier&&t.lvl++:t.lvl<De[t.name].maxlvl&&this.player.weaponTree.weaponPoints-this.usedWeaponPoints>=De[t.name].tier&&t.lvl++},resetWeaponTree(){this.buttonSound(),this.player.weaponTree.weaponPoints-=this.usedWeaponPoints;for(let t of this.player.weaponTree.weaponUpgrades)this.player.weaponTree.weaponPoints+=t.lvl*De[t.name].tier,t.lvl=0},buttonSound(){ot(this.player.settings.effectVolume)}}}),YV={key:0,style:{"margin-top":"6vh",color:"white"}},XV={"data-title":"you get 1 weaponpoint per 500 highscore in hardcore mode",class:"w-25 d-inline"},JV=h("br",null,null,-1),ZV={class:"row g-0 mt-2"},eF=h("div",{class:"col-3"},null,-1),tF={class:"d-flex flex-column col-2 mx-1"},sF=h("br",null,null,-1),nF={class:"d-flex flex-column col-2 mx-1"},iF=h("br",null,null,-1),rF={class:"d-flex flex-column col-2 mx-1"},oF=h("br",null,null,-1),aF={class:"mt-2"};function lF(t,e,s,n,i,r){const o=Fe("Button"),a=Fe("Tooltip");return t.dataLoad?(g(),y("div",YV,[h("div",null,[h("div",null,[h("div",XV,[k(" Weapon Points: "),JV,k(" "+w(t.player.weaponTree.weaponPoints-t.usedWeaponPoints)+"/"+w(t.player.weaponTree.weaponPoints),1)])])]),h("div",ZV,[eF,h("div",tF,[(g(!0),y(te,null,ve(t.tier1Upgrades,l=>(g(),y("div",{key:l.name},[j(a,{tooltip:t.weaponDetails[l.name].description+`
`+(l.lvl<t.weaponDetails[l.name].maxlvl+(t.findHouse(t.player,"weapon")+t.findlvlWeaponUpgrade(t.player,"tier1"))*2?`costs: ${t.weaponDetails[l.name].tier}`:"max lvl")},{default:Pe(()=>[j(o,{class:"mt-2 w-100 btn btn-primary shadow-none",onClick:u=>t.lvlWeaponUpgrade(l),onDblclick:u=>t.lvlWeaponUpgradex8(l)},{default:Pe(()=>[k(w(t.weaponDetails[l.name].name)+" ",1),sF,k(" lvl: "+w(l.lvl)+"/"+w(t.weaponDetails[l.name].maxlvl+(t.findHouse(t.player,"weapon")+t.findlvlWeaponUpgrade(t.player,"tier1"))*2),1)]),_:2},1032,["onClick","onDblclick"])]),_:2},1032,["tooltip"])]))),128))]),h("div",nF,[(g(!0),y(te,null,ve(t.tier2Upgrades,l=>(g(),y("div",{key:l.name},[j(a,{tooltip:t.weaponDetails[l.name].description+`
`+(l.lvl<t.weaponDetails[l.name].maxlvl+(t.findHouse(t.player,"weapon")+t.findlvlWeaponUpgrade(t.player,"tier2"))*2?`costs: ${t.weaponDetails[l.name].tier}`:"max lvl")},{default:Pe(()=>[j(o,{class:"mt-2 w-100 btn btn-primary shadow-none",onClick:u=>t.lvlWeaponUpgrade(l),onDblclick:u=>t.lvlWeaponUpgradex8(l),disabled:t.usedWeaponPoints<40},{default:Pe(()=>[k(w(t.weaponDetails[l.name].name)+" ",1),iF,k(" lvl: "+w(l.lvl)+"/"+w(t.weaponDetails[l.name].maxlvl+(t.findHouse(t.player,"weapon")+t.findlvlWeaponUpgrade(t.player,"tier2"))*2),1)]),_:2},1032,["onClick","onDblclick","disabled"])]),_:2},1032,["tooltip"])]))),128))]),h("div",rF,[(g(!0),y(te,null,ve(t.tier10Upgrades,l=>(g(),y("div",{key:l.name},[j(a,{tooltip:t.weaponDetails[l.name].description+`
`+(l.lvl<t.weaponDetails[l.name].maxlvl?`costs: ${t.weaponDetails[l.name].tier}`:"max lvl")},{default:Pe(()=>[j(o,{class:"mt-2 w-100 btn btn-primary shadow-none",onClick:u=>t.lvlWeaponUpgrade(l),onDblclick:u=>t.lvlWeaponUpgradex8(l),disabled:t.usedWeaponPoints<70},{default:Pe(()=>[k(w(t.weaponDetails[l.name].name)+" ",1),oF,k(" lvl: "+w(l.lvl)+"/"+w(t.weaponDetails[l.name].maxlvl),1)]),_:2},1032,["onClick","onDblclick","disabled"])]),_:2},1032,["tooltip"])]))),128))])]),h("div",aF,[j(o,{class:"btn btn-danger shadow-none",onClick:e[0]||(e[0]=l=>t.resetWeaponTree())},{default:Pe(()=>[k("reset weapontree")]),_:1})])])):V("",!0)}const cF=He(QV,[["render",lF]]),uF=Oe({setup(){return{findHouse:Ot,findlvlPassiv:Qi,passivDetails:Gs,passivAmount:Xc}},data(){return{player:{},user:At,dataLoad:!1}},props:{playerProp:{type:Object,required:!0},pressedKeys:{type:Object,required:!0}},computed:{usedPassivPoints(){let t=0;for(let e of this.player.passivTree.passivUpgrades)t+=e.lvl;return t}},mounted(){this.player=this.playerProp,this.dataLoad=!0},methods:{lvlPassivUpgrade(t){let e=1;if(t.name!="none"){this.pressedKeys.Shift&&(e=Gs[t.name].maxlvl+(Ot(this.player,"passiv")+Qi(this.player,"tier1"))*5);for(let s=0;s<e;s++)t.lvl<Gs[t.name].maxlvl+(Ot(this.player,"passiv")+Qi(this.player,"tier1"))*5&&this.player.passivTree.passivPoints-this.usedPassivPoints>0&&(t.lvl++,s==0&&this.buttonSound())}},lvlPassivUpgradex8(t){if(t.name!="none")for(let e=0;e<8;e++)t.lvl<Gs[t.name].maxlvl+(Ot(this.player,"passiv")+Qi(this.player,"tier1"))*5&&this.player.passivTree.passivPoints-this.usedPassivPoints>0&&t.lvl++},resetPassivTree(){this.buttonSound();for(let t of this.player.passivTree.passivUpgrades)t.lvl=0},resetPassiv(t){this.buttonSound(),t.lvl=0},buttonSound(){ot(this.player.settings.effectVolume)}}}),hF={key:0,style:{"margin-top":"6vh",color:"white"}},dF={"data-title":"you get 1 passivpoint per 2000 highscore in totalchaos mode",class:"w-25 d-inline"},fF=h("br",null,null,-1),pF={class:"d-flex j...stify-content-center"},mF={key:0,class:"mx-1"},gF=["onClick","onDblclick","data-title"],yF=h("br",null,null,-1),vF=["onClick"],_F={class:"mt-2"};function bF(t,e,s,n,i,r){return t.dataLoad?(g(),y("div",hF,[h("div",null,[h("div",dF,[k(" Atom Points: "),fF,k(" "+w(t.player.passivTree.passivPoints-t.usedPassivPoints)+"/"+w(t.player.passivTree.passivPoints),1)])]),h("div",pF,[(g(!0),y(te,null,ve(t.player.passivTree.passivUpgrades,o=>(g(),y("div",{key:o.name},[t.player.passivTree.passivType.includes(o.name)?(g(),y("div",mF,[h("button",{class:"mt-2 w-100 btn btn-primary shadow-none rounded-0 rounded-top",onClick:a=>t.lvlPassivUpgrade(o),onDblclick:a=>t.lvlPassivUpgradex8(o),"data-title":t.passivDetails[o.name].description+`
`+(o.lvl<t.passivDetails[o.name].maxlvl+(o.name!="none"?(t.findHouse(t.player,"passiv")+t.findlvlPassiv(t.player,"tier1"))*5:0)?o.name!="none"?"costs: 1":"":"max lvl")},[k(w(t.passivDetails[o.name].name)+" ",1),yF,k(" lvl: "+w(o.lvl)+"/"+w(t.passivDetails[o.name].maxlvl+(o.name!="none"?t.findHouse(t.player,"passiv"+t.findlvlPassiv(t.player,"tier1"))*5:0)),1)],40,gF),h("button",{class:"w-100 btn btn-danger shadow-none rounded-0 rounded-bottom",onClick:a=>t.resetPassiv(o)},"reset",8,vF)])):V("",!0)]))),128))]),h("div",_F,[h("button",{class:"btn btn-danger align-self-center shadow-none",onClick:e[0]||(e[0]=o=>t.resetPassivTree())},"reset passivtree")])])):V("",!0)}const wF=He(uF,[["render",bF]]),EF=Oe({setup(){return{shopDetails:mt,passivDetails:Gs,passivAmount:Xc,modelDetails:ds,percent:Y,findPassivUpgrade:ki,findHouse:Ot,findWeaponUpgrade:Kh}},data(){return{player:{},user:At,receiveMessage:"",maxEnergyCell:0,dataLoad:!1,modelCost:500,licenseCost:2500,tasksCost:500}},props:{playerProp:{type:Object,required:!0}},mounted(){this.player=this.playerProp,this.maxEnergyCell=Math.round(ds[this.player.ship.selectedModel.rarity].store+Kh(this.player,"munitionsDepot")*Y(ki(this.player,"shipStats")/5,"in")),this.modelCost*=Y(Yi(this.player,"tier2")*10,"de"),this.licenseCost*=Y(Yi(this.player,"tier2")*10,"de"),this.tasksCost*=Y(Yi(this.player,"tier2")*10,"de"),this.dataLoad=!0},methods:{upgradeCosts(t){return this.player.shop[t].lvl*mt[t].upgradeCost*Y(Yi(this.player,"tier2")*10,"de")},buyTasks(){if(this.player.shop.currency<this.tasksCost)return;this.player=xi(this.player,this.tasksCost),this.player.daily.tasksDone=0;let t=Object.values(pl);this.player.daily.tasks=[];for(let e=0;e<3;e++)this.player.daily.tasks.push(t.splice($e(t.length-1),1)[0])},buyModel(){if(this.player.shop.currency<this.modelCost)return;this.player=xi(this.player,this.modelCost);let t=F0(this.player,4,1);this.player=t.player;for(let e of this.player.daily.tasks)e.type=="getSpaceShips"&&e.need>0&&(e.need--,e.need<=0&&(this.player.daily.tasksDone++,this.player=xf(this.player,100)));this.receiveMessage=t.receiveMessage},buyBuildingLicenses(){this.player.shop.currency<this.licenseCost||(this.buttonSound(),this.player=xi(this.player,this.licenseCost),this.player.spaceport.buildingLicenses++)},upgradeShopElement(t){this.player.shop.currency<=this.upgradeCosts(t)||this.player.shop[t].lvl>=Ot(this.player,"shop")||(this.player=xi(this.player,this.upgradeCosts(t)),this.player.shop[t].lvl++)},buyShopItem(t){this.player.shop.currency<=mt[t].cost||this.player.shop[t].amount>=(t!="energyCell"?mt[t].max:this.maxEnergyCell)||(this.buttonSound(),this.player=xi(this.player,mt[t].cost),this.player.shop[t].amount++)},buyShopItemx8(t){for(let e=0;e<8;e++){if(this.player.shop.currency<=mt[t].cost||this.player.shop[t].amount>=mt[t].max)return;this.player=xi(this.player,mt[t].cost),this.player.shop[t].amount++}},buttonSound(){ot(this.player.settings.effectVolume)}}});const zn=t=>(cn("data-v-d0c5b42c"),t=t(),un(),t),TF={key:0,style:{"margin-top":"6vh",color:"white"}},kF={"data-title":"you get scrap when enemies die",class:"w-25 d-inline"},AF=zn(()=>h("br",null,null,-1)),SF={class:"d-flex justify-content-center"},IF=["onClick","data-title"],CF=["onClick","data-title"],DF=zn(()=>h("br",null,null,-1)),$F=["onClick"],OF={class:"d-flex flex-column-reverse"},NF=["onClick","data-title"],PF=zn(()=>h("br",null,null,-1)),MF={class:"mt-2"},RF=["data-title"],LF=zn(()=>h("br",null,null,-1)),xF={class:"mt-2 ms-1"},VF=["data-title"],FF=zn(()=>h("br",null,null,-1)),UF=["data-title","data-bs-toggle"],BF=zn(()=>h("br",null,null,-1)),jF=["data-title"],HF=zn(()=>h("br",null,null,-1)),zF={class:"modal fade",id:"modelModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},qF={class:"modal-dialog"},WF={class:"modal-content"},KF=zn(()=>h("div",{class:"modal-header"},[h("h5",{class:"modal-title",id:"exampleModalLabel"})],-1)),GF={class:"modal-body"},QF={class:"modal-footer"};function YF(t,e,s,n,i,r){return g(),y(te,null,[t.dataLoad?(g(),y("div",TF,[h("div",null,[h("div",kF,[k(" Scrap: "),AF,k(" "+w(t.player.shop.currency),1)])]),h("div",SF,[h("div",null,[(g(),y(te,null,ve(["energyCell","lessStartEnemies","higherDifficultyTimer","lowerScoreTimer"],o=>h("div",{key:o,class:"mt-2"},[o!="energyCell"?(g(),y("label",{key:0,class:"form-check-label w-100 rounded-top unselectable pointer",style:Ae([{height:"3vh"},{backgroundColor:t.player.shop[o].use?"green":"red"}]),onClick:a=>{t.player.shop[o].use=!t.player.shop[o].use,t.buttonSound()},"data-title":t.shopDetails[o].description}," use "+w(t.shopDetails[o].name),13,IF)):V("",!0),h("button",{onClick:a=>t.buyShopItem(o),class:We(["w-100 btn btn-primary align-self-center shadow-none rounded-0",o=="energyCell"?"rounded-top":""]),style:{height:"6vh"},"data-title":t.shopDetails[o].description+`
`+(t.player.shop[o].amount<(o=="energyCell"?t.maxEnergyCell:t.shopDetails[o].max)?`costs: ${t.shopDetails[o].cost}`:"full")},[k(w(t.shopDetails[o].name)+" ",1),DF,k(" "+w(t.player.shop[o].amount)+"/"+w(o=="energyCell"?t.maxEnergyCell:t.shopDetails[o].max),1)],10,CF),h("div",null,[h("label",{class:"form-check-label w-100 rounded-bottom unselectable py-1 pointer",onClick:a=>{t.player.shop[o].reBuy=!t.player.shop[o].reBuy,t.buttonSound()},style:Ae([{backgroundColor:t.player.shop[o].reBuy?"green":"red"},{height:"3vh"}])}," auto rebuy ",12,$F)])])),64))]),h("div",OF,[(g(),y(te,null,ve(["lowerScoreTimer","higherDifficultyTimer","lessStartEnemies"],o=>h("div",{key:o,class:"mt-2"},[h("button",{onClick:a=>t.upgradeShopElement(o),class:"w-100 btn btn-primary align-self-center shadow-none ms-1",style:{height:"12vh"},"data-title":t.shopDetails[o].description+`
`+(t.player.shop[o].lvl<t.findHouse(t.player,"shop")?`costs: ${t.upgradeCosts(o)}`:"max lvl")},[k(" upgrade "+w(t.shopDetails[o].name)+" ",1),PF,k(" "+w(t.player.shop[o].lvl)+"/"+w(t.findHouse(t.player,"shop")),1)],8,NF)])),64))]),h("div",MF,[h("button",{onClick:e[0]||(e[0]=o=>t.upgradeShopElement("passivSlots")),class:"w-100 btn btn-primary align-self-center shadow-none ms-1",style:{height:"9vh"},"data-title":`unlocks additional passive slots
`+(t.player.shop.passivSlots.lvl<t.findHouse(t.player,"shop")?`costs: ${t.upgradeCosts("passivSlots")}`:"max lvl")},[k(w(t.shopDetails.passivSlots.name)+" ",1),LF,k(" "+w(t.player.shop.passivSlots.lvl)+"/"+w(t.findHouse(t.player,"shop")),1)],8,RF)]),h("div",xF,[h("button",{onClick:e[1]||(e[1]=o=>t.buyBuildingLicenses()),class:"w-100 btn btn-primary align-self-center shadow-none ms-1",style:{height:"9vh"},"data-title":`buy a Building License
costs: ${t.licenseCost} scrap`},[k(" building "),FF,k(" license ")],8,VF),h("button",{onClick:e[2]||(e[2]=o=>t.buyModel()),class:"w-100 btn btn-primary align-self-center shadow-none ms-1 mt-1",style:{height:"9vh"},"data-title":`buy a random spaceship
costs: ${t.modelCost} scrap`,"data-bs-toggle":t.player.shop.currency>=t.modelCost?"modal":null,"data-bs-target":"#modelModal"},[k(" random "),BF,k(" spaceship ")],8,UF),h("button",{onClick:e[3]||(e[3]=o=>t.buyTasks()),class:"w-100 btn btn-primary align-self-center shadow-none ms-1 mt-1",style:{height:"9vh"},"data-title":`buy a new tasks
costs: ${t.tasksCost} scrap`},[k(" new "),HF,k(" tasks ")],8,jF)])])])):V("",!0),h("div",zF,[h("div",qF,[h("div",WF,[KF,h("div",GF,w(t.receiveMessage),1),h("div",QF,[h("button",{type:"button",class:"btn btn-secondary shadow-none","data-bs-dismiss":"modal",onClick:e[4]||(e[4]=o=>{t.receiveMessage="",t.buttonSound()})}," Close ")])])])])],64)}const XF=He(EF,[["render",YF],["__scopeId","data-v-d0c5b42c"]]),JF=Oe({components:{Button:Ta,Tooltip:Rf},setup(){return{houseDetails:ar}},computed:{usedLicenses(){let t=0;for(let e of this.player.spaceport.houses)t+=e.lvl-ar[e.name].startlvl,e.needScore>0&&t++;return t}},props:{playerProp:{type:Object,required:!0}},data(){return{player:{},user:At,dataLoad:!1}},async mounted(){this.player=this.playerProp,this.dataLoad=!0},methods:{upgradeHouse(t){t.needScore==0&&this.player.spaceport.buildingLicenses-this.usedLicenses>0&&(t.needScore=(t.lvl+1)*ar[t.name].upgradeCost)},buttonSound(){ot(this.player.settings.effectVolume)}}}),ZF={key:0,style:{"margin-top":"6vh",color:"white"}},eU={"data-title":`you can buy a building
license in the shop`,class:"w-25 d-inline"},tU={class:"row g-0 mt-2"},sU=h("div",{class:"col-5"},null,-1),nU={class:"d-flex flex-column col-2 mx-1"},iU=h("br",null,null,-1);function rU(t,e,s,n,i,r){const o=Fe("Button"),a=Fe("Tooltip");return t.dataLoad?(g(),y("div",ZF,[h("div",eU,w(`Building Licenses: ${t.player.spaceport.buildingLicenses-t.usedLicenses} `),1),h("div",tU,[sU,h("div",nU,[(g(!0),y(te,null,ve(t.player.spaceport.houses,l=>(g(),y("div",{key:l.name},[j(a,{tooltip:(l.needScore==0?t.houseDetails[l.name].description:"in construction")+`
`+(l.lvl<t.houseDetails[l.name].maxlvl?l.needScore==0?"costs: 1":`you must earn ${l.needScore} score`:"max lvl")},{default:Pe(()=>[j(o,{class:We(["mt-2 w-100 btn align-self-center shadow-none",[l.needScore==0?"btn-primary":"btn-secondary"]]),onClick:u=>t.upgradeHouse(l)},{default:Pe(()=>[k(w(t.houseDetails[l.name].name)+" ",1),iU,k(" lvl: "+w(l.lvl)+"/"+w(t.houseDetails[l.name].maxlvl),1)]),_:2},1032,["class","onClick"])]),_:2},1032,["tooltip"])]))),128))])])])):V("",!0)}const oU=He(JF,[["render",rU]]),aU=Oe({setup(){return{findHouse:Ot,passivDetails:Gs,weaponDetails:De,modelDetails:ds,passivAmount:Xc,weaponStats:dl,hangarSize:$0,peculiarityDetails:Gl}},data(){return{player:{},user:At,choosenWeapon:"",selectedSellModel:{},choosenPassivs:[],dataLoad:!1}},props:{playerProp:{type:Object,required:!0}},computed:{},mounted(){this.player=this.playerProp,this.dataLoad=!0},methods:{sellModel(){this.buttonSound(),this.player=V0(this.player,this.selectedSellModel)},selectPassiv(t){this.buttonSound(),this.player.passivTree.passivType=this.player.passivTree.passivType.filter(e=>e!="none"),this.player.passivTree.passivType.includes(t)?this.player.passivTree.passivType=this.player.passivTree.passivType.filter(e=>e!=t):this.player.passivTree.passivType.length<this.player.shop.passivSlots.lvl&&this.player.passivTree.passivType.push(t)},clearSelect(t){this.player.passivTree.passivType=[],this.player.passivTree.passivType.push(t)},buttonSound(){ot(this.player.settings.effectVolume)}}}),lU={key:0,style:{"margin-top":"6vh",color:"white"}},cU={class:"d-flex justify-content-center"},uU={class:"btn-group rounded mt-2",role:"group","aria-label":"Basic radio toggle button group"},hU=["id","checked"],dU=["data-title","for","onClick"],fU=h("br",null,null,-1),pU=h("br",null,null,-1),mU=h("br",null,null,-1),gU=h("br",null,null,-1),yU={class:"mt-2"},vU={class:"w-25 d-inline","data-title":`you get a passiv when
 you kill the hardcore boss`},_U={class:"d-flex justify-content-center"},bU=["onClick","onDblclick","data-title"],wU={style:{color:"white"},class:"mt-2"},EU={key:0},TU=h("div",{"data-title":"you get peculiarities when you defeat the total chaos boss",class:"w-25 d-inline"},"you have no peculiarities",-1),kU=[TU],AU={key:1,class:"btn-group rounded mt-2",role:"group","aria-label":"Basic radio toggle button group"},SU=["id","checked"],IU=["data-title","for","onClick"],CU={class:"mt-2"},DU={class:"w-25 d-inline","data-title":"you can get a spaceship after each round"},$U={class:"d-flex justify-content-center"},OU=["id","checked"],NU=["for","onClick"],PU={class:"mt-1"},MU=["src"],RU=h("br",null,null,-1),LU=h("br",null,null,-1),xU=h("br",null,null,-1),VU=h("br",null,null,-1),FU=h("br",null,null,-1),UU=["disabled","onClick"],BU=h("div",{class:"mt-2"},"auto sell",-1),jU={class:"d-flex justify-content-center"},HU=["checked"],zU=["id","checked"],qU=["for","onClick"],WU={class:"modal fade",id:"sellConfirm",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",style:{"margin-top":"11vh"}},KU={class:"modal-content"},GU={class:"modal-body",style:{"background-color":"grey"}},QU=h("div",null,"do you really want to sell this spaceship",-1),YU={class:"row justify-content-end mt-1"};function XU(t,e,s,n,i,r){return g(),y(te,null,[t.dataLoad?(g(),y("div",lU,[h("div",cU,[h("div",uU,[(g(!0),y(te,null,ve(t.player.weaponTree.weaponAvaibleTypes,o=>(g(),y("div",{key:o,class:"mx-1"},[h("input",{type:"radio",class:"btn-check",name:"weaponRadio",id:`btn${o}`,autocomplete:"off",checked:t.player.weaponTree.weaponType==o},null,8,hU),h("label",{class:"btn btn-outline-primary w-100 shadow-none",style:{height:"12vh"},"data-title":t.weaponDetails[o].description,for:`btn${o}`,onClick:a=>{t.player.weaponTree.weaponType=o,t.buttonSound()}},[k(w(o)+" ",1),fU,k(" dmg:"+w(t.weaponStats[o].dmg)+" ",1),pU,k(" reload:"+w(t.weaponStats[o].reload)+"s ",1),mU,k(" size:"+w(t.weaponStats[o].size)+" ",1),gU,k(" plasmas:"+w(t.weaponStats[o].spheres),1)],8,dU)]))),128))])]),h("div",yU,[h("div",vU,w(t.player.passivTree.passivType.length)+"/"+w(t.player.shop.passivSlots.lvl),1)]),h("div",_U,[(g(!0),y(te,null,ve(t.player.passivTree.passivAvaibleTypes,o=>(g(),y("div",{key:o,class:"mx-1"},[t.player.passivTree.passivAvaibleTypes.length<=1||o!="none"?(g(),y("button",{key:0,onClick:a=>t.selectPassiv(o),onDblclick:a=>t.clearSelect(o),style:{height:"12vh"},class:We(["btn shadow-none",t.player.passivTree.passivType.includes(o)?"btn-primary":"btn-outline-primary"]),"data-title":t.passivDetails[o].description},w(t.passivDetails[o].name),43,bU)):V("",!0)]))),128))]),h("div",wU,[t.player.peculiarities.available==0?(g(),y("div",EU,kU)):(g(),y("div",AU,[(g(!0),y(te,null,ve(t.player.peculiarities.available,o=>(g(),y("div",{key:o,class:"mx-1"},[h("input",{type:"radio",class:"btn-check",name:"peculiarityRadio",id:`btn${o}`,autocomplete:"off",checked:t.player.peculiarities.selected==o},null,8,SU),h("label",{class:"btn btn-outline-primary w-100 shadow-none","data-title":t.peculiarityDetails[o].description,for:`btn${o}`,onClick:a=>{t.player.peculiarities.selected=o,t.buttonSound()}},w(t.peculiarityDetails[o].name),9,IU)]))),128))]))]),h("div",CU,[h("div",DU,w(t.player.ship.models.length)+"/"+w(t.hangarSize),1)]),h("div",$U,[(g(!0),y(te,null,ve(t.player.ship.models,o=>(g(),y("div",{key:o.id,class:"mx-1"},[h("input",{type:"radio",class:"btn-check",name:"modelRadio",id:`model${o.id}`,autocomplete:"off",checked:t.player.ship.selectedModel.id==o.id},null,8,OU),h("label",{class:"btn btn-outline-primary w-100 shadow-none rounded-0 rounded-top",style:{height:"25vh"},for:`model${o.id}`,onClick:a=>{t.player.ship.selectedModel=o,t.buttonSound()}},[h("div",{style:Ae({color:t.modelDetails[o.rarity].color})},w(o.rarity),5),h("div",PU,[h("img",{src:`/img/char/playership${o.img}.png`,alt:"",style:{height:"6vh",width:"6vh"}},null,8,MU)]),RU,k(" HP:"+w(t.modelDetails[o.rarity].hp)+" ",1),LU,k(" size:"+w(t.modelDetails[o.rarity].size)+" ",1),xU,k(" speed:"+w(t.modelDetails[o.rarity].speed)+" ",1),VU,k(" store:"+w(t.modelDetails[o.rarity].store)+" ",1),FU,k(" score:"+w(t.modelDetails[o.rarity].scoreMultiplier),1)],8,NU),h("button",{class:"btn btn-danger w-100 rounded-0 rounded-bottom shadow-none",disabled:t.player.ship.selectedModel.id==o.id,"data-bs-toggle":"modal","data-bs-target":"#sellConfirm",onClick:a=>{t.selectedSellModel=o,t.buttonSound()}}," sell ",8,UU)]))),128))]),BU,h("div",jU,[h("div",null,[h("input",{type:"radio",class:"btn-check",name:"rarityRadio",id:"btnFalse",autocomplete:"off",checked:t.player.ship.autoSell==!1},null,8,HU),h("label",{class:"btn btn-outline-primary w-100 shadow-none",for:"btnFalse",onClick:e[0]||(e[0]=o=>{t.player.ship.autoSell=!1,t.buttonSound()})}," off ")]),(g(),y(te,null,ve(["common","uncommon","rare","epic","legendary"],o=>h("div",{key:o,class:"mx-1"},[h("input",{type:"radio",class:"btn-check",name:"rarityRadio",id:`btn${o}`,autocomplete:"off",checked:t.player.ship.autoSell==o},null,8,zU),h("label",{class:"btn btn-outline-primary w-100 shadow-none",for:`btn${o}`,onClick:a=>{t.player.ship.autoSell=o,t.buttonSound()}},w(o)+" or lower ",9,qU)])),64))])])):V("",!0),h("div",WU,[h("div",{class:"modal-dialog",onClick:e[3]||(e[3]=ns(()=>{},["stop"]))},[h("div",KU,[h("div",GU,[QU,h("div",YU,[h("button",{"data-bs-dismiss":"modal",class:"btn btn-danger mx-2 col-3",onClick:e[1]||(e[1]=o=>t.buttonSound())},"No"),h("button",{class:"btn btn-primary col-3","data-bs-dismiss":"modal",onClick:e[2]||(e[2]=o=>t.sellModel())},"Yes")])])])])])],64)}const JU=He(aU,[["render",XU]]),ZU=Oe({setup(){return{lvlSkillsDetails:O0,lvlWeaponUpgradeDetails:N0,lvlPassivDetails:P0,lvlShopDetails:M0,findlvlSkill:lo,findlvlWeaponUpgrade:Gi,findlvlPassiv:Qi,findlvlShop:Yi}},data(){return{player:{},user:At,dataLoad:!1,pressedKeys:{}}},props:{playerProp:{type:Object,required:!0}},computed:{usedLvl(){let t=0;for(let e of this.player.lvlTree.lvlSkills)t+=e.lvl;for(let e of this.player.lvlTree.lvlWeaponUpgrade)t+=e.lvl;for(let e of this.player.lvlTree.lvlPassiv)t+=e.lvl;for(let e of this.player.lvlTree.lvlShop)t+=e.lvl;return t}},mounted(){this.player=this.playerProp,this.dataLoad=!0},methods:{lvlUpgrade(t){this.usedLvl>=this.player.lvlTree.lvl-1||t.lvl++},buttonSound(){ot(this.player.settings.effectVolume)}}}),eB={key:0,style:{"margin-top":"6vh",color:"white"}},tB={"data-title":"you can lvl up by make the daily tasks",class:"w-25 d-inline"},sB=h("br",null,null,-1),nB={class:"row g-0 mt-2"},iB=h("div",{class:"col-2"},null,-1),rB={class:"d-flex flex-column col-2 mx-1"},oB=["onClick","disabled","data-title"],aB=h("br",null,null,-1),lB={class:"d-flex flex-column col-2 mx-1"},cB=["onClick","disabled","data-title"],uB=h("br",null,null,-1),hB={class:"d-flex flex-column col-2 mx-1"},dB=["onClick","data-title"],fB=h("br",null,null,-1),pB={class:"d-flex flex-column col-2 mx-1"},mB=["onClick","disabled","data-title"],gB=h("br",null,null,-1);function yB(t,e,s,n,i,r){return t.dataLoad?(g(),y("div",eB,[h("div",null,[h("div",tB,[k(" lvl:"+w(t.player.lvlTree.lvl)+" ",1),sB,k(" used:"+w(t.usedLvl)+"/"+w(t.player.lvlTree.lvl-1),1)])]),h("div",nB,[iB,h("div",rB,[(g(!0),y(te,null,ve(t.player.lvlTree.lvlSkills,o=>(g(),y("div",{key:o.name},[h("button",{onClick:a=>t.lvlUpgrade(o),disabled:o.name=="tier2"&&t.findlvlSkill(t.player,"tier1")<5||o.name=="tier3"&&t.findlvlSkill(t.player,"tier2")<5,class:"mt-2 w-100 btn btn-primary align-self-center shadow-none","data-title":t.lvlSkillsDetails[o.name].description+`
`+(o.lvl<t.lvlSkillsDetails[o.name].maxlvl?"costs: 1":"max lvl")},[k(w(t.lvlSkillsDetails[o.name].name)+" ",1),aB,k(" lvl: "+w(o.lvl)+"/"+w(t.lvlSkillsDetails[o.name].maxlvl),1)],8,oB)]))),128))]),h("div",lB,[(g(!0),y(te,null,ve(t.player.lvlTree.lvlWeaponUpgrade,o=>(g(),y("div",{key:o.name},[h("button",{onClick:a=>t.lvlUpgrade(o),disabled:o.name=="tier2"&&t.findlvlWeaponUpgrade(t.player,"tier1")<5,class:"mt-2 w-100 btn btn-primary align-self-center shadow-none","data-title":t.lvlWeaponUpgradeDetails[o.name].description+`
`+(o.lvl<t.lvlWeaponUpgradeDetails[o.name].maxlvl?"costs: 1":"max lvl")},[k(w(t.lvlWeaponUpgradeDetails[o.name].name)+" ",1),uB,k(" lvl: "+w(o.lvl)+"/"+w(t.lvlWeaponUpgradeDetails[o.name].maxlvl),1)],8,cB)]))),128))]),h("div",hB,[(g(!0),y(te,null,ve(t.player.lvlTree.lvlPassiv,o=>(g(),y("div",{key:o.name},[h("button",{onClick:a=>t.lvlUpgrade(o),class:"mt-2 w-100 btn btn-primary align-self-center shadow-none","data-title":t.lvlPassivDetails[o.name].description+`
`+(o.lvl<t.lvlPassivDetails[o.name].maxlvl?"costs: 1":"max lvl")},[k(w(t.lvlPassivDetails[o.name].name)+" ",1),fB,k(" lvl: "+w(o.lvl)+"/"+w(t.lvlPassivDetails[o.name].maxlvl),1)],8,dB)]))),128))]),h("div",pB,[(g(!0),y(te,null,ve(t.player.lvlTree.lvlShop,o=>(g(),y("div",{key:o.name},[h("button",{onClick:a=>t.lvlUpgrade(o),disabled:o.name=="tier2"&&t.findlvlShop(t.player,"tier1")<5,class:"mt-2 w-100 btn btn-primary align-self-center shadow-none","data-title":t.lvlShopDetails[o.name].description+`
`+(o.lvl<t.lvlShopDetails[o.name].maxlvl?"costs: 1":"max lvl")},[k(w(t.lvlShopDetails[o.name].name)+" ",1),gB,k(" lvl: "+w(o.lvl)+"/"+w(t.lvlShopDetails[o.name].maxlvl),1)],8,mB)]))),128))])])])):V("",!0)}const vB=He(ZU,[["render",yB]]),_B=Oe({setup(){},components:{SkillCard:GV,WeaponCard:cF,PassivCard:wF,ShopCard:XF,BuildingCard:oU,HangarCard:JU,LvlCard:vB},data(){return{player:{},timer:0,user:At,dataLoad:!1,choosenTree:"skillTree",pressedKeys:{}}},async beforeUnmount(){try{await Ks(this.player)}catch{at()}},async mounted(){if(window.onkeyup=t=>{this.pressedKeys[t.key]=!1},window.onkeydown=t=>{this.pressedKeys[t.key]=!0},this.user)try{let t=await Ea();t&&(this.player=t.player)}catch{at()}this.player=Ei(this.player,this.user),kr(this.player.settings.musicVolume),this.buttonSound(),this.dataLoad=!0},methods:{buttonSound(){ot(this.player.settings.effectVolume)}}}),bB={key:0,style:{"margin-top":"4vh"}},wB={class:"btn-group rounded w-50 mt-2",role:"group","aria-label":"Basic radio toggle button group"},EB=["checked"],TB=["checked"],kB=["checked"],AB=["checked"],SB=["checked"],IB=["checked"],CB=["checked"],DB={id:"carouselUpgrades",class:"carousel slide","data-bs-ride":"carousel","data-bs-interval":"false"},$B={class:"carousel-inner"},OB={class:"carousel-item"},NB={class:"carousel-item active"},PB={class:"carousel-item"},MB={class:"carousel-item"},RB={class:"carousel-item"},LB={class:"carousel-item"},xB={class:"carousel-item"};function VB(t,e,s,n,i,r){const o=Fe("BuildingCard"),a=Fe("SkillCard"),l=Fe("WeaponCard"),u=Fe("PassivCard"),c=Fe("LvlCard"),d=Fe("ShopCard"),f=Fe("HangarCard");return t.dataLoad?(g(),y("div",bB,[h("div",wB,[h("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnBuilding",autocomplete:"off",checked:t.choosenTree=="building","data-bs-target":"#carouselUpgrades","data-bs-slide-to":"0"},null,8,EB),h("label",{class:"btn btn-outline-primary w-25 shadow-none",for:"btnBuilding",onClick:e[0]||(e[0]=p=>{t.choosenTree="building",t.buttonSound()})}," building space "),h("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnSkillTree",autocomplete:"off",checked:t.choosenTree=="skillTree","data-bs-target":"#carouselUpgrades","data-bs-slide-to":"1"},null,8,TB),h("label",{class:"btn btn-outline-primary w-25 shadow-none",for:"btnSkillTree",onClick:e[1]||(e[1]=p=>{t.choosenTree="skillTree",t.buttonSound()})}," research lab "),h("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnWeapon",autocomplete:"off",checked:t.choosenTree=="weapon","data-bs-target":"#carouselUpgrades","data-bs-slide-to":"2"},null,8,kB),h("label",{class:"btn btn-outline-primary w-25 shadow-none",for:"btnWeapon",onClick:e[2]||(e[2]=p=>{t.choosenTree="weapon",t.buttonSound()})}," weapons lab "),h("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnPassiv",autocomplete:"off",checked:t.choosenTree=="passiv","data-bs-target":"#carouselUpgrades","data-bs-slide-to":"3"},null,8,AB),h("label",{class:"btn btn-outline-primary w-25 shadow-none",for:"btnPassiv",onClick:e[3]||(e[3]=p=>{t.choosenTree="passiv",t.buttonSound()})}," atom lab "),h("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnlvlTree",autocomplete:"off",checked:t.choosenTree=="lvlTree","data-bs-target":"#carouselUpgrades","data-bs-slide-to":"4"},null,8,SB),h("label",{class:"btn btn-outline-primary w-25 shadow-none",for:"btnlvlTree",onClick:e[4]||(e[4]=p=>{t.choosenTree="lvlTree",t.buttonSound()})}," lvl Tree "),h("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnShop",autocomplete:"off",checked:t.choosenTree=="shop","data-bs-target":"#carouselUpgrades","data-bs-slide-to":"5"},null,8,IB),h("label",{class:"btn btn-outline-primary w-25 shadow-none",for:"btnShop",onClick:e[5]||(e[5]=p=>{t.choosenTree="shop",t.buttonSound()})}," shop "),h("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnHangar",autocomplete:"off",checked:t.choosenTree=="hangar","data-bs-target":"#carouselUpgrades","data-bs-slide-to":"6"},null,8,CB),h("label",{class:"btn btn-outline-primary w-25 shadow-none",for:"btnHangar",onClick:e[6]||(e[6]=p=>{t.choosenTree="hangar",t.buttonSound()})}," hangar ")]),h("div",DB,[h("div",$B,[h("div",OB,[j(o,{playerProp:t.player,style:{"min-height":"70vh"}},null,8,["playerProp"])]),h("div",NB,[j(a,{playerProp:t.player,pressedKeys:t.pressedKeys,style:{"min-height":"70vh"}},null,8,["playerProp","pressedKeys"])]),h("div",PB,[j(l,{playerProp:t.player,pressedKeys:t.pressedKeys,style:{"min-height":"70vh"}},null,8,["playerProp","pressedKeys"])]),h("div",MB,[j(u,{playerProp:t.player,pressedKeys:t.pressedKeys,style:{"min-height":"70vh"}},null,8,["playerProp","pressedKeys"])]),h("div",RB,[j(c,{playerProp:t.player,style:{"min-height":"70vh"}},null,8,["playerProp"])]),h("div",LB,[j(d,{playerProp:t.player,style:{"min-height":"70vh"}},null,8,["playerProp"])]),h("div",xB,[j(f,{playerProp:t.player,style:{"min-height":"70vh"}},null,8,["playerProp"])])])])])):V("",!0)}const FB=He(_B,[["render",VB]]),UB=[{path:"/",name:"Landing",component:cx},{path:"/home",name:"Home",component:BM,meta:{requiresAuth:!0}},{path:"/guide",name:"Guide",component:()=>fT(()=>import("./Guide-9072a699.js"),[],import.meta.url)},{path:"/games",name:"Games",component:$L},{path:"/fleet",name:"Fleet",component:DV,meta:{requiresAuth:!0}},{path:"/scoreboard",name:"Scoreboard",component:T2,meta:{requiresAuth:!0}},{path:"/register",name:"Register",component:U2},{path:"/spaceport",name:"Spaceport",meta:{requiresAuth:!0},component:FB}],pi=gk({history:NT(),routes:UB}),At=qe(null),BB=()=>{const t=xr();return new Promise((e,s)=>{const n=RS(t,i=>{At.value=i,n(),e(i)},s)})};pi.beforeEach(async(t,e,s)=>{const n=t.matched.some(i=>i.meta.requiresAuth);!await BB()&&n?s("/"):s()});const jB=Oe({setup(){return{user:At}},methods:{logout(){at()}}});const B0=t=>(cn("data-v-ef092865"),t=t(),un(),t),HB={id:"nav"},zB=B0(()=>h("a",null,"|",-1)),qB={key:3},WB={key:5},KB=B0(()=>h("a",null,"|",-1)),GB={key:7},QB={key:8};function YB(t,e,s,n,i,r){const o=Fe("router-link");return g(),y("div",HB,[t.user?V("",!0):(g(),wn(o,{key:0,to:"/","keydown.enter.prevent":""},{default:Pe(()=>[k("Login")]),_:1})),t.user?(g(),wn(o,{key:1,to:"/home","keydown.enter.prevent":""},{default:Pe(()=>[k("Player Card")]),_:1})):V("",!0),zB,t.user?(g(),wn(o,{key:2,to:"/spaceport","keydown.enter.prevent":""},{default:Pe(()=>[k("Space Port")]),_:1})):V("",!0),t.user?(g(),y("a",qB,"|")):V("",!0),t.user?(g(),wn(o,{key:4,to:"/fleet","keydown.enter.prevent":""},{default:Pe(()=>[k("Space Fleet")]),_:1})):V("",!0),t.user?(g(),y("a",WB,"|")):V("",!0),j(o,{to:"/games","keydown.enter.prevent":""},{default:Pe(()=>[k("Game")]),_:1}),KB,t.user?(g(),wn(o,{key:6,to:"/scoreboard","keydown.enter.prevent":""},{default:Pe(()=>[k("Scoreboard")]),_:1})):V("",!0),t.user?(g(),y("a",GB,"|")):V("",!0),j(o,{to:"/guide","keydown.enter.prevent":""},{default:Pe(()=>[k("Guide")]),_:1}),t.user?(g(),y("a",QB,"|")):V("",!0),t.user?(g(),y("a",{key:9,class:"pointer",onClick:e[0]||(e[0]=a=>t.logout()),"keydown.enter.prevent":""},"LogOut")):V("",!0)])}const XB=He(jB,[["render",YB],["__scopeId","data-v-ef092865"]]),JB=Oe({components:{navbar:XB},methods:{startMusic(){TN()}}});function ZB(t,e,s,n,i,r){const o=Fe("navbar"),a=Fe("router-view");return g(),y("div",Rs({class:"site"},t.startMusic()),[j(o),j(a)],16)}const e3=He(JB,[["render",ZB]]);var Ut="top",es="bottom",ts="right",Bt="left",su="auto",qr=[Ut,es,ts,Bt],Ai="start",Sr="end",j0="clippingParents",Vf="viewport",Hi="popper",H0="reference",Gh=qr.reduce(function(t,e){return t.concat([e+"-"+Ai,e+"-"+Sr])},[]),Ff=[].concat(qr,[su]).reduce(function(t,e){return t.concat([e,e+"-"+Ai,e+"-"+Sr])},[]),z0="beforeRead",q0="read",W0="afterRead",K0="beforeMain",G0="main",Q0="afterMain",Y0="beforeWrite",X0="write",J0="afterWrite",Z0=[z0,q0,W0,K0,G0,Q0,Y0,X0,J0];function Vs(t){return t?(t.nodeName||"").toLowerCase():null}function cs(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Si(t){var e=cs(t).Element;return t instanceof e||t instanceof Element}function os(t){var e=cs(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Uf(t){if(typeof ShadowRoot>"u")return!1;var e=cs(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function t3(t){var e=t.state;Object.keys(e.elements).forEach(function(s){var n=e.styles[s]||{},i=e.attributes[s]||{},r=e.elements[s];!os(r)||!Vs(r)||(Object.assign(r.style,n),Object.keys(i).forEach(function(o){var a=i[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function s3(t){var e=t.state,s={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,s.popper),e.styles=s,e.elements.arrow&&Object.assign(e.elements.arrow.style,s.arrow),function(){Object.keys(e.elements).forEach(function(n){var i=e.elements[n],r=e.attributes[n]||{},o=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:s[n]),a=o.reduce(function(l,u){return l[u]="",l},{});!os(i)||!Vs(i)||(Object.assign(i.style,a),Object.keys(r).forEach(function(l){i.removeAttribute(l)}))})}}const Bf={name:"applyStyles",enabled:!0,phase:"write",fn:t3,effect:s3,requires:["computeStyles"]};function Ns(t){return t.split("-")[0]}var mi=Math.max,Yl=Math.min,Ir=Math.round;function Qh(){var t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function ew(){return!/^((?!chrome|android).)*safari/i.test(Qh())}function Cr(t,e,s){e===void 0&&(e=!1),s===void 0&&(s=!1);var n=t.getBoundingClientRect(),i=1,r=1;e&&os(t)&&(i=t.offsetWidth>0&&Ir(n.width)/t.offsetWidth||1,r=t.offsetHeight>0&&Ir(n.height)/t.offsetHeight||1);var o=Si(t)?cs(t):window,a=o.visualViewport,l=!ew()&&s,u=(n.left+(l&&a?a.offsetLeft:0))/i,c=(n.top+(l&&a?a.offsetTop:0))/r,d=n.width/i,f=n.height/r;return{width:d,height:f,top:c,right:u+d,bottom:c+f,left:u,x:u,y:c}}function jf(t){var e=Cr(t),s=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-s)<=1&&(s=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:s,height:n}}function tw(t,e){var s=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(s&&Uf(s)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function ln(t){return cs(t).getComputedStyle(t)}function n3(t){return["table","td","th"].indexOf(Vs(t))>=0}function qn(t){return((Si(t)?t.ownerDocument:t.document)||window.document).documentElement}function nu(t){return Vs(t)==="html"?t:t.assignedSlot||t.parentNode||(Uf(t)?t.host:null)||qn(t)}function Ag(t){return!os(t)||ln(t).position==="fixed"?null:t.offsetParent}function i3(t){var e=/firefox/i.test(Qh()),s=/Trident/i.test(Qh());if(s&&os(t)){var n=ln(t);if(n.position==="fixed")return null}var i=nu(t);for(Uf(i)&&(i=i.host);os(i)&&["html","body"].indexOf(Vs(i))<0;){var r=ln(i);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||e&&r.willChange==="filter"||e&&r.filter&&r.filter!=="none")return i;i=i.parentNode}return null}function Sa(t){for(var e=cs(t),s=Ag(t);s&&n3(s)&&ln(s).position==="static";)s=Ag(s);return s&&(Vs(s)==="html"||Vs(s)==="body"&&ln(s).position==="static")?e:s||i3(t)||e}function Hf(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function wo(t,e,s){return mi(t,Yl(e,s))}function r3(t,e,s){var n=wo(t,e,s);return n>s?s:n}function sw(){return{top:0,right:0,bottom:0,left:0}}function nw(t){return Object.assign({},sw(),t)}function iw(t,e){return e.reduce(function(s,n){return s[n]=t,s},{})}var o3=function(e,s){return e=typeof e=="function"?e(Object.assign({},s.rects,{placement:s.placement})):e,nw(typeof e!="number"?e:iw(e,qr))};function a3(t){var e,s=t.state,n=t.name,i=t.options,r=s.elements.arrow,o=s.modifiersData.popperOffsets,a=Ns(s.placement),l=Hf(a),u=[Bt,ts].indexOf(a)>=0,c=u?"height":"width";if(!(!r||!o)){var d=o3(i.padding,s),f=jf(r),p=l==="y"?Ut:Bt,b=l==="y"?es:ts,_=s.rects.reference[c]+s.rects.reference[l]-o[l]-s.rects.popper[c],A=o[l]-s.rects.reference[l],C=Sa(r),P=C?l==="y"?C.clientHeight||0:C.clientWidth||0:0,M=_/2-A/2,R=d[p],z=P-f[c]-d[b],W=P/2-f[c]/2+M,ce=wo(R,W,z),q=l;s.modifiersData[n]=(e={},e[q]=ce,e.centerOffset=ce-W,e)}}function l3(t){var e=t.state,s=t.options,n=s.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||tw(e.elements.popper,i)&&(e.elements.arrow=i))}const rw={name:"arrow",enabled:!0,phase:"main",fn:a3,effect:l3,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Dr(t){return t.split("-")[1]}var c3={top:"auto",right:"auto",bottom:"auto",left:"auto"};function u3(t){var e=t.x,s=t.y,n=window,i=n.devicePixelRatio||1;return{x:Ir(e*i)/i||0,y:Ir(s*i)/i||0}}function Sg(t){var e,s=t.popper,n=t.popperRect,i=t.placement,r=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,u=t.adaptive,c=t.roundOffsets,d=t.isFixed,f=o.x,p=f===void 0?0:f,b=o.y,_=b===void 0?0:b,A=typeof c=="function"?c({x:p,y:_}):{x:p,y:_};p=A.x,_=A.y;var C=o.hasOwnProperty("x"),P=o.hasOwnProperty("y"),M=Bt,R=Ut,z=window;if(u){var W=Sa(s),ce="clientHeight",q="clientWidth";if(W===cs(s)&&(W=qn(s),ln(W).position!=="static"&&a==="absolute"&&(ce="scrollHeight",q="scrollWidth")),W=W,i===Ut||(i===Bt||i===ts)&&r===Sr){R=es;var Z=d&&W===z&&z.visualViewport?z.visualViewport.height:W[ce];_-=Z-n.height,_*=l?1:-1}if(i===Bt||(i===Ut||i===es)&&r===Sr){M=ts;var de=d&&W===z&&z.visualViewport?z.visualViewport.width:W[q];p-=de-n.width,p*=l?1:-1}}var Ie=Object.assign({position:a},u&&c3),Me=c===!0?u3({x:p,y:_}):{x:p,y:_};if(p=Me.x,_=Me.y,l){var ze;return Object.assign({},Ie,(ze={},ze[R]=P?"0":"",ze[M]=C?"0":"",ze.transform=(z.devicePixelRatio||1)<=1?"translate("+p+"px, "+_+"px)":"translate3d("+p+"px, "+_+"px, 0)",ze))}return Object.assign({},Ie,(e={},e[R]=P?_+"px":"",e[M]=C?p+"px":"",e.transform="",e))}function h3(t){var e=t.state,s=t.options,n=s.gpuAcceleration,i=n===void 0?!0:n,r=s.adaptive,o=r===void 0?!0:r,a=s.roundOffsets,l=a===void 0?!0:a,u={placement:Ns(e.placement),variation:Dr(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Sg(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Sg(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const zf={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:h3,data:{}};var Wa={passive:!0};function d3(t){var e=t.state,s=t.instance,n=t.options,i=n.scroll,r=i===void 0?!0:i,o=n.resize,a=o===void 0?!0:o,l=cs(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&u.forEach(function(c){c.addEventListener("scroll",s.update,Wa)}),a&&l.addEventListener("resize",s.update,Wa),function(){r&&u.forEach(function(c){c.removeEventListener("scroll",s.update,Wa)}),a&&l.removeEventListener("resize",s.update,Wa)}}const qf={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:d3,data:{}};var f3={left:"right",right:"left",bottom:"top",top:"bottom"};function ml(t){return t.replace(/left|right|bottom|top/g,function(e){return f3[e]})}var p3={start:"end",end:"start"};function Ig(t){return t.replace(/start|end/g,function(e){return p3[e]})}function Wf(t){var e=cs(t),s=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:s,scrollTop:n}}function Kf(t){return Cr(qn(t)).left+Wf(t).scrollLeft}function m3(t,e){var s=cs(t),n=qn(t),i=s.visualViewport,r=n.clientWidth,o=n.clientHeight,a=0,l=0;if(i){r=i.width,o=i.height;var u=ew();(u||!u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:r,height:o,x:a+Kf(t),y:l}}function g3(t){var e,s=qn(t),n=Wf(t),i=(e=t.ownerDocument)==null?void 0:e.body,r=mi(s.scrollWidth,s.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=mi(s.scrollHeight,s.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-n.scrollLeft+Kf(t),l=-n.scrollTop;return ln(i||s).direction==="rtl"&&(a+=mi(s.clientWidth,i?i.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}function Gf(t){var e=ln(t),s=e.overflow,n=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(s+i+n)}function ow(t){return["html","body","#document"].indexOf(Vs(t))>=0?t.ownerDocument.body:os(t)&&Gf(t)?t:ow(nu(t))}function Eo(t,e){var s;e===void 0&&(e=[]);var n=ow(t),i=n===((s=t.ownerDocument)==null?void 0:s.body),r=cs(n),o=i?[r].concat(r.visualViewport||[],Gf(n)?n:[]):n,a=e.concat(o);return i?a:a.concat(Eo(nu(o)))}function Yh(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function y3(t,e){var s=Cr(t,!1,e==="fixed");return s.top=s.top+t.clientTop,s.left=s.left+t.clientLeft,s.bottom=s.top+t.clientHeight,s.right=s.left+t.clientWidth,s.width=t.clientWidth,s.height=t.clientHeight,s.x=s.left,s.y=s.top,s}function Cg(t,e,s){return e===Vf?Yh(m3(t,s)):Si(e)?y3(e,s):Yh(g3(qn(t)))}function v3(t){var e=Eo(nu(t)),s=["absolute","fixed"].indexOf(ln(t).position)>=0,n=s&&os(t)?Sa(t):t;return Si(n)?e.filter(function(i){return Si(i)&&tw(i,n)&&Vs(i)!=="body"}):[]}function _3(t,e,s,n){var i=e==="clippingParents"?v3(t):[].concat(e),r=[].concat(i,[s]),o=r[0],a=r.reduce(function(l,u){var c=Cg(t,u,n);return l.top=mi(c.top,l.top),l.right=Yl(c.right,l.right),l.bottom=Yl(c.bottom,l.bottom),l.left=mi(c.left,l.left),l},Cg(t,o,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function aw(t){var e=t.reference,s=t.element,n=t.placement,i=n?Ns(n):null,r=n?Dr(n):null,o=e.x+e.width/2-s.width/2,a=e.y+e.height/2-s.height/2,l;switch(i){case Ut:l={x:o,y:e.y-s.height};break;case es:l={x:o,y:e.y+e.height};break;case ts:l={x:e.x+e.width,y:a};break;case Bt:l={x:e.x-s.width,y:a};break;default:l={x:e.x,y:e.y}}var u=i?Hf(i):null;if(u!=null){var c=u==="y"?"height":"width";switch(r){case Ai:l[u]=l[u]-(e[c]/2-s[c]/2);break;case Sr:l[u]=l[u]+(e[c]/2-s[c]/2);break}}return l}function $r(t,e){e===void 0&&(e={});var s=e,n=s.placement,i=n===void 0?t.placement:n,r=s.strategy,o=r===void 0?t.strategy:r,a=s.boundary,l=a===void 0?j0:a,u=s.rootBoundary,c=u===void 0?Vf:u,d=s.elementContext,f=d===void 0?Hi:d,p=s.altBoundary,b=p===void 0?!1:p,_=s.padding,A=_===void 0?0:_,C=nw(typeof A!="number"?A:iw(A,qr)),P=f===Hi?H0:Hi,M=t.rects.popper,R=t.elements[b?P:f],z=_3(Si(R)?R:R.contextElement||qn(t.elements.popper),l,c,o),W=Cr(t.elements.reference),ce=aw({reference:W,element:M,strategy:"absolute",placement:i}),q=Yh(Object.assign({},M,ce)),Z=f===Hi?q:W,de={top:z.top-Z.top+C.top,bottom:Z.bottom-z.bottom+C.bottom,left:z.left-Z.left+C.left,right:Z.right-z.right+C.right},Ie=t.modifiersData.offset;if(f===Hi&&Ie){var Me=Ie[i];Object.keys(de).forEach(function(ze){var dt=[ts,es].indexOf(ze)>=0?1:-1,ft=[Ut,es].indexOf(ze)>=0?"y":"x";de[ze]+=Me[ft]*dt})}return de}function b3(t,e){e===void 0&&(e={});var s=e,n=s.placement,i=s.boundary,r=s.rootBoundary,o=s.padding,a=s.flipVariations,l=s.allowedAutoPlacements,u=l===void 0?Ff:l,c=Dr(n),d=c?a?Gh:Gh.filter(function(b){return Dr(b)===c}):qr,f=d.filter(function(b){return u.indexOf(b)>=0});f.length===0&&(f=d);var p=f.reduce(function(b,_){return b[_]=$r(t,{placement:_,boundary:i,rootBoundary:r,padding:o})[Ns(_)],b},{});return Object.keys(p).sort(function(b,_){return p[b]-p[_]})}function w3(t){if(Ns(t)===su)return[];var e=ml(t);return[Ig(t),e,Ig(e)]}function E3(t){var e=t.state,s=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var i=s.mainAxis,r=i===void 0?!0:i,o=s.altAxis,a=o===void 0?!0:o,l=s.fallbackPlacements,u=s.padding,c=s.boundary,d=s.rootBoundary,f=s.altBoundary,p=s.flipVariations,b=p===void 0?!0:p,_=s.allowedAutoPlacements,A=e.options.placement,C=Ns(A),P=C===A,M=l||(P||!b?[ml(A)]:w3(A)),R=[A].concat(M).reduce(function(Qt,S){return Qt.concat(Ns(S)===su?b3(e,{placement:S,boundary:c,rootBoundary:d,padding:u,flipVariations:b,allowedAutoPlacements:_}):S)},[]),z=e.rects.reference,W=e.rects.popper,ce=new Map,q=!0,Z=R[0],de=0;de<R.length;de++){var Ie=R[de],Me=Ns(Ie),ze=Dr(Ie)===Ai,dt=[Ut,es].indexOf(Me)>=0,ft=dt?"width":"height",Te=$r(e,{placement:Ie,boundary:c,rootBoundary:d,altBoundary:f,padding:u}),ye=dt?ze?ts:Bt:ze?es:Ut;z[ft]>W[ft]&&(ye=ml(ye));var be=ml(ye),tt=[];if(r&&tt.push(Te[Me]<=0),a&&tt.push(Te[ye]<=0,Te[be]<=0),tt.every(function(Qt){return Qt})){Z=Ie,q=!1;break}ce.set(Ie,tt)}if(q)for(var Ht=b?3:1,bt=function(S){var K=R.find(function(H){var L=ce.get(H);if(L)return L.slice(0,S).every(function(X){return X})});if(K)return Z=K,"break"},Ze=Ht;Ze>0;Ze--){var Lt=bt(Ze);if(Lt==="break")break}e.placement!==Z&&(e.modifiersData[n]._skip=!0,e.placement=Z,e.reset=!0)}}const lw={name:"flip",enabled:!0,phase:"main",fn:E3,requiresIfExists:["offset"],data:{_skip:!1}};function Dg(t,e,s){return s===void 0&&(s={x:0,y:0}),{top:t.top-e.height-s.y,right:t.right-e.width+s.x,bottom:t.bottom-e.height+s.y,left:t.left-e.width-s.x}}function $g(t){return[Ut,ts,es,Bt].some(function(e){return t[e]>=0})}function T3(t){var e=t.state,s=t.name,n=e.rects.reference,i=e.rects.popper,r=e.modifiersData.preventOverflow,o=$r(e,{elementContext:"reference"}),a=$r(e,{altBoundary:!0}),l=Dg(o,n),u=Dg(a,i,r),c=$g(l),d=$g(u);e.modifiersData[s]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}const cw={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:T3};function k3(t,e,s){var n=Ns(t),i=[Bt,Ut].indexOf(n)>=0?-1:1,r=typeof s=="function"?s(Object.assign({},e,{placement:t})):s,o=r[0],a=r[1];return o=o||0,a=(a||0)*i,[Bt,ts].indexOf(n)>=0?{x:a,y:o}:{x:o,y:a}}function A3(t){var e=t.state,s=t.options,n=t.name,i=s.offset,r=i===void 0?[0,0]:i,o=Ff.reduce(function(c,d){return c[d]=k3(d,e.rects,r),c},{}),a=o[e.placement],l=a.x,u=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[n]=o}const uw={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:A3};function S3(t){var e=t.state,s=t.name;e.modifiersData[s]=aw({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const Qf={name:"popperOffsets",enabled:!0,phase:"read",fn:S3,data:{}};function I3(t){return t==="x"?"y":"x"}function C3(t){var e=t.state,s=t.options,n=t.name,i=s.mainAxis,r=i===void 0?!0:i,o=s.altAxis,a=o===void 0?!1:o,l=s.boundary,u=s.rootBoundary,c=s.altBoundary,d=s.padding,f=s.tether,p=f===void 0?!0:f,b=s.tetherOffset,_=b===void 0?0:b,A=$r(e,{boundary:l,rootBoundary:u,padding:d,altBoundary:c}),C=Ns(e.placement),P=Dr(e.placement),M=!P,R=Hf(C),z=I3(R),W=e.modifiersData.popperOffsets,ce=e.rects.reference,q=e.rects.popper,Z=typeof _=="function"?_(Object.assign({},e.rects,{placement:e.placement})):_,de=typeof Z=="number"?{mainAxis:Z,altAxis:Z}:Object.assign({mainAxis:0,altAxis:0},Z),Ie=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Me={x:0,y:0};if(W){if(r){var ze,dt=R==="y"?Ut:Bt,ft=R==="y"?es:ts,Te=R==="y"?"height":"width",ye=W[R],be=ye+A[dt],tt=ye-A[ft],Ht=p?-q[Te]/2:0,bt=P===Ai?ce[Te]:q[Te],Ze=P===Ai?-q[Te]:-ce[Te],Lt=e.elements.arrow,Qt=p&&Lt?jf(Lt):{width:0,height:0},S=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:sw(),K=S[dt],H=S[ft],L=wo(0,ce[Te],Qt[Te]),X=M?ce[Te]/2-Ht-L-K-de.mainAxis:bt-L-K-de.mainAxis,Re=M?-ce[Te]/2+Ht+L+H+de.mainAxis:Ze+L+H+de.mainAxis,ae=e.elements.arrow&&Sa(e.elements.arrow),m=ae?R==="y"?ae.clientTop||0:ae.clientLeft||0:0,v=(ze=Ie==null?void 0:Ie[R])!=null?ze:0,T=ye+X-v-m,I=ye+Re-v,$=wo(p?Yl(be,T):be,ye,p?mi(tt,I):tt);W[R]=$,Me[R]=$-ye}if(a){var U,G=R==="x"?Ut:Bt,F=R==="x"?es:ts,B=W[z],O=z==="y"?"height":"width",ne=B+A[G],J=B-A[F],se=[Ut,Bt].indexOf(C)!==-1,ue=(U=Ie==null?void 0:Ie[z])!=null?U:0,Ee=se?ne:B-ce[O]-q[O]-ue+de.altAxis,Be=se?B+ce[O]+q[O]-ue-de.altAxis:J,Le=p&&se?r3(Ee,B,Be):wo(p?Ee:ne,B,p?Be:J);W[z]=Le,Me[z]=Le-B}e.modifiersData[n]=Me}}const hw={name:"preventOverflow",enabled:!0,phase:"main",fn:C3,requiresIfExists:["offset"]};function D3(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function $3(t){return t===cs(t)||!os(t)?Wf(t):D3(t)}function O3(t){var e=t.getBoundingClientRect(),s=Ir(e.width)/t.offsetWidth||1,n=Ir(e.height)/t.offsetHeight||1;return s!==1||n!==1}function N3(t,e,s){s===void 0&&(s=!1);var n=os(e),i=os(e)&&O3(e),r=qn(e),o=Cr(t,i,s),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!s)&&((Vs(e)!=="body"||Gf(r))&&(a=$3(e)),os(e)?(l=Cr(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):r&&(l.x=Kf(r))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function P3(t){var e=new Map,s=new Set,n=[];t.forEach(function(r){e.set(r.name,r)});function i(r){s.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!s.has(a)){var l=e.get(a);l&&i(l)}}),n.push(r)}return t.forEach(function(r){s.has(r.name)||i(r)}),n}function M3(t){var e=P3(t);return Z0.reduce(function(s,n){return s.concat(e.filter(function(i){return i.phase===n}))},[])}function R3(t){var e;return function(){return e||(e=new Promise(function(s){Promise.resolve().then(function(){e=void 0,s(t())})})),e}}function L3(t){var e=t.reduce(function(s,n){var i=s[n.name];return s[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,s},{});return Object.keys(e).map(function(s){return e[s]})}var Og={placement:"bottom",modifiers:[],strategy:"absolute"};function Ng(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function iu(t){t===void 0&&(t={});var e=t,s=e.defaultModifiers,n=s===void 0?[]:s,i=e.defaultOptions,r=i===void 0?Og:i;return function(a,l,u){u===void 0&&(u=r);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},Og,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,p={state:c,setOptions:function(C){var P=typeof C=="function"?C(c.options):C;_(),c.options=Object.assign({},r,c.options,P),c.scrollParents={reference:Si(a)?Eo(a):a.contextElement?Eo(a.contextElement):[],popper:Eo(l)};var M=M3(L3([].concat(n,c.options.modifiers)));return c.orderedModifiers=M.filter(function(R){return R.enabled}),b(),p.update()},forceUpdate:function(){if(!f){var C=c.elements,P=C.reference,M=C.popper;if(Ng(P,M)){c.rects={reference:N3(P,Sa(M),c.options.strategy==="fixed"),popper:jf(M)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(de){return c.modifiersData[de.name]=Object.assign({},de.data)});for(var R=0;R<c.orderedModifiers.length;R++){if(c.reset===!0){c.reset=!1,R=-1;continue}var z=c.orderedModifiers[R],W=z.fn,ce=z.options,q=ce===void 0?{}:ce,Z=z.name;typeof W=="function"&&(c=W({state:c,options:q,name:Z,instance:p})||c)}}}},update:R3(function(){return new Promise(function(A){p.forceUpdate(),A(c)})}),destroy:function(){_(),f=!0}};if(!Ng(a,l))return p;p.setOptions(u).then(function(A){!f&&u.onFirstUpdate&&u.onFirstUpdate(A)});function b(){c.orderedModifiers.forEach(function(A){var C=A.name,P=A.options,M=P===void 0?{}:P,R=A.effect;if(typeof R=="function"){var z=R({state:c,name:C,instance:p,options:M}),W=function(){};d.push(z||W)}})}function _(){d.forEach(function(A){return A()}),d=[]}return p}}var x3=iu(),V3=[qf,Qf,zf,Bf],F3=iu({defaultModifiers:V3}),U3=[qf,Qf,zf,Bf,uw,lw,hw,rw,cw],Yf=iu({defaultModifiers:U3});const dw=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Q0,afterRead:W0,afterWrite:J0,applyStyles:Bf,arrow:rw,auto:su,basePlacements:qr,beforeMain:K0,beforeRead:z0,beforeWrite:Y0,bottom:es,clippingParents:j0,computeStyles:zf,createPopper:Yf,createPopperBase:x3,createPopperLite:F3,detectOverflow:$r,end:Sr,eventListeners:qf,flip:lw,hide:cw,left:Bt,main:G0,modifierPhases:Z0,offset:uw,placements:Ff,popper:Hi,popperGenerator:iu,popperOffsets:Qf,preventOverflow:hw,read:q0,reference:H0,right:ts,start:Ai,top:Ut,variationPlacements:Gh,viewport:Vf,write:X0},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const B3=1e6,j3=1e3,Xh="transitionend",H3=t=>t==null?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),z3=t=>{do t+=Math.floor(Math.random()*B3);while(document.getElementById(t));return t},fw=t=>{let e=t.getAttribute("data-bs-target");if(!e||e==="#"){let s=t.getAttribute("href");if(!s||!s.includes("#")&&!s.startsWith("."))return null;s.includes("#")&&!s.startsWith("#")&&(s=`#${s.split("#")[1]}`),e=s&&s!=="#"?s.trim():null}return e},pw=t=>{const e=fw(t);return e&&document.querySelector(e)?e:null},Xs=t=>{const e=fw(t);return e?document.querySelector(e):null},q3=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:s}=window.getComputedStyle(t);const n=Number.parseFloat(e),i=Number.parseFloat(s);return!n&&!i?0:(e=e.split(",")[0],s=s.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(s))*j3)},mw=t=>{t.dispatchEvent(new Event(Xh))},Js=t=>!t||typeof t!="object"?!1:(typeof t.jquery<"u"&&(t=t[0]),typeof t.nodeType<"u"),Ln=t=>Js(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(t):null,Wr=t=>{if(!Js(t)||t.getClientRects().length===0)return!1;const e=getComputedStyle(t).getPropertyValue("visibility")==="visible",s=t.closest("details:not([open])");if(!s)return e;if(s!==t){const n=t.closest("summary");if(n&&n.parentNode!==s||n===null)return!1}return e},xn=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled<"u"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",gw=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?gw(t.parentNode):null},Xl=()=>{},Ia=t=>{t.offsetHeight},yw=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Vu=[],W3=t=>{document.readyState==="loading"?(Vu.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of Vu)e()}),Vu.push(t)):t()},ls=()=>document.documentElement.dir==="rtl",us=t=>{W3(()=>{const e=yw();if(e){const s=t.NAME,n=e.fn[s];e.fn[s]=t.jQueryInterface,e.fn[s].Constructor=t,e.fn[s].noConflict=()=>(e.fn[s]=n,t.jQueryInterface)}})},Hs=t=>{typeof t=="function"&&t()},vw=(t,e,s=!0)=>{if(!s){Hs(t);return}const n=5,i=q3(e)+n;let r=!1;const o=({target:a})=>{a===e&&(r=!0,e.removeEventListener(Xh,o),Hs(t))};e.addEventListener(Xh,o),setTimeout(()=>{r||mw(e)},i)},Xf=(t,e,s,n)=>{const i=t.length;let r=t.indexOf(e);return r===-1?!s&&n?t[i-1]:t[0]:(r+=s?1:-1,n&&(r=(r+i)%i),t[Math.max(0,Math.min(r,i-1))])},K3=/[^.]*(?=\..*)\.|.*/,G3=/\..*/,Q3=/::\d+$/,Fu={};let Pg=1;const _w={mouseenter:"mouseover",mouseleave:"mouseout"},Y3=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function bw(t,e){return e&&`${e}::${Pg++}`||t.uidEvent||Pg++}function ww(t){const e=bw(t);return t.uidEvent=e,Fu[e]=Fu[e]||{},Fu[e]}function X3(t,e){return function s(n){return Jf(n,{delegateTarget:t}),s.oneOff&&N.off(t,n.type,e),e.apply(t,[n])}}function J3(t,e,s){return function n(i){const r=t.querySelectorAll(e);for(let{target:o}=i;o&&o!==this;o=o.parentNode)for(const a of r)if(a===o)return Jf(i,{delegateTarget:o}),n.oneOff&&N.off(t,i.type,e,s),s.apply(o,[i])}}function Ew(t,e,s=null){return Object.values(t).find(n=>n.callable===e&&n.delegationSelector===s)}function Tw(t,e,s){const n=typeof e=="string",i=n?s:e||s;let r=kw(t);return Y3.has(r)||(r=t),[n,i,r]}function Mg(t,e,s,n,i){if(typeof e!="string"||!t)return;let[r,o,a]=Tw(e,s,n);e in _w&&(o=(b=>function(_){if(!_.relatedTarget||_.relatedTarget!==_.delegateTarget&&!_.delegateTarget.contains(_.relatedTarget))return b.call(this,_)})(o));const l=ww(t),u=l[a]||(l[a]={}),c=Ew(u,o,r?s:null);if(c){c.oneOff=c.oneOff&&i;return}const d=bw(o,e.replace(K3,"")),f=r?J3(t,s,o):X3(t,o);f.delegationSelector=r?s:null,f.callable=o,f.oneOff=i,f.uidEvent=d,u[d]=f,t.addEventListener(a,f,r)}function Jh(t,e,s,n,i){const r=Ew(e[s],n,i);r&&(t.removeEventListener(s,r,Boolean(i)),delete e[s][r.uidEvent])}function Z3(t,e,s,n){const i=e[s]||{};for(const r of Object.keys(i))if(r.includes(n)){const o=i[r];Jh(t,e,s,o.callable,o.delegationSelector)}}function kw(t){return t=t.replace(G3,""),_w[t]||t}const N={on(t,e,s,n){Mg(t,e,s,n,!1)},one(t,e,s,n){Mg(t,e,s,n,!0)},off(t,e,s,n){if(typeof e!="string"||!t)return;const[i,r,o]=Tw(e,s,n),a=o!==e,l=ww(t),u=l[o]||{},c=e.startsWith(".");if(typeof r<"u"){if(!Object.keys(u).length)return;Jh(t,l,o,r,i?s:null);return}if(c)for(const d of Object.keys(l))Z3(t,l,d,e.slice(1));for(const d of Object.keys(u)){const f=d.replace(Q3,"");if(!a||e.includes(f)){const p=u[d];Jh(t,l,o,p.callable,p.delegationSelector)}}},trigger(t,e,s){if(typeof e!="string"||!t)return null;const n=yw(),i=kw(e),r=e!==i;let o=null,a=!0,l=!0,u=!1;r&&n&&(o=n.Event(e,s),n(t).trigger(o),a=!o.isPropagationStopped(),l=!o.isImmediatePropagationStopped(),u=o.isDefaultPrevented());let c=new Event(e,{bubbles:a,cancelable:!0});return c=Jf(c,s),u&&c.preventDefault(),l&&t.dispatchEvent(c),c.defaultPrevented&&o&&o.preventDefault(),c}};function Jf(t,e){for(const[s,n]of Object.entries(e||{}))try{t[s]=n}catch{Object.defineProperty(t,s,{configurable:!0,get(){return n}})}return t}const vn=new Map,Uu={set(t,e,s){vn.has(t)||vn.set(t,new Map);const n=vn.get(t);if(!n.has(e)&&n.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(n.keys())[0]}.`);return}n.set(e,s)},get(t,e){return vn.has(t)&&vn.get(t).get(e)||null},remove(t,e){if(!vn.has(t))return;const s=vn.get(t);s.delete(e),s.size===0&&vn.delete(t)}};function Rg(t){if(t==="true")return!0;if(t==="false")return!1;if(t===Number(t).toString())return Number(t);if(t===""||t==="null")return null;if(typeof t!="string")return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function Bu(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const Zs={setDataAttribute(t,e,s){t.setAttribute(`data-bs-${Bu(e)}`,s)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${Bu(e)}`)},getDataAttributes(t){if(!t)return{};const e={},s=Object.keys(t.dataset).filter(n=>n.startsWith("bs")&&!n.startsWith("bsConfig"));for(const n of s){let i=n.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1,i.length),e[i]=Rg(t.dataset[n])}return e},getDataAttribute(t,e){return Rg(t.getAttribute(`data-bs-${Bu(e)}`))}};class Ca{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,s){const n=Js(s)?Zs.getDataAttribute(s,"config"):{};return{...this.constructor.Default,...typeof n=="object"?n:{},...Js(s)?Zs.getDataAttributes(s):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,s=this.constructor.DefaultType){for(const n of Object.keys(s)){const i=s[n],r=e[n],o=Js(r)?"element":H3(r);if(!new RegExp(i).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${n}" provided type "${o}" but expected type "${i}".`)}}}const e5="5.2.3";class ws extends Ca{constructor(e,s){super(),e=Ln(e),e&&(this._element=e,this._config=this._getConfig(s),Uu.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Uu.remove(this._element,this.constructor.DATA_KEY),N.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,s,n=!0){vw(e,s,n)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return Uu.get(Ln(e),this.DATA_KEY)}static getOrCreateInstance(e,s={}){return this.getInstance(e)||new this(e,typeof s=="object"?s:null)}static get VERSION(){return e5}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const ru=(t,e="hide")=>{const s=`click.dismiss${t.EVENT_KEY}`,n=t.NAME;N.on(document,s,`[data-bs-dismiss="${n}"]`,function(i){if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),xn(this))return;const r=Xs(this)||this.closest(`.${n}`);t.getOrCreateInstance(r)[e]()})},t5="alert",s5="bs.alert",Aw=`.${s5}`,n5=`close${Aw}`,i5=`closed${Aw}`,r5="fade",o5="show";class ou extends ws{static get NAME(){return t5}close(){if(N.trigger(this._element,n5).defaultPrevented)return;this._element.classList.remove(o5);const s=this._element.classList.contains(r5);this._queueCallback(()=>this._destroyElement(),this._element,s)}_destroyElement(){this._element.remove(),N.trigger(this._element,i5),this.dispose()}static jQueryInterface(e){return this.each(function(){const s=ou.getOrCreateInstance(this);if(typeof e=="string"){if(s[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);s[e](this)}})}}ru(ou,"close");us(ou);const a5="button",l5="bs.button",c5=`.${l5}`,u5=".data-api",h5="active",Lg='[data-bs-toggle="button"]',d5=`click${c5}${u5}`;class au extends ws{static get NAME(){return a5}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(h5))}static jQueryInterface(e){return this.each(function(){const s=au.getOrCreateInstance(this);e==="toggle"&&s[e]()})}}N.on(document,d5,Lg,t=>{t.preventDefault();const e=t.target.closest(Lg);au.getOrCreateInstance(e).toggle()});us(au);const we={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(s=>s.matches(e))},parents(t,e){const s=[];let n=t.parentNode.closest(e);for(;n;)s.push(n),n=n.parentNode.closest(e);return s},prev(t,e){let s=t.previousElementSibling;for(;s;){if(s.matches(e))return[s];s=s.previousElementSibling}return[]},next(t,e){let s=t.nextElementSibling;for(;s;){if(s.matches(e))return[s];s=s.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(s=>`${s}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(s=>!xn(s)&&Wr(s))}},f5="swipe",Kr=".bs.swipe",p5=`touchstart${Kr}`,m5=`touchmove${Kr}`,g5=`touchend${Kr}`,y5=`pointerdown${Kr}`,v5=`pointerup${Kr}`,_5="touch",b5="pen",w5="pointer-event",E5=40,T5={endCallback:null,leftCallback:null,rightCallback:null},k5={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Jl extends Ca{constructor(e,s){super(),this._element=e,!(!e||!Jl.isSupported())&&(this._config=this._getConfig(s),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return T5}static get DefaultType(){return k5}static get NAME(){return f5}dispose(){N.off(this._element,Kr)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),Hs(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=E5)return;const s=e/this._deltaX;this._deltaX=0,s&&Hs(s>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(N.on(this._element,y5,e=>this._start(e)),N.on(this._element,v5,e=>this._end(e)),this._element.classList.add(w5)):(N.on(this._element,p5,e=>this._start(e)),N.on(this._element,m5,e=>this._move(e)),N.on(this._element,g5,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===b5||e.pointerType===_5)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const A5="carousel",S5="bs.carousel",Wn=`.${S5}`,Sw=".data-api",I5="ArrowLeft",C5="ArrowRight",D5=500,Zr="next",Vi="prev",zi="left",gl="right",$5=`slide${Wn}`,ju=`slid${Wn}`,O5=`keydown${Wn}`,N5=`mouseenter${Wn}`,P5=`mouseleave${Wn}`,M5=`dragstart${Wn}`,R5=`load${Wn}${Sw}`,L5=`click${Wn}${Sw}`,Iw="carousel",Ka="active",x5="slide",V5="carousel-item-end",F5="carousel-item-start",U5="carousel-item-next",B5="carousel-item-prev",Cw=".active",Dw=".carousel-item",j5=Cw+Dw,H5=".carousel-item img",z5=".carousel-indicators",q5="[data-bs-slide], [data-bs-slide-to]",W5='[data-bs-ride="carousel"]',K5={[I5]:gl,[C5]:zi},G5={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Q5={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Da extends ws{constructor(e,s){super(e,s),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=we.findOne(z5,this._element),this._addEventListeners(),this._config.ride===Iw&&this.cycle()}static get Default(){return G5}static get DefaultType(){return Q5}static get NAME(){return A5}next(){this._slide(Zr)}nextWhenVisible(){!document.hidden&&Wr(this._element)&&this.next()}prev(){this._slide(Vi)}pause(){this._isSliding&&mw(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){N.one(this._element,ju,()=>this.cycle());return}this.cycle()}}to(e){const s=this._getItems();if(e>s.length-1||e<0)return;if(this._isSliding){N.one(this._element,ju,()=>this.to(e));return}const n=this._getItemIndex(this._getActive());if(n===e)return;const i=e>n?Zr:Vi;this._slide(i,s[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&N.on(this._element,O5,e=>this._keydown(e)),this._config.pause==="hover"&&(N.on(this._element,N5,()=>this.pause()),N.on(this._element,P5,()=>this._maybeEnableCycle())),this._config.touch&&Jl.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const n of we.find(H5,this._element))N.on(n,M5,i=>i.preventDefault());const s={leftCallback:()=>this._slide(this._directionToOrder(zi)),rightCallback:()=>this._slide(this._directionToOrder(gl)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),D5+this._config.interval))}};this._swipeHelper=new Jl(this._element,s)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const s=K5[e.key];s&&(e.preventDefault(),this._slide(this._directionToOrder(s)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const s=we.findOne(Cw,this._indicatorsElement);s.classList.remove(Ka),s.removeAttribute("aria-current");const n=we.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);n&&(n.classList.add(Ka),n.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const s=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=s||this._config.defaultInterval}_slide(e,s=null){if(this._isSliding)return;const n=this._getActive(),i=e===Zr,r=s||Xf(this._getItems(),n,i,this._config.wrap);if(r===n)return;const o=this._getItemIndex(r),a=p=>N.trigger(this._element,p,{relatedTarget:r,direction:this._orderToDirection(e),from:this._getItemIndex(n),to:o});if(a($5).defaultPrevented||!n||!r)return;const u=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=r;const c=i?F5:V5,d=i?U5:B5;r.classList.add(d),Ia(r),n.classList.add(c),r.classList.add(c);const f=()=>{r.classList.remove(c,d),r.classList.add(Ka),n.classList.remove(Ka,d,c),this._isSliding=!1,a(ju)};this._queueCallback(f,n,this._isAnimated()),u&&this.cycle()}_isAnimated(){return this._element.classList.contains(x5)}_getActive(){return we.findOne(j5,this._element)}_getItems(){return we.find(Dw,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return ls()?e===zi?Vi:Zr:e===zi?Zr:Vi}_orderToDirection(e){return ls()?e===Vi?zi:gl:e===Vi?gl:zi}static jQueryInterface(e){return this.each(function(){const s=Da.getOrCreateInstance(this,e);if(typeof e=="number"){s.to(e);return}if(typeof e=="string"){if(s[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);s[e]()}})}}N.on(document,L5,q5,function(t){const e=Xs(this);if(!e||!e.classList.contains(Iw))return;t.preventDefault();const s=Da.getOrCreateInstance(e),n=this.getAttribute("data-bs-slide-to");if(n){s.to(n),s._maybeEnableCycle();return}if(Zs.getDataAttribute(this,"slide")==="next"){s.next(),s._maybeEnableCycle();return}s.prev(),s._maybeEnableCycle()});N.on(window,R5,()=>{const t=we.find(W5);for(const e of t)Da.getOrCreateInstance(e)});us(Da);const Y5="collapse",X5="bs.collapse",$a=`.${X5}`,J5=".data-api",Z5=`show${$a}`,e4=`shown${$a}`,t4=`hide${$a}`,s4=`hidden${$a}`,n4=`click${$a}${J5}`,Hu="show",Xi="collapse",Ga="collapsing",i4="collapsed",r4=`:scope .${Xi} .${Xi}`,o4="collapse-horizontal",a4="width",l4="height",c4=".collapse.show, .collapse.collapsing",Zh='[data-bs-toggle="collapse"]',u4={parent:null,toggle:!0},h4={parent:"(null|element)",toggle:"boolean"};class qo extends ws{constructor(e,s){super(e,s),this._isTransitioning=!1,this._triggerArray=[];const n=we.find(Zh);for(const i of n){const r=pw(i),o=we.find(r).filter(a=>a===this._element);r!==null&&o.length&&this._triggerArray.push(i)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return u4}static get DefaultType(){return h4}static get NAME(){return Y5}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(c4).filter(a=>a!==this._element).map(a=>qo.getOrCreateInstance(a,{toggle:!1}))),e.length&&e[0]._isTransitioning||N.trigger(this._element,Z5).defaultPrevented)return;for(const a of e)a.hide();const n=this._getDimension();this._element.classList.remove(Xi),this._element.classList.add(Ga),this._element.style[n]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(Ga),this._element.classList.add(Xi,Hu),this._element.style[n]="",N.trigger(this._element,e4)},o=`scroll${n[0].toUpperCase()+n.slice(1)}`;this._queueCallback(i,this._element,!0),this._element.style[n]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||N.trigger(this._element,t4).defaultPrevented)return;const s=this._getDimension();this._element.style[s]=`${this._element.getBoundingClientRect()[s]}px`,Ia(this._element),this._element.classList.add(Ga),this._element.classList.remove(Xi,Hu);for(const i of this._triggerArray){const r=Xs(i);r&&!this._isShown(r)&&this._addAriaAndCollapsedClass([i],!1)}this._isTransitioning=!0;const n=()=>{this._isTransitioning=!1,this._element.classList.remove(Ga),this._element.classList.add(Xi),N.trigger(this._element,s4)};this._element.style[s]="",this._queueCallback(n,this._element,!0)}_isShown(e=this._element){return e.classList.contains(Hu)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=Ln(e.parent),e}_getDimension(){return this._element.classList.contains(o4)?a4:l4}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(Zh);for(const s of e){const n=Xs(s);n&&this._addAriaAndCollapsedClass([s],this._isShown(n))}}_getFirstLevelChildren(e){const s=we.find(r4,this._config.parent);return we.find(e,this._config.parent).filter(n=>!s.includes(n))}_addAriaAndCollapsedClass(e,s){if(e.length)for(const n of e)n.classList.toggle(i4,!s),n.setAttribute("aria-expanded",s)}static jQueryInterface(e){const s={};return typeof e=="string"&&/show|hide/.test(e)&&(s.toggle=!1),this.each(function(){const n=qo.getOrCreateInstance(this,s);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}N.on(document,n4,Zh,function(t){(t.target.tagName==="A"||t.delegateTarget&&t.delegateTarget.tagName==="A")&&t.preventDefault();const e=pw(this),s=we.find(e);for(const n of s)qo.getOrCreateInstance(n,{toggle:!1}).toggle()});us(qo);const xg="dropdown",d4="bs.dropdown",Pi=`.${d4}`,Zf=".data-api",f4="Escape",Vg="Tab",p4="ArrowUp",Fg="ArrowDown",m4=2,g4=`hide${Pi}`,y4=`hidden${Pi}`,v4=`show${Pi}`,_4=`shown${Pi}`,$w=`click${Pi}${Zf}`,Ow=`keydown${Pi}${Zf}`,b4=`keyup${Pi}${Zf}`,qi="show",w4="dropup",E4="dropend",T4="dropstart",k4="dropup-center",A4="dropdown-center",oi='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',S4=`${oi}.${qi}`,yl=".dropdown-menu",I4=".navbar",C4=".navbar-nav",D4=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",$4=ls()?"top-end":"top-start",O4=ls()?"top-start":"top-end",N4=ls()?"bottom-end":"bottom-start",P4=ls()?"bottom-start":"bottom-end",M4=ls()?"left-start":"right-start",R4=ls()?"right-start":"left-start",L4="top",x4="bottom",V4={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},F4={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Ps extends ws{constructor(e,s){super(e,s),this._popper=null,this._parent=this._element.parentNode,this._menu=we.next(this._element,yl)[0]||we.prev(this._element,yl)[0]||we.findOne(yl,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return V4}static get DefaultType(){return F4}static get NAME(){return xg}toggle(){return this._isShown()?this.hide():this.show()}show(){if(xn(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!N.trigger(this._element,v4,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(C4))for(const n of[].concat(...document.body.children))N.on(n,"mouseover",Xl);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(qi),this._element.classList.add(qi),N.trigger(this._element,_4,e)}}hide(){if(xn(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!N.trigger(this._element,g4,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const n of[].concat(...document.body.children))N.off(n,"mouseover",Xl);this._popper&&this._popper.destroy(),this._menu.classList.remove(qi),this._element.classList.remove(qi),this._element.setAttribute("aria-expanded","false"),Zs.removeDataAttribute(this._menu,"popper"),N.trigger(this._element,y4,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!Js(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${xg.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof dw>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:Js(this._config.reference)?e=Ln(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const s=this._getPopperConfig();this._popper=Yf(e,this._menu,s)}_isShown(){return this._menu.classList.contains(qi)}_getPlacement(){const e=this._parent;if(e.classList.contains(E4))return M4;if(e.classList.contains(T4))return R4;if(e.classList.contains(k4))return L4;if(e.classList.contains(A4))return x4;const s=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(w4)?s?O4:$4:s?P4:N4}_detectNavbar(){return this._element.closest(I4)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(s=>Number.parseInt(s,10)):typeof e=="function"?s=>e(s,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Zs.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...typeof this._config.popperConfig=="function"?this._config.popperConfig(e):this._config.popperConfig}}_selectMenuItem({key:e,target:s}){const n=we.find(D4,this._menu).filter(i=>Wr(i));n.length&&Xf(n,s,e===Fg,!n.includes(s)).focus()}static jQueryInterface(e){return this.each(function(){const s=Ps.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof s[e]>"u")throw new TypeError(`No method named "${e}"`);s[e]()}})}static clearMenus(e){if(e.button===m4||e.type==="keyup"&&e.key!==Vg)return;const s=we.find(S4);for(const n of s){const i=Ps.getInstance(n);if(!i||i._config.autoClose===!1)continue;const r=e.composedPath(),o=r.includes(i._menu);if(r.includes(i._element)||i._config.autoClose==="inside"&&!o||i._config.autoClose==="outside"&&o||i._menu.contains(e.target)&&(e.type==="keyup"&&e.key===Vg||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const a={relatedTarget:i._element};e.type==="click"&&(a.clickEvent=e),i._completeHide(a)}}static dataApiKeydownHandler(e){const s=/input|textarea/i.test(e.target.tagName),n=e.key===f4,i=[p4,Fg].includes(e.key);if(!i&&!n||s&&!n)return;e.preventDefault();const r=this.matches(oi)?this:we.prev(this,oi)[0]||we.next(this,oi)[0]||we.findOne(oi,e.delegateTarget.parentNode),o=Ps.getOrCreateInstance(r);if(i){e.stopPropagation(),o.show(),o._selectMenuItem(e);return}o._isShown()&&(e.stopPropagation(),o.hide(),r.focus())}}N.on(document,Ow,oi,Ps.dataApiKeydownHandler);N.on(document,Ow,yl,Ps.dataApiKeydownHandler);N.on(document,$w,Ps.clearMenus);N.on(document,b4,Ps.clearMenus);N.on(document,$w,oi,function(t){t.preventDefault(),Ps.getOrCreateInstance(this).toggle()});us(Ps);const Ug=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Bg=".sticky-top",Qa="padding-right",jg="margin-right";class ed{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Qa,s=>s+e),this._setElementAttributes(Ug,Qa,s=>s+e),this._setElementAttributes(Bg,jg,s=>s-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Qa),this._resetElementAttributes(Ug,Qa),this._resetElementAttributes(Bg,jg)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,s,n){const i=this.getWidth(),r=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+i)return;this._saveInitialAttribute(o,s);const a=window.getComputedStyle(o).getPropertyValue(s);o.style.setProperty(s,`${n(Number.parseFloat(a))}px`)};this._applyManipulationCallback(e,r)}_saveInitialAttribute(e,s){const n=e.style.getPropertyValue(s);n&&Zs.setDataAttribute(e,s,n)}_resetElementAttributes(e,s){const n=i=>{const r=Zs.getDataAttribute(i,s);if(r===null){i.style.removeProperty(s);return}Zs.removeDataAttribute(i,s),i.style.setProperty(s,r)};this._applyManipulationCallback(e,n)}_applyManipulationCallback(e,s){if(Js(e)){s(e);return}for(const n of we.find(e,this._element))s(n)}}const Nw="backdrop",U4="fade",Hg="show",zg=`mousedown.bs.${Nw}`,B4={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},j4={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Pw extends Ca{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return B4}static get DefaultType(){return j4}static get NAME(){return Nw}show(e){if(!this._config.isVisible){Hs(e);return}this._append();const s=this._getElement();this._config.isAnimated&&Ia(s),s.classList.add(Hg),this._emulateAnimation(()=>{Hs(e)})}hide(e){if(!this._config.isVisible){Hs(e);return}this._getElement().classList.remove(Hg),this._emulateAnimation(()=>{this.dispose(),Hs(e)})}dispose(){this._isAppended&&(N.off(this._element,zg),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(U4),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Ln(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),N.on(e,zg,()=>{Hs(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){vw(e,this._getElement(),this._config.isAnimated)}}const H4="focustrap",z4="bs.focustrap",Zl=`.${z4}`,q4=`focusin${Zl}`,W4=`keydown.tab${Zl}`,K4="Tab",G4="forward",qg="backward",Q4={autofocus:!0,trapElement:null},Y4={autofocus:"boolean",trapElement:"element"};class Mw extends Ca{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Q4}static get DefaultType(){return Y4}static get NAME(){return H4}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),N.off(document,Zl),N.on(document,q4,e=>this._handleFocusin(e)),N.on(document,W4,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,N.off(document,Zl))}_handleFocusin(e){const{trapElement:s}=this._config;if(e.target===document||e.target===s||s.contains(e.target))return;const n=we.focusableChildren(s);n.length===0?s.focus():this._lastTabNavDirection===qg?n[n.length-1].focus():n[0].focus()}_handleKeydown(e){e.key===K4&&(this._lastTabNavDirection=e.shiftKey?qg:G4)}}const X4="modal",J4="bs.modal",Es=`.${J4}`,Z4=".data-api",ej="Escape",tj=`hide${Es}`,sj=`hidePrevented${Es}`,Rw=`hidden${Es}`,Lw=`show${Es}`,nj=`shown${Es}`,ij=`resize${Es}`,rj=`click.dismiss${Es}`,oj=`mousedown.dismiss${Es}`,aj=`keydown.dismiss${Es}`,lj=`click${Es}${Z4}`,Wg="modal-open",cj="fade",Kg="show",zu="modal-static",uj=".modal.show",hj=".modal-dialog",dj=".modal-body",fj='[data-bs-toggle="modal"]',pj={backdrop:!0,focus:!0,keyboard:!0},mj={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Or extends ws{constructor(e,s){super(e,s),this._dialog=we.findOne(hj,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ed,this._addEventListeners()}static get Default(){return pj}static get DefaultType(){return mj}static get NAME(){return X4}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||N.trigger(this._element,Lw,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Wg),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||N.trigger(this._element,tj).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Kg),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const e of[window,this._dialog])N.off(e,Es);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Pw({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Mw({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const s=we.findOne(dj,this._dialog);s&&(s.scrollTop=0),Ia(this._element),this._element.classList.add(Kg);const n=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,N.trigger(this._element,nj,{relatedTarget:e})};this._queueCallback(n,this._dialog,this._isAnimated())}_addEventListeners(){N.on(this._element,aj,e=>{if(e.key===ej){if(this._config.keyboard){e.preventDefault(),this.hide();return}this._triggerBackdropTransition()}}),N.on(window,ij,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),N.on(this._element,oj,e=>{N.one(this._element,rj,s=>{if(!(this._element!==e.target||this._element!==s.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Wg),this._resetAdjustments(),this._scrollBar.reset(),N.trigger(this._element,Rw)})}_isAnimated(){return this._element.classList.contains(cj)}_triggerBackdropTransition(){if(N.trigger(this._element,sj).defaultPrevented)return;const s=this._element.scrollHeight>document.documentElement.clientHeight,n=this._element.style.overflowY;n==="hidden"||this._element.classList.contains(zu)||(s||(this._element.style.overflowY="hidden"),this._element.classList.add(zu),this._queueCallback(()=>{this._element.classList.remove(zu),this._queueCallback(()=>{this._element.style.overflowY=n},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,s=this._scrollBar.getWidth(),n=s>0;if(n&&!e){const i=ls()?"paddingLeft":"paddingRight";this._element.style[i]=`${s}px`}if(!n&&e){const i=ls()?"paddingRight":"paddingLeft";this._element.style[i]=`${s}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,s){return this.each(function(){const n=Or.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e](s)}})}}N.on(document,lj,fj,function(t){const e=Xs(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),N.one(e,Lw,i=>{i.defaultPrevented||N.one(e,Rw,()=>{Wr(this)&&this.focus()})});const s=we.findOne(uj);s&&Or.getInstance(s).hide(),Or.getOrCreateInstance(e).toggle(this)});ru(Or);us(Or);const gj="offcanvas",yj="bs.offcanvas",pn=`.${yj}`,xw=".data-api",vj=`load${pn}${xw}`,_j="Escape",Gg="show",Qg="showing",Yg="hiding",bj="offcanvas-backdrop",Vw=".offcanvas.show",wj=`show${pn}`,Ej=`shown${pn}`,Tj=`hide${pn}`,Xg=`hidePrevented${pn}`,Fw=`hidden${pn}`,kj=`resize${pn}`,Aj=`click${pn}${xw}`,Sj=`keydown.dismiss${pn}`,Ij='[data-bs-toggle="offcanvas"]',Cj={backdrop:!0,keyboard:!0,scroll:!1},Dj={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Vn extends ws{constructor(e,s){super(e,s),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Cj}static get DefaultType(){return Dj}static get NAME(){return gj}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||N.trigger(this._element,wj,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new ed().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Qg);const n=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Gg),this._element.classList.remove(Qg),N.trigger(this._element,Ej,{relatedTarget:e})};this._queueCallback(n,this._element,!0)}hide(){if(!this._isShown||N.trigger(this._element,Tj).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Yg),this._backdrop.hide();const s=()=>{this._element.classList.remove(Gg,Yg),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ed().reset(),N.trigger(this._element,Fw)};this._queueCallback(s,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){N.trigger(this._element,Xg);return}this.hide()},s=Boolean(this._config.backdrop);return new Pw({className:bj,isVisible:s,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:s?e:null})}_initializeFocusTrap(){return new Mw({trapElement:this._element})}_addEventListeners(){N.on(this._element,Sj,e=>{if(e.key===_j){if(!this._config.keyboard){N.trigger(this._element,Xg);return}this.hide()}})}static jQueryInterface(e){return this.each(function(){const s=Vn.getOrCreateInstance(this,e);if(typeof e=="string"){if(s[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);s[e](this)}})}}N.on(document,Aj,Ij,function(t){const e=Xs(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),xn(this))return;N.one(e,Fw,()=>{Wr(this)&&this.focus()});const s=we.findOne(Vw);s&&s!==e&&Vn.getInstance(s).hide(),Vn.getOrCreateInstance(e).toggle(this)});N.on(window,vj,()=>{for(const t of we.find(Vw))Vn.getOrCreateInstance(t).show()});N.on(window,kj,()=>{for(const t of we.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(t).position!=="fixed"&&Vn.getOrCreateInstance(t).hide()});ru(Vn);us(Vn);const $j=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Oj=/^aria-[\w-]*$/i,Nj=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Pj=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,Mj=(t,e)=>{const s=t.nodeName.toLowerCase();return e.includes(s)?$j.has(s)?Boolean(Nj.test(t.nodeValue)||Pj.test(t.nodeValue)):!0:e.filter(n=>n instanceof RegExp).some(n=>n.test(s))},Uw={"*":["class","dir","id","lang","role",Oj],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function Rj(t,e,s){if(!t.length)return t;if(s&&typeof s=="function")return s(t);const i=new window.DOMParser().parseFromString(t,"text/html"),r=[].concat(...i.body.querySelectorAll("*"));for(const o of r){const a=o.nodeName.toLowerCase();if(!Object.keys(e).includes(a)){o.remove();continue}const l=[].concat(...o.attributes),u=[].concat(e["*"]||[],e[a]||[]);for(const c of l)Mj(c,u)||o.removeAttribute(c.nodeName)}return i.body.innerHTML}const Lj="TemplateFactory",xj={allowList:Uw,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Vj={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Fj={entry:"(string|element|function|null)",selector:"(string|element)"};class Uj extends Ca{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return xj}static get DefaultType(){return Vj}static get NAME(){return Lj}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[i,r]of Object.entries(this._config.content))this._setContent(e,r,i);const s=e.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&s.classList.add(...n.split(" ")),s}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[s,n]of Object.entries(e))super._typeCheckConfig({selector:s,entry:n},Fj)}_setContent(e,s,n){const i=we.findOne(n,e);if(i){if(s=this._resolvePossibleFunction(s),!s){i.remove();return}if(Js(s)){this._putElementInTemplate(Ln(s),i);return}if(this._config.html){i.innerHTML=this._maybeSanitize(s);return}i.textContent=s}}_maybeSanitize(e){return this._config.sanitize?Rj(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return typeof e=="function"?e(this):e}_putElementInTemplate(e,s){if(this._config.html){s.innerHTML="",s.append(e);return}s.textContent=e.textContent}}const Bj="tooltip",jj=new Set(["sanitize","allowList","sanitizeFn"]),qu="fade",Hj="modal",Ya="show",zj=".tooltip-inner",Jg=`.${Hj}`,Zg="hide.bs.modal",eo="hover",Wu="focus",qj="click",Wj="manual",Kj="hide",Gj="hidden",Qj="show",Yj="shown",Xj="inserted",Jj="click",Zj="focusin",eH="focusout",tH="mouseenter",sH="mouseleave",nH={AUTO:"auto",TOP:"top",RIGHT:ls()?"left":"right",BOTTOM:"bottom",LEFT:ls()?"right":"left"},iH={allowList:Uw,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},rH={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Gr extends ws{constructor(e,s){if(typeof dw>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,s),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return iH}static get DefaultType(){return rH}static get NAME(){return Bj}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),N.off(this._element.closest(Jg),Zg,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=N.trigger(this._element,this.constructor.eventName(Qj)),n=(gw(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!n)return;this._disposePopper();const i=this._getTipElement();this._element.setAttribute("aria-describedby",i.getAttribute("id"));const{container:r}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(r.append(i),N.trigger(this._element,this.constructor.eventName(Xj))),this._popper=this._createPopper(i),i.classList.add(Ya),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))N.on(a,"mouseover",Xl);const o=()=>{N.trigger(this._element,this.constructor.eventName(Yj)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||N.trigger(this._element,this.constructor.eventName(Kj)).defaultPrevented)return;if(this._getTipElement().classList.remove(Ya),"ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))N.off(i,"mouseover",Xl);this._activeTrigger[qj]=!1,this._activeTrigger[Wu]=!1,this._activeTrigger[eo]=!1,this._isHovered=null;const n=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),N.trigger(this._element,this.constructor.eventName(Gj)))};this._queueCallback(n,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const s=this._getTemplateFactory(e).toHtml();if(!s)return null;s.classList.remove(qu,Ya),s.classList.add(`bs-${this.constructor.NAME}-auto`);const n=z3(this.constructor.NAME).toString();return s.setAttribute("id",n),this._isAnimated()&&s.classList.add(qu),s}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new Uj({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[zj]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(qu)}_isShown(){return this.tip&&this.tip.classList.contains(Ya)}_createPopper(e){const s=typeof this._config.placement=="function"?this._config.placement.call(this,e,this._element):this._config.placement,n=nH[s.toUpperCase()];return Yf(this._element,e,this._getPopperConfig(n))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(s=>Number.parseInt(s,10)):typeof e=="function"?s=>e(s,this._element):e}_resolvePossibleFunction(e){return typeof e=="function"?e.call(this._element):e}_getPopperConfig(e){const s={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:n=>{this._getTipElement().setAttribute("data-popper-placement",n.state.placement)}}]};return{...s,...typeof this._config.popperConfig=="function"?this._config.popperConfig(s):this._config.popperConfig}}_setListeners(){const e=this._config.trigger.split(" ");for(const s of e)if(s==="click")N.on(this._element,this.constructor.eventName(Jj),this._config.selector,n=>{this._initializeOnDelegatedTarget(n).toggle()});else if(s!==Wj){const n=s===eo?this.constructor.eventName(tH):this.constructor.eventName(Zj),i=s===eo?this.constructor.eventName(sH):this.constructor.eventName(eH);N.on(this._element,n,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusin"?Wu:eo]=!0,o._enter()}),N.on(this._element,i,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusout"?Wu:eo]=o._element.contains(r.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},N.on(this._element.closest(Jg),Zg,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,s){clearTimeout(this._timeout),this._timeout=setTimeout(e,s)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const s=Zs.getDataAttributes(this._element);for(const n of Object.keys(s))jj.has(n)&&delete s[n];return e={...s,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:Ln(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const s in this._config)this.constructor.Default[s]!==this._config[s]&&(e[s]=this._config[s]);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const s=Gr.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof s[e]>"u")throw new TypeError(`No method named "${e}"`);s[e]()}})}}us(Gr);const oH="popover",aH=".popover-header",lH=".popover-body",cH={...Gr.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},uH={...Gr.DefaultType,content:"(null|string|element|function)"};class ep extends Gr{static get Default(){return cH}static get DefaultType(){return uH}static get NAME(){return oH}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[aH]:this._getTitle(),[lH]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const s=ep.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof s[e]>"u")throw new TypeError(`No method named "${e}"`);s[e]()}})}}us(ep);const hH="scrollspy",dH="bs.scrollspy",tp=`.${dH}`,fH=".data-api",pH=`activate${tp}`,ey=`click${tp}`,mH=`load${tp}${fH}`,gH="dropdown-item",Fi="active",yH='[data-bs-spy="scroll"]',Ku="[href]",vH=".nav, .list-group",ty=".nav-link",_H=".nav-item",bH=".list-group-item",wH=`${ty}, ${_H} > ${ty}, ${bH}`,EH=".dropdown",TH=".dropdown-toggle",kH={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},AH={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class lu extends ws{constructor(e,s){super(e,s),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return kH}static get DefaultType(){return AH}static get NAME(){return hH}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=Ln(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(s=>Number.parseFloat(s))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(N.off(this._config.target,ey),N.on(this._config.target,ey,Ku,e=>{const s=this._observableSections.get(e.target.hash);if(s){e.preventDefault();const n=this._rootElement||window,i=s.offsetTop-this._element.offsetTop;if(n.scrollTo){n.scrollTo({top:i,behavior:"smooth"});return}n.scrollTop=i}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(s=>this._observerCallback(s),e)}_observerCallback(e){const s=o=>this._targetLinks.get(`#${o.target.id}`),n=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(s(o))},i=(this._rootElement||document.documentElement).scrollTop,r=i>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=i;for(const o of e){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(s(o));continue}const a=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&a){if(n(o),!i)return;continue}!r&&!a&&n(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=we.find(Ku,this._config.target);for(const s of e){if(!s.hash||xn(s))continue;const n=we.findOne(s.hash,this._element);Wr(n)&&(this._targetLinks.set(s.hash,s),this._observableSections.set(s.hash,n))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(Fi),this._activateParents(e),N.trigger(this._element,pH,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(gH)){we.findOne(TH,e.closest(EH)).classList.add(Fi);return}for(const s of we.parents(e,vH))for(const n of we.prev(s,wH))n.classList.add(Fi)}_clearActiveClass(e){e.classList.remove(Fi);const s=we.find(`${Ku}.${Fi}`,e);for(const n of s)n.classList.remove(Fi)}static jQueryInterface(e){return this.each(function(){const s=lu.getOrCreateInstance(this,e);if(typeof e=="string"){if(s[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);s[e]()}})}}N.on(window,mH,()=>{for(const t of we.find(yH))lu.getOrCreateInstance(t)});us(lu);const SH="tab",IH="bs.tab",Mi=`.${IH}`,CH=`hide${Mi}`,DH=`hidden${Mi}`,$H=`show${Mi}`,OH=`shown${Mi}`,NH=`click${Mi}`,PH=`keydown${Mi}`,MH=`load${Mi}`,RH="ArrowLeft",sy="ArrowRight",LH="ArrowUp",ny="ArrowDown",ai="active",iy="fade",Gu="show",xH="dropdown",VH=".dropdown-toggle",FH=".dropdown-menu",Qu=":not(.dropdown-toggle)",UH='.list-group, .nav, [role="tablist"]',BH=".nav-item, .list-group-item",jH=`.nav-link${Qu}, .list-group-item${Qu}, [role="tab"]${Qu}`,Bw='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Yu=`${jH}, ${Bw}`,HH=`.${ai}[data-bs-toggle="tab"], .${ai}[data-bs-toggle="pill"], .${ai}[data-bs-toggle="list"]`;class Nr extends ws{constructor(e){super(e),this._parent=this._element.closest(UH),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),N.on(this._element,PH,s=>this._keydown(s)))}static get NAME(){return SH}show(){const e=this._element;if(this._elemIsActive(e))return;const s=this._getActiveElem(),n=s?N.trigger(s,CH,{relatedTarget:e}):null;N.trigger(e,$H,{relatedTarget:s}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(s,e),this._activate(e,s))}_activate(e,s){if(!e)return;e.classList.add(ai),this._activate(Xs(e));const n=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(Gu);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),N.trigger(e,OH,{relatedTarget:s})};this._queueCallback(n,e,e.classList.contains(iy))}_deactivate(e,s){if(!e)return;e.classList.remove(ai),e.blur(),this._deactivate(Xs(e));const n=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(Gu);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),N.trigger(e,DH,{relatedTarget:s})};this._queueCallback(n,e,e.classList.contains(iy))}_keydown(e){if(![RH,sy,LH,ny].includes(e.key))return;e.stopPropagation(),e.preventDefault();const s=[sy,ny].includes(e.key),n=Xf(this._getChildren().filter(i=>!xn(i)),e.target,s,!0);n&&(n.focus({preventScroll:!0}),Nr.getOrCreateInstance(n).show())}_getChildren(){return we.find(Yu,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,s){this._setAttributeIfNotExists(e,"role","tablist");for(const n of s)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const s=this._elemIsActive(e),n=this._getOuterElement(e);e.setAttribute("aria-selected",s),n!==e&&this._setAttributeIfNotExists(n,"role","presentation"),s||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const s=Xs(e);s&&(this._setAttributeIfNotExists(s,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(s,"aria-labelledby",`#${e.id}`))}_toggleDropDown(e,s){const n=this._getOuterElement(e);if(!n.classList.contains(xH))return;const i=(r,o)=>{const a=we.findOne(r,n);a&&a.classList.toggle(o,s)};i(VH,ai),i(FH,Gu),n.setAttribute("aria-expanded",s)}_setAttributeIfNotExists(e,s,n){e.hasAttribute(s)||e.setAttribute(s,n)}_elemIsActive(e){return e.classList.contains(ai)}_getInnerElement(e){return e.matches(Yu)?e:we.findOne(Yu,e)}_getOuterElement(e){return e.closest(BH)||e}static jQueryInterface(e){return this.each(function(){const s=Nr.getOrCreateInstance(this);if(typeof e=="string"){if(s[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);s[e]()}})}}N.on(document,NH,Bw,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),!xn(this)&&Nr.getOrCreateInstance(this).show()});N.on(window,MH,()=>{for(const t of we.find(HH))Nr.getOrCreateInstance(t)});us(Nr);const zH="toast",qH="bs.toast",Kn=`.${qH}`,WH=`mouseover${Kn}`,KH=`mouseout${Kn}`,GH=`focusin${Kn}`,QH=`focusout${Kn}`,YH=`hide${Kn}`,XH=`hidden${Kn}`,JH=`show${Kn}`,ZH=`shown${Kn}`,e8="fade",ry="hide",Xa="show",Ja="showing",t8={animation:"boolean",autohide:"boolean",delay:"number"},s8={animation:!0,autohide:!0,delay:5e3};class cu extends ws{constructor(e,s){super(e,s),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return s8}static get DefaultType(){return t8}static get NAME(){return zH}show(){if(N.trigger(this._element,JH).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(e8);const s=()=>{this._element.classList.remove(Ja),N.trigger(this._element,ZH),this._maybeScheduleHide()};this._element.classList.remove(ry),Ia(this._element),this._element.classList.add(Xa,Ja),this._queueCallback(s,this._element,this._config.animation)}hide(){if(!this.isShown()||N.trigger(this._element,YH).defaultPrevented)return;const s=()=>{this._element.classList.add(ry),this._element.classList.remove(Ja,Xa),N.trigger(this._element,XH)};this._element.classList.add(Ja),this._queueCallback(s,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Xa),super.dispose()}isShown(){return this._element.classList.contains(Xa)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,s){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=s;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=s;break}}if(s){this._clearTimeout();return}const n=e.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){N.on(this._element,WH,e=>this._onInteraction(e,!0)),N.on(this._element,KH,e=>this._onInteraction(e,!1)),N.on(this._element,GH,e=>this._onInteraction(e,!0)),N.on(this._element,QH,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const s=cu.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof s[e]>"u")throw new TypeError(`No method named "${e}"`);s[e](this)}})}}ru(cu);us(cu);const n8={apiKey:"AIzaSyAIHyRSDHdsVy31WiuNDLdx98bJGvbw0tw",authDomain:"gamet-ff510.firebaseapp.com",projectId:"gamet-ff510",storageBucket:"gamet-ff510.appspot.com",messagingSenderId:"783380616589",appId:"1:783380616589:web:4c0bb0d9d1a182ea3319c4",measurementId:"G-46GYD944NN"};kv(n8);cT(e3).use(pi).mount("#app");export{ot as B,He as _,Ei as a,y as b,At as c,Oe as d,h as e,V as f,Ea as g,i8 as h,at as l,g as o,w as t};
